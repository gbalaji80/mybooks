<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
  <title>Java-Success Blog: June 2012</title>

  <link href='http://www.java-success.com' rel='canonical'/>



  <script type="text/javascript">(function() { (function(){function c(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(l){}};this.tick("start",null,a)}var a,e;window.performance&&(e=(a=window.performance.timing)&&a.responseStart);var h=0<e?new c(e):new c;window.jstiming={Timer:c,load:h};if(a){var b=a.navigationStart;0<b&&e>=b&&(window.jstiming.srt=e-b)}if(a){var d=window.jstiming.load;0<b&&e>=b&&(d.tick("_wtsrt",void 0,b),d.tick("wtsrt_","_wtsrt",
e),d.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),d&&0<b&&(d.tick("_tbnd",void 0,window.chrome.csi().startE),d.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,d&&0<b&&(d.tick("_tbnd",void 0,window.external.startE),d.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(k){}})();window.tickAboveFold=function(c){var a=0;if(c.offsetParent){do a+=c.offsetTop;while(c=c.offsetParent)}c=a;750>=c&&window.jstiming.load.tick("aft")};var f=!1;function g(){f||(f=!0,window.jstiming.load.tick("firstScrollTime"))}window.addEventListener?window.addEventListener("scroll",g,!1):window.attachEvent("onscroll",g);
 })();</script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Blogger" />
<link rel="icon" type="image/vnd.microsoft.icon" href="https://www.blogger.com/favicon.ico"/>
<link rel="alternate" type="application/atom+xml" title="Java-Success Blog - Atom" href="http://java-success.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Java-Success Blog - RSS" href="http://java-success.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Java-Success Blog - Atom" href="https://www.blogger.com/feeds/35897879/posts/default" />
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/static/v1/v-css/50269083-blog_controls.css"/>
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/dyn-css/authorization.css?targetBlogID=35897879&zx=32ffd7df-5810-469f-a666-048e5011b3eb"/>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/979395223-backlink.js"></script>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/4080670514-backlink_control.js"></script>
<script type="text/javascript">var BL_backlinkURL = "https://www.blogger.com/dyn-js/backlink_count.js";var BL_blogId = "35897879";</script>


  <style type="text/css">
/*
-----------------------------------------------
Blogger Template Style
Name:     Harbor
Designer: Douglas Bowman
URL:      www.stopdesign.com
Date:     24 Feb 2004
----------------------------------------------- */


body {
  background:#fff url("http://www.blogblog.com/harbor/rocks.jpg") no-repeat right bottom;
  background-attachment:fixed;
  margin:0;
  padding:0;
  font:x-small Georgia,Serif;
  color:#333;
  font-size/* */:/**/small;
  font-size: /**/small;
  }
/* Commented Backslash Hack hides rule from IE5-Mac \*/
  body {background-attachment:scroll;}
  /* End IE5-Mac hack */
a:link {
  color:#36a;
  text-decoration:none;
  }
a:visited {
  color:#764;
  text-decoration:none;
  }
a:hover {
  color:#933;
  text-decoration:underline;
  }
a img {
  border-width:0;
  }


/* Page Structure
----------------------------------------------- */
#wrap {
  background:url("http://www.blogblog.com/harbor/sky.jpg") repeat-x left top;
  min-width:740px;
  margin:0;
  padding:0;
  text-align:left;
  }
#wrap2 {
  background:url("http://www.blogblog.com/harbor/lighthouse.jpg") no-repeat left top;
  }
#wrap3 {
  background:url("http://www.blogblog.com/harbor/cloud.jpg") no-repeat 100% 75px;
  }
#wrap4 {
  background:url("http://www.blogblog.com/harbor/center_cloud.jpg") no-repeat 50% 0;
  padding:15px;
  width:100%;
  width/* */:/**/auto;
  width: /**/auto;
  }
@media all {
  #content {
    max-width:890px;
    padding:0 30px 50px;
    width:100%;
    width/* */:/**/auto;
    width: /**/auto;
    }
  html>body #content {
    border:3px double #fff;
    }
  #main {
    width:64%;
    float:right;
    }
  #main2 {
    margin:0;
    padding:0;
    }
  #sidebar {
    width:32%;
    float:left;
    }
  #sidebar2 {
    margin:0;
    padding:170px 0 20px;
    }
  }
@media handheld {
  #content {
    width:90%;
    }
  #main {
    width:100%;
    float:none;
    }
  #sidebar {
    width:100%;
    float:none;
    }
  }

/* Header
----------------------------------------------- */
@media all {
  #header {
    padding:15px 0 10px 110px;
    }
  }
@media handheld {
  #header {
    width:100%;
    padding:15px 0 10px 0;
    }
  }
#blog-title {
  margin:0 0 .25em;
  font-size:270%;
  font-weight:normal;
  color:#678;
  }
#blog-title a {
  color:#678;
  text-decoration:none;
  }
#description {
  margin:0;
  max-width:700px;
  font-size:75%;
  line-height:1.8em;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#789;
  }


/* Headings
----------------------------------------------- */
h2 {
  margin:1.5em 0 .75em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }


/* Posts
----------------------------------------------- */
.date-header {
  margin:2em 0 .5em;
  }
.post {
  margin:.5em 0 1.5em;
  line-height:1.6em;
  }
.post-title {
  margin:.25em 0 0;
  padding:0 0 4px;
  font-size:140%;
  font-weight:normal;
  line-height:1.4em;
  }
.post-title a, .post-title strong {
  background:url("http://www.blogblog.com/harbor/icon_lighthouse.gif") no-repeat 0 .15em;
  display:block;
  padding-left:20px;
  text-decoration:none;
  color:#368;
  font-weight:normal;
  }
.post-title strong {
  background-image:url("http://www.blogblog.com/harbor/icon_lighthouse2.gif");
  color:#000;
  }
.post-title a:hover {
  color:#933;
  }
.post-body {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding-top:12px;
  }
.post p {
  margin:0 0 .75em;
  }
p.post-footer {
  color:#999;
  }
.post-footer em, .comment-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.post-footer em {
  font-style:normal;
  color:#666;
  margin-right:.4em;
  }
.comment-link strong {
  font-size:130%;
  }
.comment-link {
  margin-left:.4em;
  }
.post img {
  padding:4px;
  border:1px solid #cde;
  }


/* Comments
----------------------------------------------- */
#comments {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding:15px 0 0;
  }
#comments h4 {
  margin:1em 0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }
#comments h4 strong {
  font-size:130%;
  }
#comments-block {
  margin:1em 0 1.5em;
  line-height:1.4em;
  }
#comments-block dt {
  margin:.5em 0;
  }
#comments-block dd {
  margin:.25em 20px 0;
  }
#comments-block dd.comment-timestamp {
  margin:-.25em 20px 1.5em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
#comments-block dd p {
  margin:0 0 .75em;
  }
.deleted-comment {
  font-style:italic;
  color:gray;
  }


/* Sidebar Content
----------------------------------------------- */
#sidebar ul {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 15px;
  padding:0 0 15px;
  list-style:none;
  }
#sidebar li {
  margin:0;
  padding:0 0 .25em 15px;
  text-indent:-15px;
  line-height:1.5em;
  }
#sidebar p {
  color:#666;
  line-height:1.5em;
  }


/* Profile
----------------------------------------------- */
#profile-container {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 2em;
  padding:0 0 15px;
  }
.profile-datablock {
  margin:.5em 0 .5em;
  }
.profile-img {
  display:inline;
  }
.profile-img img {
  float:left;
  padding:4px;
  border:1px solid #cde;
  margin:0 8px 3px 0;
  }
.profile-data {
  margin:0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.profile-data strong {
  display:none;
  }
.profile-textblock {
  margin:0 0 .5em;
  }
.profile-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Footer
----------------------------------------------- */
#footer {
  clear:both;
  padding:15px 30px 0 50px;
  }
#footer hr {
  display:none;
  }
#footer p {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  margin:0;
  padding-top:15px;
  font:78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Feeds
----------------------------------------------- */
#blogfeeds {
  }
#postfeeds {
  }
  </style>
<!-- --><style type="text/css">@import url(https://www.blogger.com/static/v1/v-css/navbar/3334278262-classic.css);
div.b-mobile {display:none;}
</style>

</head>

<body><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d35897879\x26blogName\x3dJava-Success+Blog\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dBLUE\x26layoutType\x3dCLASSIC\x26searchRoot\x3dhttp://java-success.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://java-success.blogspot.com/\x26vt\x3d2978101103701820782',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script>

<!-- Begin wraps -->

<div id="wrap"><div id="wrap2"><div id="wrap3"><div id="wrap4">


<!-- Begin #content -->
<div id="content">


<div id="header">

  <h1 id="blog-title">
    
	Java-Success Blog
	
  </h1>

  <p id="description">Java/JEE blog containing interview questions and answers and tutorials</p>

</div>


<!-- Begin #main -->
<div id="main"><div id="main2">

<div class='adsense' style='text-align:center; padding: 0px 3px 0.5em 3px;'>
<script type="text/javascript"><!--
google_ad_client="pub-3764234023451771";
google_ad_host="pub-1556223355139109";
google_ad_width=468;
google_ad_height=60;
google_ad_format="468x60_as";
google_ad_type="text";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="333333";
google_color_url="009900";
google_color_text="993333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



</div>

<!-- Search Google -->
<center>
<form method="get" action="http://www.google.com/custom" target="_top">
<table bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<label for="sbi" style="display: none">Enter your search terms</label>
<input type="text" name="q" size="31" maxlength="255" value="" id="sbi"></input>
<label for="sbb" style="display: none">Submit search form</label>
<input type="submit" name="sa" value="Search" id="sbb"></input>
<input type="hidden" name="client" value="pub-3764234023451771"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
</center>
<!-- Search Google -->









<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jun 29, 2012</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="7143055284996832306"></a>
    
         
    


    <h3 class="post-title">
	 
	 Reviewing a given Java code in job interviews and code review sessions
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>In job interviews, it is common to give a smippet of bad code, and ask you to describe what is wrong with the code and how you would go about improving it. A thorough review of the code will be beneficial not only in job interviews to impress your potential employers, but also to impress your peers and superiors during code review sessions.<br />
<br />
<b>Q. </b>How will you go about improving on the following code snippet that calculates the new balance based on the current balance, total debits, and total credits?<br />
<br />
&nbsp;<b>Note</b>: All amounts need to be positive values.

<!-- INFOLINKS_OFF -->
<br />
<br />
<pre class="brush: csharp">import java.math.BigDecimal;

public class CashCalculatorBasic {

 public BigDecimal getCalculatedAvailableBalance(BigDecimal currentBalance, BigDecimal totalDebits, 
                                           BigDecimal totalCredits) {
  
  BigDecimal result =  currentBalance
     .subtract(totalDebits)
     .add(totalCredits);
  
  System.out.println("The calculated result is " + result);
  
  return result;

 }

 public static void main(String[] args) {
    
    new CashCalculatorBasic().getCalculatedAvailableBalance(
    new BigDecimal("1250.00"), new BigDecimal("250.00"), new BigDecimal("500.00"));
 }

}

</pre>
<b>A.</b> 
Firstly, a good thing about the above code is that it uses the <i>BigDecimal</i> class instead of a floating point type like float or double.

Here are a number of things that can be improved.<br />
<br />
<br />
<b><span style="font-size: large;">1. Don't use System.out.println(.....)</span> </b>and replace it with the log4j and slf4j framewowrks. It is a bad practice to use System.out.println because you cannot easily change log levels, turn it off, customize it, etc. A proper logging system, like Log4J, adds all sorts of features that are very useful in real applications. You can direct the output to different places (console, file, network, etc.). You can tell it to output only a subset of the messages, without having to recompile. You can get timestamp on each message, etc.<br />
<br />
<br />
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Main Leader board - Text only */
google_ad_slot = "5678244596";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel="2755834745";
//--&gt;
</script>

<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br />
<span style="font-size: large;"><b>2. Don't use static void main method to test your class</b>.</span> Write unit tests using a unit testing framework like JUnit or TestNG.<br />
<br />
<span style="font-size: large;"><b>3. Don't test only the happy path.</b></span> Include negative test scenarios as well. By writing proper test cases, the code can be refactored with confidence.<br />
<br />
<b><span style="font-size: large;">4. The above code does not fail fast. </span></b>A fail fast code is the one that performs input validation and throws any validation errors if the pre-conditions or post conditions are not met. For example, testing for null, empty String, negative values, etc.<br />
<br />
<b><span style="font-size: large;">5. Your code should favour code to interface.</span></b> What if you want to write an improved CashCalculator? You will have to go and change all your references where CashCalculatorBasic is used.<br />
<br />
<b><span style="font-size: large;">6. The readability can be improved by abstracting</span></b> out the calculation to a separate util class or an inner class as shown below. This will be really useful when you have more methods to calculate different values, which would be the case in real life scenario. This will also improve readability and reusability of the code.

Here is the improved code.

Define an interface, which is the contract for the invokers or callers.

<br />
<br />
<br />
<pre class="brush: csharp">import java.math.BigDecimal;


public interface CashCalculator {
 
  BigDecimal getCalculatedAvailableBalance(BigDecimal currentBalance, BigDecimal totalDebits, 
                                     BigDecimal totalCredits) ;

}

</pre>
Now, define the implementation class that takes into consideration the best practices listed above. even though it has more code, as the class takes on more methods, it will improve its reusability and readability.

<br />
<pre class="brush: csharp">import java.math.BigDecimal;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;


/**
 * 
 * coding to an interface
 *
 */
public class CashCalculatorImproved implements  CashCalculator {
 
  //using a logging framework 
 private static final Logger log = LoggerFactory.getLogger(CashCalculatorImproved.class);

 public BigDecimal getCalculatedAvailableBalance(BigDecimal currentBalance, BigDecimal totalDebits, 
                                           BigDecimal totalCredits) {
      
  //improved readability
  BigDecimal result = new Balance(currentBalance)
                             .less(totalDebits)
                             .more(totalCredits)
                             .getBalance();
      
   //using a logging framework 
      if(log.isDebugEnabled()) {
       log.debug("The calculated result is {0}" , result);
      }
      
      return result;
 }

 //an inner class that abstracts out the calculation logic
 private class Balance {

  private BigDecimal balance;

  public Balance(BigDecimal balance) {
   //check for pre condition
   if (balance == null) {
      throw new IllegalArgumentException("Invalid balance " + balance);//fail fast
   }
   this.balance = balance;
  }

  public BigDecimal getBalance() {
   return balance;
  }

  public Balance less(BigDecimal amount) {
   //check for pre condition
   if (!isPositiveOrZero(amount)) {
      throw new IllegalArgumentException("Invalid amount " + amount);//fail fast
   }

   balance = balance.subtract(amount);
   
   //check for post condition
   if(!isPositiveOrZero(balance)){
      //should throw a real business exception
      throw new RuntimeException("The balance is negative " + balance);//fail fast
   }

   return this;
  }

  public Balance more(BigDecimal amount) {
   //check for pre condition
   if (!isPositiveOrZero(amount)) {
    throw new IllegalArgumentException("Invalid amount " + amount);//fail fast
   }

   balance = balance.add(amount);
 
   return this;
  }

  //a method with a meaningful name
  private boolean isPositiveOrZero(BigDecimal amount) {
     return amount != null &amp;&amp; amount.signum() != -1;
  }

 }

}

</pre>
The above code also demonstrates a good use of an inner class. Finally the unit tests that test for both positive (i.e. happy path) and negative scenarios.<br />
<br />
<pre class="brush: csharp">import java.math.BigDecimal;

import junit.framework.Assert;

import org.junit.Before;
import org.junit.Test;

public class CashCalculatorImprovedTest {
 
 CashCalculator calculator = null;

 @Before
 public void init() {
  // prefer Spring/Guice to inject the dependency
  calculator = new CashCalculatorImproved();
 }

 @Test
 public void testCalculatedAvailableBalance(){
  BigDecimal result = calculator.getCalculatedAvailableBalance(
    new BigDecimal("1250.00"), new BigDecimal("250.00"), new BigDecimal("500.00"));
  Assert.assertEquals(new BigDecimal("1500.00"), result);
 }
 
 @Test
 public void testForZeroCalculatedAvailableBalance(){
  BigDecimal result = calculator.getCalculatedAvailableBalance(
    new BigDecimal("1250.00"), new BigDecimal("0.00"), new BigDecimal("0.00"));
  Assert.assertEquals(new BigDecimal("1250.00"), result);
 }
 
 
 @Test(expected=IllegalArgumentException.class)
 public void negativeTest1CalculatedAvailableBalance(){
   calculator.getCalculatedAvailableBalance( null, new BigDecimal("250.00"), new BigDecimal("500.00"));
 }
 
 @Test(expected=IllegalArgumentException.class)
 public void negativeTest2CalculatedAvailableBalance(){
   calculator.getCalculatedAvailableBalance( new BigDecimal("1250.00"), new BigDecimal("-25.00"), new BigDecimal("500.00"));
 }
 
 @Test(expected=IllegalArgumentException.class)
 public void negativeTest3CalculatedAvailableBalance(){
   calculator.getCalculatedAvailableBalance( new BigDecimal("1250.00"), new BigDecimal("250.00"), new BigDecimal("-500.00"));
 }
}&nbsp; </pre>
<br />
<br />
<br />
<span style="font-size: large;"><a href="http://java-success.blogspot.com/2014/05/top-17-java-coding-tips-for-job.html">Top 17 Java Coding Tips for job interviews and pre-interview coding tests</a></span><br />
<br />
<br />
More similar examples are covered in my Java career Essentials and companion books. For example, you will be expected to know what design pattern to apply to a given piece of code and design patterns are discussed with examples in "Java/J2EE Job Interview Companion".<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Core%20Java">Core Java</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2012/06/reviewing-given-java-code-in-job.html" title="permanent link"> 6/29/2012 12:41:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2012/06/reviewing-given-java-code-in-job.html#comment-form"location.href=http://java-success.blogspot.com/2012/06/reviewing-given-java-code-in-job.html#comment-form;><span style="text-transform:lowercase">4 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=7143055284996832306" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=7143055284996832306&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jun 27, 2012</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="5350726235380040632"></a>
    
         
    


    <h3 class="post-title">
	 
	 Core Java coding questions frequently asked in written tests and interviews - part 3: method overloading Vs overriding
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><h2>
Core Java Coding Questions and Answers for beginner to intermediate level</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently.html"> <span style="font-size: large;">Q1</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_26.html"> <span style="font-size: large;">Q2</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_27.html"> <span style="font-size: large;">Q3</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/07/java-coding-questions-frequently-asked.html"> <span style="font-size: large;">Q4</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/09/java-coding-interview-questions-and.html"> <span style="font-size: large;">Q5 - Q8</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/09/java-oo-interview-questions-and-answers.html"> <span style="font-size: large;">Q9</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/04/core-java-coding-question-to-find-2.html"> <span style="font-size: large;">Q10</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/05/find-second-highest-number-in-array.html"> <span style="font-size: large;">Q11</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/04/java-stack-data-structure-interview.html"> <span style="font-size: large;">Q12 - Q14</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/04/core-java-coding-question-on-palindrome.html"> <span style="font-size: large;">Q15</span></a> </td>
</tr>
</tbody></table>
<br />
<script type="text/javascript">
<!--
google_ad_client = "ca-pub-3764234023451771";
/* Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
//--></script>


<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br/>
This part of the Java coding interview question is on the popular method overloading versus overriding concept.<br />
<br />
<b>Q.</b> What will be the output of the following code snippet?<br />
<br />
<pre class="brush: csharp">public class MethodOverrideVsOverload {
  
 public boolean equals( MethodOverrideVsOverload other ) {
     System.out.println("MethodOverrideVsOverload equals method reached" );
     return true;
   }
 
 public static void main(String[] args) {
  Object o1 = new MethodOverrideVsOverload();
  Object o2 = new MethodOverrideVsOverload();
  
  MethodOverrideVsOverload o3 = new MethodOverrideVsOverload();
  MethodOverrideVsOverload o4 = new MethodOverrideVsOverload();
  
  if(o1.equals(o2)){
   System.out.println("objects o1 and o2 are equal");
  }
  
  if(o3.equals(o4)){
   System.out.println("objects o3 and o4 are equal");
  }
 }
}

</pre>
<b>A.</b> The output will be

<br />
<br />
<pre class="brush: csharp">MethodOverrideVsOverload equals method reached
objects o3 and o4 are equal
</pre>
<br />
<b>What concepts does this question try to test?</b><br />
<ul>
<li>In Java, a class can only extend a single class (i.e. single inheritance), and when it does not explicitly extend a class, it <b>implicitly </b>extends the class <b>Object</b>. So,&nbsp;<span style="background-color: white;"><i>MethodOverrideVsOverload </i>implicitly extends the class Object.&nbsp;</span></li>
<li>The majority of the non final Object class methods are meant to be overridden by the sub classes.<br /><br />
<pre class="brush: csharp">public boolean equals(Object obj); // make note of this method
public int hashCode();
public String toString();
</pre>
</li>
<li>The method overloading takes place at <b>compile time</b> (i.e. static binding) and method overriding takes place at <b>runtime </b>(i.e. dynamic binding). Static binding means the JVM decides, which class or method to call during compile time. Dynamic binding means, the JVM decides,&nbsp;which class or method to call during runtime. The polymorphism is possible because of dynamic binding.<a href="http://java-success.blogspot.com.au/2011/09/core-java-interview-answers-q1.html" target="_blank"> Learn more about compile-time vs runtime</a>.&nbsp;</li>
<li>The method overriding must adhere to the following rules&nbsp;
<br />
<br />
<table border="1">
<tbody>
<tr>
   <td><b>Arguments</b></td>
   <td>Must not change.</td>
</tr>
<tr>
   <td><b>Return type</b></td>
   <td>Can't change except for covariant (subtype) returns.</td>
</tr>
<tr>
   <td><b>Exceptions</b></td>
   <td>The extending class can eliminate or call fewer exceptions than its parent, but must not throw new or broader checked exceptions.</td>
</tr>
<tr>
   <td><b>Access</b></td>
   <td>Must not be more restrictive than the class it extends. Can be less restrictive.</td>
</tr>
<tr>
   <td><b>Invocation</b></td>
   <td>Which method to call is based on object type, at runtime time (i.e. dynamic binding).</td>
</tr>
</tbody></table>
</li>
</ul>
<div>
<br /></div>
<div>
Now, if you look at the above code</div>
<div>
<br /></div>
<div>
The "<i>equals(<span style="background-color: white;">MethodOverrideVsOverload other</span></i><span style="background-color: white;"><i>)"&nbsp;</i>method in<i>&nbsp;</i>class </span><span style="background-color: white;"><i>MethodOverrideVsOverload</i></span><span style="background-color: white;"><b>&nbsp;</b></span><span style="background-color: white;"><b>does not</b> actually override the <i>Object </i>class's "</span><span style="background-color: white;"><i>public boolean equals(Object obj)"&nbsp;</i>method. This is because it fails to adhere to the "Arguments" rule as both methods have different arguments as one is of &nbsp;type "</span><span style="background-color: white;"><span style="background-color: white;"><i>MethodOverrideVsOverload&nbsp;</i></span></span><span style="background-color: white;">" and the other of type "<i>Object</i>" . <span style="font-size: large;">So, the two methods are <b>overloaded </b>(happens at compile time)<b>&nbsp;</b>and not <b>overridden</b>.</span></span><br />
<br />
<span style="background-color: white;">So, w<b>hen o1.equals(o2) is invoked</b>, the&nbsp;</span><i style="background-color: white;">public boolean equals(Object obj) method</i><span style="background-color: white;"><i> </i>of the object class is invoked because during <span style="font-size: large;">compile time</span>, the o1 and o2 are of type Object.The Object class's equals( ... ) method returns false as it compares the memory address (e.g. Object@235f56 and Object@653af32) of both objects.</span><br />
<br />
<span style="background-color: white;"><b>When o3.equals(o4) is invoked</b>, the "</span><span style="background-color: white;"><i>equals( MethodOverrideVsOverload other )"</i> of the class&nbsp;</span><i style="background-color: white;">MethodOverrideVsOverload</i><span style="background-color: white;"> is invoked as during<span style="font-size: large;"> compile time </span>o3 and o4 are of type&nbsp;</span><i style="background-color: white;">MethodOverrideVsOverload, </i><span style="background-color: white;">hence you get the above output.</span><br />
<br />
<br />
<span style="background-color: white;"><b>What follow on questions can you expect?</b></span><br />
<span style="background-color: white;"><b><br /></b></span>
<span style="background-color: white;"><b>Q</b>. How will you fix the above issue?</span><br />
<span style="background-color: white;"><b>A</b>. In Java 5, annotations were introduced and one of the handy <b>compile time annotations</b> is the @override, which will ensure that the methods are overridden correctly. If you had this annotation, when you override it incorrectly as in the above example, a compile time error will be thrown.&nbsp;</span><br />
<span style="background-color: white;"><br /></span>
<span style="background-color: white;">So, to fix it, add the @override annotation to the "</span><span style="background-color: white;">boolean equals( MethodOverrideVsOverload other )" of the&nbsp;</span><i style="background-color: white;">MethodOverrideVsOverload</i><span style="background-color: white;">&nbsp; class. This will give you a compile time error indicating that the method is not properly overridden. Now, fix the method signature by changing the &nbsp;argument type in the method signature from "</span><i style="background-color: white;">MethodOverrideVsOverload</i><span style="background-color: white;">" to "<i>Object</i>" as shown below.</span><br />
<span style="background-color: white;"><br /></span>
<span style="background-color: white;"><br /></span></div>
<pre class="brush: csharp">public class MethodOverrideVsOverload {
 
 @Override
 public boolean equals( Object other ) {
     System.out.println("MethodOverrideVsOverload equals method reached" );
     return true;
 }
 
 
 public static void main(String[] args) {
  Object o1 = new MethodOverrideVsOverload(); //during compile time o1 is of type Object
                                              //during runtime o1 is of type MethodOverrideVsOverload
  Object o2 = new MethodOverrideVsOverload(); //during compile time o2 is of type Object
                                              //during runtime o2 is of type MethodOverrideVsOverload
  
  MethodOverrideVsOverload o3 = new MethodOverrideVsOverload(); //o3 is of type MethodOverrideVsOverload
                                                                // during both compile time and runtime
  MethodOverrideVsOverload o4 = new MethodOverrideVsOverload(); //o4 is of type MethodOverrideVsOverload
                                                                // during both compile time and runtime
  
  if(o1.equals(o2)){
   System.out.println("objects o1 and o2 are equal");
  }
  
  if(o3.equals(o4)){
   System.out.println("objects o3 and o4 are equal");
  }
 
 }

}
</pre>
<br />
The output will be


<br />
<br />
<pre class="brush: csharp">MethodOverrideVsOverload equals method reached
objects o1 and o2 are equal
MethodOverrideVsOverload equals method reached
objects o3 and o4 are equal
</pre>
<br />
This is because now the methods are <span style="font-size: large;">overridden and this happens at runtime</span>. This is a bit tricky question, and think out loud at the interview to show that you understand the fundamentals.<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Core%20Java">Core Java</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2012/06/core-java-coding-questions-frequently_27.html" title="permanent link"> 6/27/2012 05:40:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2012/06/core-java-coding-questions-frequently_27.html#comment-form"location.href=http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_27.html#comment-form;><span style="text-transform:lowercase">34 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2012/06/core-java-coding-questions-frequently_27.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=5350726235380040632" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=5350726235380040632&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jun 26, 2012</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="5833302793693576982"></a>
    
         
    


    <h3 class="post-title">
	 
	 Core Java coding questions frequently asked in written tests and interviews - part 2: equals Vs ==
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><h2>
Core Java Coding Questions and Answers for beginner to intermediate level</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently.html"> <span style="font-size: large;">Q1</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_26.html"> <span style="font-size: large;">Q2</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_27.html"> <span style="font-size: large;">Q3</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/07/java-coding-questions-frequently-asked.html"> <span style="font-size: large;">Q4</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/09/java-coding-interview-questions-and.html"> <span style="font-size: large;">Q5 - Q8</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/09/java-oo-interview-questions-and-answers.html"> <span style="font-size: large;">Q9</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/04/core-java-coding-question-to-find-2.html"> <span style="font-size: large;">Q10</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/05/find-second-highest-number-in-array.html"> <span style="font-size: large;">Q11</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/04/java-stack-data-structure-interview.html"> <span style="font-size: large;">Q12 - Q14</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/04/core-java-coding-question-on-palindrome.html"> <span style="font-size: large;">Q15</span></a> </td>
</tr>
</tbody></table>
<br />
<b><br /></b>
<b>Q2.</b> What will be the output of the following code snippet?<br />
<br />
<pre class="brush: csharp">   Object s1 = new String("Hello");
   Object s2 = new String("Hello");

   if(s1 == s2) {
     System.out.println("s1 and s2 are ==");
   }else if (s1.equals(s2)) {
     System.out.println("s1 and s2 are equals()");
   }

</pre>
<b>A2. </b>The answer is:<br />
<br />
<span style="background-color: white;"></span><br />
<pre class="brush: csharp">&nbsp;s1 and s2 are equals()

</pre>
<b><br /></b>
Here is the explanation with a diagram.<br />
<b><br /></b>
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-WuHjWPkiK2Q/T-fIZc8wgbI/AAAAAAAAAnI/iM2SJomRZ4w/s1600/equals-vs-==.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-WuHjWPkiK2Q/T-fIZc8wgbI/AAAAAAAAAnI/iM2SJomRZ4w/s640/equals-vs-==.jpg" height="410" width="640" /></a></div>
<b><br /></b>
<b><br /></b>
So, the above question tests your understanding of "==" versus "equals( )" applied to objects in Java. One compares the references and the other compares the actual values.<br />
<b><br /></b>
<b>Here are some follow on questions:</b><br />
<b><br /></b>
<b>Q.</b> What will be the output for the following code snippet?<br />
<br />
<pre class="brush: csharp"> Object s1 = "Hello";
 Object s2 = "Hello";

 if (s1 == s2) {
  System.out.println("s1 and s2 are ==");
 } else if (s1.equals(s2)) {
  System.out.println("s1 and s2 are equals()");
 }
 
</pre>
<b>A.</b> The answer is

<br />
<br />
<pre class="brush: csharp">s1 and s2 are ==
</pre>
<br />
Now the above answer violates the rule we saw before. This is a special case (or rule) with the String objects and a typical example of the <b>flyweight design pattern</b> in action. This design pattern is used to conserve memory by reducing the number of objects created. The String object creates a pool of string and reuse an existing String object from the pool if the values are same instead of creating a new object. The flyweight pattern is all about object reuse. This rule applies only when you declare the String object as Object s = "Hello"; without using the keyword "<b>new</b>".<br />
<br />
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Main Leader board - Text only */
google_ad_slot = "5678244596";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel="2755834745";
//</script>

--&gt;
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>

<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-vrFHLtauEpE/T-fNK57i9QI/AAAAAAAAAnU/RYgcKhojEBY/s1600/equals-vs-==.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-vrFHLtauEpE/T-fNK57i9QI/AAAAAAAAAnU/RYgcKhojEBY/s640/equals-vs-==.jpg" height="214" width="640" /></a></div>
<br />
<br />
This is a very popular Java &nbsp;interview question. <br />
<br />
<span style="font-size: large;"><b>More Java coding questions and answers</b></span><br />
<ul>
<li><span style="background-color: white;"><a href="http://java-success.blogspot.com.au/2012/06/core-java-coding-questions-frequently_27.html">Core Java coding questions frequently asked in written tests and interview - part 3</a></span></li>
<li><span style="background-color: white;"><a href="http://java-success.blogspot.com.au/2012/06/reviewing-given-java-code-in-job.html">Reviewing a given Java code at job interviews and code review sessions </a></span></li>
</ul>
<ul>
<li><span style="background-color: white;"><a href="http://java-success.blogspot.com.au/2011/09/java-oo-interview-questions-and-answers.html?showComment=1340608569109#c5514749263821896267" style="background-color: white;" target="">Java OO interview questions and answers.</a></span></li>
<li><span style="background-color: white;"><a href="http://java-success.blogspot.com.au/2011/09/java-coding-interview-questions-and.html" style="background-color: white;" target="">Java coding interview questions and answers</a></span></li>
<span style="background-color: white;">&nbsp;&nbsp;</span>
</ul>
<br />
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Core%20Java">Core Java</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2012/06/core-java-coding-questions-frequently_26.html" title="permanent link"> 6/26/2012 05:49:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2012/06/core-java-coding-questions-frequently_26.html#comment-form"location.href=http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_26.html#comment-form;><span style="text-transform:lowercase">17 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=5833302793693576982" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=5833302793693576982&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jun 25, 2012</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="3114519887764711727"></a>
    
         
    


    <h3 class="post-title">
	 
	 Core Java coding questions frequently asked in written tests and interviews - part 1: Immutability and object references
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><h2>
Core Java Coding Questions and Answers for beginner to intermediate level</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently.html"> <span style="font-size: large;">Q1</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_26.html"> <span style="font-size: large;">Q2</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_27.html"> <span style="font-size: large;">Q3</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/07/java-coding-questions-frequently-asked.html"> <span style="font-size: large;">Q4</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/09/java-coding-interview-questions-and.html"> <span style="font-size: large;">Q5 - Q8</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/09/java-oo-interview-questions-and-answers.html"> <span style="font-size: large;">Q9</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/04/core-java-coding-question-to-find-2.html"> <span style="font-size: large;">Q10</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/05/find-second-highest-number-in-array.html"> <span style="font-size: large;">Q11</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/04/java-stack-data-structure-interview.html"> <span style="font-size: large;">Q12 - Q14</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/04/core-java-coding-question-on-palindrome.html"> <span style="font-size: large;">Q15</span></a> </td>
</tr>
</tbody></table>
<br />
<table>
<tbody>
<tr>
<td width="30%">
</td>
<td>Some core java questions are very frequently asked in job interviews and written tests to ascertain if you know the Java fundamentals. I have covered a few questions that are not covered in my books. These coding questions will also clear up the fundamentals.
<br />
<br />
<b>Q1.</b> What will be the output of the following code snippet?<br />
<br />


<pre class="brush: csharp">String s = " Hello ";
s += " World ";
s.trim( );
System.out.println(s);
</pre>
<br />
<b>A1. </b>The output will be<br />
<br />
" Hello &nbsp;World "<br />
<br />
with the <b>leading and trailing spaces</b>. Some would expect a trimmed "Hello World".

<br />
<span style="background-color: white;">So, <b>what concepts does this question try to test?</b></span><br />
<ol>
<li>String objects are immutable and there is a trick in s.trim( ) line.</li>
<li>Understanding object references and unreachable objects that are eligible for garbage collection.</li>
</ol>
<div>
<b>What follow on questions can you expect?</b></div>
<ol>
<li>You might get a follow on question on how many string objects are created in the above example and when will it become an unreachable object to be garbage collected.</li>
<li>You might also be asked a follow on question as to if the above code snippet is efficient.</li>
</ol>
<div>
<span style="background-color: white;">The best way to explain this is via a self-explanatory diagram as shown below.</span></div>
<br /></td>
</tr>
</tbody></table>
<br />
<b><br /></b>
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-uJ6JHzcrL6o/T-K0g2UaCxI/AAAAAAAAAm8/BOl1LPQNCMY/s1600/string-immutability-coding.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-uJ6JHzcrL6o/T-K0g2UaCxI/AAAAAAAAAm8/BOl1LPQNCMY/s640/string-immutability-coding.jpg" height="616" width="640" /></a></div>
<br />
<br />
If you want the above code to output "Hello World" with leading and trailing spaces trimmed then assign the s.trim( ) to the variable "s". This will make the reference "s" to now point to the newly created trimmed String object.<br />
<br />
The above code can be rewritten as shown below<br />
<br />
<br />
<pre class="brush: csharp">StringBuilder sb = new StringBuilder(" Hello ");
sb.append(" World ");
System.out.println(sb.toString().trim( ));
</pre>
<br />
<br />
The <i>StringBuilder </i>is not a thread-safe class. It is fine when you are using it as a local variable. If you want to use it as an instance variable then use the <i>StringBuffer </i>class which is thread-safe. If you are curious to know what happens under the covers during String manipulation -- <a href="http://java-success.blogspot.com/2012/04/core-java-interview-questions-and.html" target="_blank"><span style="font-size: large;">String concatenation</span></a><br />
<br />
<span style="font-size: large;">Relevant must get it right coding questions and answers</span><br />
<br />
<ul>
<li><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_26.html" target="">Core Java coding questions frequently asked in written tests and interviews - part 2 - == Vs equals()</a></li>
<li><a href="http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently_27.html">Core Java coding questions frequently asked in written tests and interview - part 3 - overload Vs override</a></li>
<li><a href="http://java-success.blogspot.com/2012/07/java-coding-questions-frequently-asked.html">Core Java coding questions frequently asked in written tests and interview - part 4 -- iteration Vs recursion</a></li>
<li><a href="http://java-success.blogspot.com/2012/06/reviewing-given-java-code-in-job.html">Reviewing a given Java code at job interviews and code review sessions </a></li>
<li><a href="http://java-success.blogspot.com/2012/07/java-coding-question-and-answer-on.html" style="color: #2932d5; font-family: Verdana, Geneva, sans-serif; font-size: 14px; line-height: 19px;">Java coding question and answer on multi-threading</a>
</li>
<li><a href="http://java-success.blogspot.com/2011/09/java-oo-interview-questions-and-answers.html?showComment=1340608569109#c5514749263821896267" target="">Java OO interview questions and answers.</a></li>
<li><a href="http://java-success.blogspot.com/2011/09/java-coding-interview-questions-and.html" target="">Java coding interview questions and answers</a>&nbsp;-- swapping, reversing a string, etc</li>
<li><a href="http://java-success.blogspot.com/2012/07/can-you-write-code-by-asking-right.html">Can you write code by asking the right questions?</a></li>
<li><a href="http://java-success.blogspot.com/2012/07/java-coding-question-on-popular.html">Handling the programming question on the popular Fibonacci number.</a></li>
<li><a href="http://java-success.blogspot.com/2013/01/java-writing-code-compare-two-csv-files.html">Java writing code -- compare two CSV files in Java.</a></li>
<li><a href="http://java-success.blogspot.com/2013/01/working-with-java-calendar-and-dates.html">Working with Java Calendar and Dates - coding Q&amp;A.</a></li>
<li><a href="http://java-success.blogspot.com/2013/10/java-tree-structure-interview-questions.html">Java Tree structure coding questions and answers : more tougher questions &amp; answers for written tests</a></li>
</ul><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Coding">Coding</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Core%20Java">Core Java</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2012/06/core-java-coding-questions-frequently.html" title="permanent link"> 6/25/2012 11:13:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2012/06/core-java-coding-questions-frequently.html#comment-form"location.href=http://java-success.blogspot.com/2012/06/core-java-coding-questions-frequently.html#comment-form;><span style="text-transform:lowercase">32 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=3114519887764711727" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=3114519887764711727&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jun 20, 2012</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="8136745084306874076"></a>
    
         
    


    <h3 class="post-title">
	 
	 Batch Processing in Java with Spring batch -- part 3
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>This assumes that you have read the spring batch <a href="http://java-success.blogspot.com.au/2012/06/batch-processing-in-java-with-spring.html">part 1</a> &amp; <a href="http://java-success.blogspot.com.au/2012/06/batch-processing-in-java-with-spring_18.html">part 2</a>. This is the final part.<br />
<br />
<b>Step 1:</b> The annotated Java classes are referenced directly due to following line in the batch-context.xml

<br />
<!-- INFOLINKS_OFF -->
<pre class="brush: csharp">  
    &lt;!-- Component-Scan automatically detects annotations in the Java classes.  --&gt;
 &lt;context:component-scan base-package="com.myapp.batch" /&gt;
</pre>
<br />
<b>Step 2: </b>You define the batch job as shown below. It can have a number of steps. Some details are omitted to keep it simple.

<br />
<pre class="brush: csharp"> 

  &lt;batch:job id="availableBalanceJob"&gt;
        &lt;batch:listeners&gt;
      &lt;!-- annotated listener using context:component-scan--&gt; 
            &lt;batch:listener ref="appJobExecutionListener" /&gt;
            &lt;batch:listener ref="itemFailureLoggerListener" /&gt;
        &lt;/batch:listeners&gt;
        &lt;batch:step id="step1" parent="batchControlStep"&gt;
            &lt;batch:end on="FAILED" /&gt;
            &lt;batch:next on="*" to="step2" /&gt;
        &lt;/batch:step&gt;
        &lt;batch:step id="step2"&gt;
            &lt;batch:tasklet&gt;
                &lt;batch:chunk
                    reader="accountReader"
                    processor="availableCashProcessor"
                    writer="availableCashWriter"
                    commit-interval="100"
                    retry-limit="1000000"&gt;
     &lt;!-- deadlock retry --&gt;
                    &lt;batch:retryable-exception-classes&gt;
                        &lt;batch:include class="org.springframework.dao.DeadlockLoserDataAccessException"/&gt;
                    &lt;/batch:retryable-exception-classes&gt;
                &lt;/batch:chunk&gt;
                &lt;batch:listeners&gt;
                    &lt;batch:listener ref="batchItemListener" /&gt;
                &lt;/batch:listeners&gt;
            &lt;/batch:tasklet&gt;
        &lt;/batch:step&gt;
    &lt;/batch:job&gt;

</pre>
<b>Step 3: </b>Provide the relevant annotated and referenced class implementations. The listener "appJobExecutionListener" is defined as shown below. As you can see the class is annotated with @Component("appJobExecutionListener"). 

<br />
<pre class="brush: csharp"> 

package com.myapp.batch.listener;

import org.springframework.batch.core.BatchStatus;
import org.springframework.batch.core.JobExecution;
import org.springframework.batch.core.JobExecutionListener;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.myapp.batch.dao.BatchControlDao;
import com.myapp.batch.domain.BatchControl;

@Component("appJobExecutionListener")
public class AppJobExecutionListener implements JobExecutionListener {

    @Autowired
    private BatchControlDao batchControlDao;

    public void beforeJob(JobExecution arg0) {
    }

    public void afterJob(JobExecution jobExecution) {
        Long batchControlId = (Long) jobExecution.getExecutionContext().get(BatchControl.JOB_KEY_BATCH_CONTROL_ID);
        if (jobExecution.getStatus() == BatchStatus.COMPLETED) {
            batchControlDao.saveJobComplete(batchControlId, BatchStatus.COMPLETED);
            System.out.println("Job completed: " + jobExecution.getJobInstance().getJobName());
        } else if (jobExecution.getStatus() == BatchStatus.FAILED) {
            batchControlDao.saveJobComplete(batchControlId, BatchStatus.FAILED);
            System.out.println("Job failed: " + jobExecution.getJobInstance().getJobName() + " "
                    + jobExecution.getFailureExceptions());
        }
    }

}

</pre>
The "itemFailureLoggerListener" can be defined in a similar fashion.

<br />
<pre class="brush: csharp"> 
package com.myapp.batch.listener;

import org.springframework.batch.core.listener.ItemListenerSupport;
import org.springframework.stereotype.Component;

@Component("itemFailureLoggerListener")
public class ItemFailureLoggerListener extends ItemListenerSupport {

  
    public void onReadError(Exception ex) {
        System.out.println("Encountered error on read", ex);
    }

    public void onWriteError(Exception ex, Object item) {
        System.out.println("Encountered error on write", ex);
    }
}

</pre>
The "accountReader" is the ItemReader that reads the relevant account numbers from the accounts table. It basically gets a list of items (i.e. Accounts) to be processed by the processor.

<br />
<pre class="brush: csharp"> 

    &lt;bean id="accountReader" class="org.springframework.batch.item.database.JdbcCursorItemReader"&gt;
        &lt;property name="dataSource" ref="dataSourceMyDs" /&gt;
        &lt;property name="sql"&gt;
            &lt;value&gt;
                &lt;![CDATA[
                select a.account_no, a.account_name, a.debit, a.credit
                from accounts a  
                where a.account_no &gt; ?  and
                      a.account_no &gt;= ? and  
                      a.account_no &lt;= ?         
                order by a.account_no
                ]]&gt;
            &lt;/value&gt;
        &lt;/property&gt;
        &lt;property name="rowMapper" ref="accountRowMapper" /&gt;
        &lt;property name="preparedStatementSetter" ref="accountReaderStatementSetter" /&gt;
    &lt;/bean&gt;

</pre>
The AccountRowMapper is defined as follows to map the results

<br />
<pre class="brush: csharp"> 

package com.myapp.batch.rowmapper;

import java.sql.ResultSet;
import java.sql.SQLException;

import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Component;

import com.myapp.batch..domain.Account;

@Component("accountRowMapper")
public class AccountRowMapper implements RowMapper {
    
    public static final String ACC_NO = "account_no";
    //...
    
    public Account mapRow(ResultSet rs, int rowNum) throws SQLException {
        Account account = new Account();
        account.setAccNo(rs.getInteger(ACC_NO));
        //.....
        return account;
    }

}

</pre>
The where clause arguments can be supplied as shown below by reading from the "jobExecutionContext"

<br />
<pre class="brush: csharp"> 

     &lt;bean id="accountReaderStatementSetter" scope="step" class="org.springframework.batch.core.resource.ListPreparedStatementSetter"&gt;
        &lt;property name="parameters"&gt;
            &lt;list&gt;
                &lt;value&gt;#{jobExecutionContext['lastProcessedAccNo']}&lt;/value&gt;
                &lt;value&gt;#{jobExecutionContext['accFrom']}&lt;/value&gt;
                &lt;value&gt;#{jobExecutionContext['accTo']}&lt;/value&gt;
            &lt;/list&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

 
</pre>
The availableCashProcessor is the ItemProcessor that calculates the available cash balance. You can delegate this work to a number of processor classes as shown below. It loops through each item (i.e Account)

<br />
<pre class="brush: csharp"> 

    &lt;bean id="availableCashProcessor" class="org.springframework.batch.item.support.CompositeItemProcessor"&gt;
        &lt;property name="delegates"&gt;
            &lt;list&gt;
                &lt;bean class="com.myapp.batch.processor.CalculateCashValueProcessor" /&gt;
            &lt;/list&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
 
</pre>
The processor class is shown below


<br />
<pre class="brush: csharp"> 

package com.myapp.batch.processor;

import java.util.ArrayList;
import java.util.List;

import org.springframework.batch.item.ItemProcessor;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;


@Component("availableCashProcessor")
public class CalculateValueProcessor implements ItemProcessor&lt;Account, Account&gt; {

 
    //the account read by the "accountReader" is passed in
    public Account process(Account account) {
        //simple and dirty without using BigDecimal
        account.setAvailableCash(account.getCredit() - account.getDebit());
        return account;
    }

}

</pre>
The "availaavailableCashWriter" is the ItemWriter that writes the results. 

<br />
<pre class="brush: csharp"> 

package com.myapp.batch.writer;

import java.util.List;

import org.springframework.batch.core.StepExecution;
import org.springframework.batch.core.annotation.BeforeStep;
import org.springframework.batch.item.ExecutionContext;
import org.springframework.batch.item.ItemWriter;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

//...

@Component("availableCashWriter")
public class AvailableCashWriter implements ItemWriter&lt;Account&gt; {

    private StepExecution stepExecution;

    @Autowired
    private AccountDao accountDao; //injected via spring confih

    @Autowired
    private ModelAccountPortfolioValueDao modelAccountPortValueDao;

    public void write(List&lt;? extends Account&gt; items) throws Exception {
        for (Account account : items) {
            // Save portfolio value for account
            Account readAcc = accountDao.getAccount(account.getAccNo());
            readAcc.setAvalableCash(account.getAvailableCash());
            accountDao.updateAccount(readAcc);

            // Save to step execution context so that it can be promoted to job execution context
            ExecutionContext stepContext = this.stepExecution.getExecutionContext();
            stepContext.put(BatchControl.JOB_KEY_LAST_PROCESSED_ACC_NO, account.getAccNo());
        }
    }


    @BeforeStep
    public void setStepExecution(StepExecution stepExecution) {
        this.stepExecution = stepExecution;
    }
}

</pre>
Finally, the batchItemListener that updates the lastProcessedAccNo. 

<br />
<pre class="brush: csharp"> 

package com.myapp.batch.listener;

import java.util.List;

import org.springframework.batch.core.StepExecution;
import org.springframework.batch.core.annotation.BeforeStep;
import org.springframework.batch.core.listener.ItemListenerSupport;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.myapp.batch.dao.BatchControlDao;
import com.myapp.batch.domain.BatchControl;

@Component("batchItemListener")
public class ItemBatchListener extends ItemListenerSupport {

    private StepExecution stepExecution;

    @Autowired
    private BatchControlDao batchControlDao;

    public void afterWrite(List items) {
        Long batchId =
                (Long) this.stepExecution.getJobExecution().getExecutionContext().get(
                        BatchControl.JOB_KEY_BATCH_ID);
        String lastProcessedAccNo =
                (String) this.stepExecution.getExecutionContext().get(BatchControl.JOB_KEY_LAST_PROCESSED_ACC_NO);
        batchControlDao.saveLastProcessedAccNo(lastProcessedAccNo, batchId);
    }

    @BeforeStep
    public void saveStepExecution(StepExecution stepExecution) {
        this.stepExecution = stepExecution;
    }
}

</pre>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/spring%20batch">spring batch</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2012/06/batch-processing-in-java-with-spring_19.html" title="permanent link"> 6/20/2012 12:57:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2012/06/batch-processing-in-java-with-spring_19.html#comment-form"location.href=http://java-success.blogspot.com/2012/06/batch-processing-in-java-with-spring_19.html#comment-form;><span style="text-transform:lowercase">8 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=8136745084306874076" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=8136745084306874076&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jun 19, 2012</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="4000775176697976643"></a>
    
         
    


    <h3 class="post-title">
	 
	 Batch processing in Java with Spring batch - part 2
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>This post assumes that you have read the part-1&nbsp;<a href="http://java-success.blogspot.com.au/2012/06/batch-processing-in-java-with-spring.html" target="_blank">spring batch overview questions and answers</a>. The data access objects, datasource configuration, and few other classes are left out for brevity as these were covered on other spring topics.<br />
<br />
<b>Step 1: </b>Define the <b>batch-context.xml </b>with the <i>JobLauncher </i>and the <i>JobRepository</i>. JobLaunchers are responsible for starting a Job with a given job parameters. The spring provided implementation, <i>SimpleJobLauncher</i>, relies on a <i>TaskExecutor </i>to launch the jobs. If no specific TaskExecutor is set then the spring provided default <i>SyncTaskExecutor </i>is used for testing purpose. A <i>JobRepository </i>implementation requires a set of execution Daos to store its information. The <i>MapJobRepositoryFactoryBean </i>is a <i>FactoryBean </i>that automates the creation of a <i>SimpleJobRepository </i>using non-persistent in-memory DAO implementations. This repository is only really intended for use in testing and rapid prototyping. The <i>JobRegistryBeanPostProcessor </i> registers Job beans with a JobRegistry.<br />
<br />
<br />
<!--  INFOLINKS_OFF -->
<pre class="brush: csharp">&lt;!-- define the job repository --&gt;
&lt;bean id="jobRepository" class="org.springframework.batch.core.repository.support.MapJobRepositoryFactoryBean"&gt;
    &lt;property name="transactionManager" ref="transactionManager" /&gt;
&lt;/bean&gt;

&lt;!-- define the launcher and pass the jobRepository as setter injection --&gt;
&lt;bean id="jobLauncher" class="org.springframework.batch.core.launch.support.SimpleJobLauncher"&gt;
    &lt;property name="jobRepository" ref="jobRepository" /&gt;
&lt;/bean&gt;


&lt;bean id="jobRegistry" class="org.springframework.batch.core.configuration.support.MapJobRegistry" /&gt;

&lt;bean id="jobRegistryBeanPostProcessor" class="org.springframework.batch.core.configuration.support.JobRegistryBeanPostProcessor"&gt;
    &lt;property name="jobRegistry" ref="jobRegistry" /&gt;
&lt;/bean&gt;

</pre>
<b>Step 2: </b>Define the steps necessary for the batch job. Firstly, define the batch control step that will update the <b>batch_control </b>table accordingly.

<br />
<pre class="brush: csharp">  
    &lt;!-- Component-Scan automatically detects annotations in the Java classes.  --&gt;
 &lt;context:component-scan base-package="com.myapp.batch" /&gt;

    &lt;batch:step id="batchControlStep"&gt;
        &lt;batch:tasklet&gt;
            &lt;batch:chunk reader="batchControlReader" writer="jobStartBatchControlWriter" commit-interval="1" /&gt;
            &lt;batch:listeners&gt;
                &lt;batch:listener ref="promotionListener" /&gt;
                &lt;batch:listener ref="batchReaderListener" /&gt;
            &lt;/batch:listeners&gt;
        &lt;/batch:tasklet&gt;
    &lt;/batch:step&gt;
    
 
    &lt;bean id="batchControlReader" class="org.springframework.batch.item.database.JdbcCursorItemReader"&gt;
        &lt;property name="dataSource" ref="dataSourceMyDs" /&gt;
        &lt;property name="sql"&gt;
            &lt;util:constant static-field="com.myapp.batch.dao.impl.BatchControlDaoImpl.SELECT_BY_JOB_NAME_SQL" /&gt;
        &lt;/property&gt;
        &lt;property name="rowMapper" ref="batchControlRowMapper" /&gt;
        &lt;property name="preparedStatementSetter" ref="batchControlReaderStatementSetter" /&gt;
    &lt;/bean&gt;

    &lt;bean id="batchControlReaderStatementSetter" scope="step" class="org.springframework.batch.core.resource.ListPreparedStatementSetter"&gt;
        &lt;!-- The parameter that is passed via command line: my_job_run.sh  accountValueUpdateJob1 accountValueUpdateJob1.log --&gt;
  &lt;!-- $JAVA_HOME/bin/java -classpath ${CLASSPATH} ${JOB_CLASS} batch-context.xml availableBalanceJob jobName=accountValueUpdateJob1" --&gt;
  &lt;property name="parameters"&gt;
            &lt;list&gt;
                &lt;value&gt;#{jobParameters['jobName']}&lt;/value&gt;
            &lt;/list&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

 &lt;!-- promotes the values read via static constants from one step to another step via the StepExecutionContext --&gt;
    &lt;bean id="promotionListener" class="org.springframework.batch.core.listener.ExecutionContextPromotionListener"&gt;
        &lt;property name="keys"&gt;
            &lt;list&gt;
                &lt;util:constant static-field="com.myapp.batch.domain.BatchControl.JOB_KEY_LAST_PROCESSED_ACC_NO" /&gt;
                &lt;util:constant static-field="com.myapp.batch.domain.BatchControl.JOB_KEY_BATCH_ID" /&gt;
                &lt;util:constant static-field="com.myapp.batch.domain.BatchControl.ACC_FROM" /&gt;
                &lt;util:constant static-field="com.myapp.batch.domain.BatchControl.ACC_TO" /&gt;
            &lt;/list&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

 &lt;!-- The listener class that has the  afterStep() method to print -- &gt;
    &lt;bean id="batchReaderListener" class="com.myapp.batch.listener.BatchReaderListener" /&gt;
 
</pre>
<b>Step 3:</b> Define the relevant Java classes that are rereferenced in the above configuration file. Capture the batch control meta data as shown below.<br />
<br />
<pre class="brush: csharp">public class BatchControl {

    public static final String JOB_KEY_LAST_PROCESSED_ACC_NO = "lastProcessedAccNo";
    public static final String JOB_KEY_BATCH_ID = "batchId";
    public static final String ACC_FROM = "accFrom";
    public static final String ACC_TO = "accTo";

    public static final String BATCH_USER = "batch";

    private Long jobId;
    private String jobName;
    private DateTime startDateTime;
    private DateTime endDateTime;
    private String status;
    private Integer accFrom;
    private Integer accTo;
    private Integer lastProcessedAccNo;
 
    //getters and setters are omitted
}
</pre>
<br />
The listener class that prints the job status -- "COMPLETED" or "FAILED" after the step execution.  

<br />
<pre class="brush: csharp">package com.myapp.batch.listener;

import org.springframework.batch.core.ExitStatus;
import org.springframework.batch.core.StepExecution;
import org.springframework.batch.core.step.NoWorkFoundStepExecutionListener;

public class BatchReaderListener extends NoWorkFoundStepExecutionListener {

    @Override
    public ExitStatus afterStep(StepExecution stepExecution) {
        ExitStatus exitStatus = super.afterStep(stepExecution);
        if (exitStatus != null &amp;&amp; exitStatus.equals(ExitStatus.FAILED)) {
            System.out.println("Could not load batch control record with job name "
                    + stepExecution.getJobExecution().getJobInstance().getJobParameters().getString("jobName"));
        }
        return exitStatus;
    }
}</pre>
<pre class="brush: csharp">&nbsp;</pre>
The Dao object that reads and updates the batch_control table.<br />
<br />
<pre class="brush: csharp">package com.myapp.batch.dao.impl;

import org.joda.time.DateTime;
import org.springframework.batch.core.BatchStatus;
import org.springframework.jdbc.core.simple.ParameterizedBeanPropertyRowMapper;
import org.springframework.jdbc.core.simple.SimpleJdbcTemplate;
import org.springframework.orm.hibernate3.HibernateTemplate;
import org.springframework.orm.hibernate3.SessionFactoryUtils;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

import com.myapp.batch.dao.BatchControlDao;
import com.myapp.batch.domain.BatchControl;

public class BatchControlDaoImpl extends HibernateDaoSupport implements BatchControlDao {
    
    public static final String SELECT_BY_JOB_NAME_SQL =
            "select job_id, job_name, start_timestamp, end_timestamp, status,"
                    + " account_no_from, account_no_to, last_account_no from batch_control where job_name = ?";
            
    private static final String JOB_START_UPDATE_SQL =
            "update batch_control set start_timestamp = ?, end_timestamp = ?, status = ?, last_account_no=?"
                    + " where batch_id = ?";

    private static final String JOB_COMPLETE_UPDATE_SQL =
            "update batch_control set end_timestamp = ?, status = ? where batch_id = ?";

    private static final String LAST_PROCESSED_ACC_UPDATE_SQL =
            "update batch_control set last_account_no = ? where batch_id = ?";

    private SimpleJdbcTemplate simpleJdbcTemplate;

    public BatchControlDaoImpl(HibernateTemplate hibernateTemplate) {
        setHibernateTemplate(hibernateTemplate);
        this.simpleJdbcTemplate =
                new SimpleJdbcTemplate(SessionFactoryUtils.getDataSource(hibernateTemplate.getSessionFactory()));
    }

    public void init(Long Id, Integer last_account_no) {
        simpleJdbcTemplate.update(JOB_START_UPDATE_SQL, new DateTime().toDate(), null, BatchStatus.STARTED.name(),
                last_account_no, batchId);
    }

    public void saveJobComplete(Long batchId, BatchStatus status) {
        simpleJdbcTemplate.update(JOB_COMPLETE_UPDATE_SQL, new DateTime().toDate(), status.name(), batchId);
    }

    public void saveLastProcessedId(String last_account_no, Long batchId) {
        simpleJdbcTemplate.update(LAST_PROCESSED_ACC_UPDATE_SQL, last_account_no, batchId);
    }

    public BatchControl getBatchControl(String jobName) {
        BatchControl batchControl =
                simpleJdbcTemplate.queryForObject(SELECT_BY_JOB_NAME_SQL, ParameterizedBeanPropertyRowMapper
                        .newInstance(BatchControl.class), jobName);
        return batchControl;
    }

}

</pre>

This will be concluded in part-3. 

<br />
<ul>
<li><a href="http://java-success.blogspot.com.au/2012/06/batch-processing-in-java-with-spring_19.html">Spring batch - part 3 (final part)</a></li>
</ul>
<br />
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/spring%20batch">spring batch</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2012/06/batch-processing-in-java-with-spring_18.html" title="permanent link"> 6/19/2012 03:26:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2012/06/batch-processing-in-java-with-spring_18.html#comment-form"location.href=http://java-success.blogspot.com/2012/06/batch-processing-in-java-with-spring_18.html#comment-form;><span style="text-transform:lowercase">1 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=4000775176697976643" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=4000775176697976643&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jun 12, 2012</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="1483742736894214711"></a>
    
         
    


    <h3 class="post-title">
	 
	 Server side versus client side templating
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>The modern Rich Internet Applications (RIA) use the design concept of "single page web design", where a single rich page makes ajax based service calls to render different sections of a page instead of the traditional approach of loading a new page of each user action.<br />
<br />
The "single page web design" can make use of &nbsp;client side and server side technologies as discussed below. Each approach has its use. It also shows the power of JavaScript.<br />
<b><br /></b><br />
<b>Q.</b> What do you understand by client side and server side templating?<br />
<b>A. </b>The modern rich single page web applications built today harness the power of <b>dynamically typed </b>and interpreted languages like JavaScript for faster prototyping and increased developer productivity and<b> statically typed </b>Java based frameworks for maintainability, robustness, easier refactoring, and scalability. The modern browsers using faster JavaScript engines and efficient minification of JavaScript files have made <b>client side templating a reality</b>.<br />
<br />
<ul>
<li>The server side templates are such as JSPs, <b>Facelets </b>for JSF, Apache Velocity, tiles, Sitemesh, etc.&nbsp;</li>
<li>The client side templating libraries based on JavaScript include <b>dust.js</b>, underscore.js, mustache.js, etc&nbsp;</li>
<li>The client side and server side templates like Google closure.&nbsp;</li>
</ul>
<br />
<div class="separator" style="clear: both; text-align: left;">
<b>&nbsp;Server side templating and data composition&nbsp;</b></div>
<div class="separator" style="clear: both; text-align: left;">
<b><br /></b></div>
<div class="separator" style="clear: both; text-align: left;">
Generates the markup on the server. For example, returns generated HTML code.</div>
<div class="separator" style="clear: both; text-align: left;">
<br /></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-5ZA3G4P7ebA/T6sum0bBkyI/AAAAAAAAAis/HX6Pq7MS-mw/s1600/architecture-html-composition.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="203" src="http://3.bp.blogspot.com/-5ZA3G4P7ebA/T6sum0bBkyI/AAAAAAAAAis/HX6Pq7MS-mw/s320/architecture-html-composition.JPG" width="320" /></a></div>
<div class="separator" style="clear: both; text-align: left;">
<br /></div>
<div class="separator" style="clear: both; text-align: left;">
<br /></div>
<div class="separator" style="clear: both; text-align: left;">
<b>Client&nbsp; side templating and data composition</b></div>
<div class="separator" style="clear: both; text-align: center;">
<br /></div>
Generates the markup on the client. More suited for applications that load more data from different back end service providers via ajax. The services could return data in JSON or XML format &nbsp;and then add the HTML snippets for the new data via the client side templates.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-NX5w8QOGftg/T6surlvyNfI/AAAAAAAAAi0/2hrfwyKA-ec/s1600/architecture-restful-composition.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="203" src="http://3.bp.blogspot.com/-NX5w8QOGftg/T6surlvyNfI/AAAAAAAAAi0/2hrfwyKA-ec/s320/architecture-restful-composition.JPG" width="320" /></a></div>
<br />
<br />
<br />
Javascript templating is a technique to render templates on client-side (i.e. within the browser) with Javascript using a JSON data retrieved via RESTful web service calls. The template is basically HTML markup, sprayed with tags and variables that will insert values from the JSON data or execute a programming logic. For example,<br />
<br />
<b>1. </b>Import jQuery template library<br />
<br />
<br />
<pre class="brush: csharp">&lt;script src="http://code.jquery.com/jquery.min.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;script src="jquery.tmpl.js" type="text/javascript"&gt;&lt;/script&gt;
</pre>
<br />
<b>2.</b> Define JSON data to be used to fill the template values. This can be returned from the server via a RESTFul service call.<br />
<br />
<pre class="brush: csharp">var carsData = [
    { make: "Toyota", model: "Camry" },
    { make: "BMW", model: "3 Series" },
    { make: "Mazda", model: "3" }
];
</pre>
<br />
<b>3.</b> Define your client side <b>template </b>like<br />
<br />
<pre class="brush: csharp">&lt;script id="carsTemplate" type="text/html"&gt;
    &lt;li&gt;&lt;a href="cars/${make}"&gt;${model}&lt;/a&gt;&lt;/li&gt;
&lt;/script&gt;
</pre>
<br />
or the complete HTML code may look like:<br />
<br />
<pre class="brush: csharp">&lt;html lang="en"&gt;
&lt;head&gt;
  ...
  &lt;script src="http://code.jquery.com/jquery.min.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;script src="jquery.tmpl.js" type="text/javascript"&gt;&lt;/script&gt;
  
  &lt;script id="clientTemplate" type="text/html"&gt;
    &lt;li&gt;make: ${make}, model: ${model}&lt;/li&gt;
  &lt;/script&gt;
 
&lt;/head&gt;
 
&lt;body&gt;
 
&lt;ul&gt;&lt;/ul&gt;
 
&lt;/body&gt;
&lt;/html&gt;
</pre>
<br />
<b>4.</b> Invoking the template enginge (e.g jQuery) plugin to render the template with data<br />
<br />
<pre class="brush: csharp">$("#carsTemplate").tmpl(carsData).appendTo( "ul" );</pre>
<br />
The &nbsp;&lt;li&gt; tags will be appended to the &lt;ul&gt; tag with the retrieved JSON data values.<br />
<b><br /></b><br />
<b>Q.</b> What are the pros and cons of server side versus client side templating?<br />
<b>A.&nbsp;</b><br />
<br />
<b>&nbsp;Server Side Templating<br /><br />Pros: </b><br />
<ul>
<li>More search engine friendly.</li>
<li>Entire response message can be cached.</li>
<li>Can work without JavaScript</li>
</ul>
<b><br />Cons:</b><br />
<ul>
<li>Harder to mix and match different server side technologies. For example, retrieve data from both Java and Ruby based services</li>
<li>Harder to send content for multiple devices. E.g. browser, mobile devices, etc.</li>
</ul>
<b><br /><br />Client Side Templating<br /><br /><br />Pros:</b><br />
<ul>
<li>&nbsp;Faster development and prototyping</li>
<li>&nbsp;Serves JSON data to multiple devices.</li>
<li>&nbsp;The responses are smaller as JSON data is less verbose.</li>
<li>&nbsp;Templates and JSON data can be cached.</li>
<li>&nbsp;Can work with multiple server side technologies like .Net, JEE, Ruby, etc</li>
</ul>
<b><br /><br />Cons:</b><br />
<ul>
<li><b>&nbsp;</b>Less search engine friendly</li>
<li>&nbsp;Older browsers may not work properly</li>
<li>&nbsp;Cross browser compatbility testing is required</li>
</ul>


<br/>
<br/>

<script type="text/javascript">
<!--
google_ad_client = "ca-pub-3764234023451771";
/* Leader board image and text */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//-->
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>

<br/>
<br/><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Java%20EE">Java EE</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2012/06/server-side-versus-client-side.html" title="permanent link"> 6/12/2012 04:01:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2012/06/server-side-versus-client-side.html#comment-form"location.href=http://java-success.blogspot.com/2012/06/server-side-versus-client-side.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2012/06/server-side-versus-client-side.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=1483742736894214711" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=1483742736894214711&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jun 5, 2012</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="7975232438657924007"></a>
    
         
    


    <h3 class="post-title">
	 
	 Batch processing in Java with Spring batch - part 1
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><table>
<tbody>
<tr>

<td width="50%">
<br/>

Make sure that you do this beginner tutorial first

<br/>
<br/>
<a href="http://java-success.blogspot.com.au/2013/12/beginner-spring-batch-reader-and-writer.html">Beginner Spring batch tutorial with simple reader and writer</a>
<br/>
<br/>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* LHS - Medium Rectangle */
google_ad_slot = "1728948974";
google_ad_width = 336;
google_ad_height = 280;
google_ad_channel ="6353655268";
google_page_url = "http://java-success.blogspot.com.au/2011/09/java-multi-threading-interview.html";
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
</td>


<td><b>Q.</b> What do you understand by batch processing and why do you need them?<br />
<b>A. </b>The idea behind batch processing is to allow a program to run without the need for human intervention, usually scheduled to run periodically at a certain time or every x minutes.The batch process solves <br />
<ul>
<li>execution that takes a lengthy amount of time (e.g. consolidated reports, re-balancing the financial portfolio, etc)</li>
<li>processing a large input set of data via ETL (Extract Transform and Load) operation. </li>
<li>automating some business process that doesnt necessarily need to be triggered by a human.</li>
</ul>
In general, a batch process involve<br />
<br />
<ul>
<li>Reading data from data sources like databases, files, etc</li>
<li>Processing the data through a number of steps. This can involve transforming the data, performing calculation, generating length reports, etc.</li>
<li>Finally, writing the processed data to databases or file systems.</li>
</ul>
</td>
</tr>
</tbody></table>

<br />
<b>Q.</b> What libraries do you need to get started with spring batch<br />
<b>A.</b> The <b>pom.xml</b> file will be the start. Fill in the appropriate versions and the additional dependencies required.<br />
<br />
<pre class="brush: csharp">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.myapp&lt;/groupId&gt;
  &lt;artifactId&gt;mybatchapp&lt;/artifactId&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;name&gt;mybatchapp&lt;/name&gt;
  &lt;url&gt;http://maven.apache.org&lt;/url&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;
        &lt;artifactId&gt;spring-batch-core&lt;/artifactId&gt;
        &lt;version&gt;....&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;commons-lang&lt;/groupId&gt;
        &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;
        &lt;version&gt;....&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring&lt;/artifactId&gt;
        &lt;version&gt;...&lt;/version&gt;
    &lt;/dependency&gt;
 
 ...other dependencies like hibernate
 
  &lt;/dependencies&gt;
  ...
&lt;/project&gt;&nbsp;</pre>
<br />
<b>Q.</b> What are the key terms of Spring batch?
<b>&nbsp;</b><br />
<b>A.</b><br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-tE0stMfGu8U/T7XAEBZmgpI/AAAAAAAAAlI/fq7Om0npMAc/s1600/spring-batch-overview.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="484" src="http://1.bp.blogspot.com/-tE0stMfGu8U/T7XAEBZmgpI/AAAAAAAAAlI/fq7Om0npMAc/s640/spring-batch-overview.JPG" width="640" /></a></div>
<br />
<ul>
<li><b>JobLauncher:</b> It helps you to launch a job. It uses a JobRepository to obtain a valid JobExecution.</li>
<li><b>JobRepository: </b>A persistent store for all the job meta-data information. Stores JobInstances, JobExecutions, and StepExecutions information to a database or a file system. The repository is required because a job could be a rerun of a previously failed job.&nbsp;</li>
<li><b>Job: </b>Represents a job. For example, an portfolio processing job that calculates the portfolio value.

<b>JobInstance: </b>A running instance of a job. If a job runs every week night, then there will 5 instances of that job in a week.&nbsp;</li>
<li><b>JobParameters: </b>Parameters that are used by the JobInstance. For example, the portfolio processing job requires the list of account numbers as the input parameters. The job parameters are passed as command line arguments. </li>
<li><b>JobExecution: </b>Every attempt to run a JobInstance results in a JobExecution. If a job fails then it will be rerun and we end up having a single JobInstance with 2 JobExecutions (1 failed execution and 1 successful execution).&nbsp;</li>
<li><b>Step: </b>Each job is made up of one or more steps.&nbsp;</li>
<li><b>StepExecution:  </b>Similar to JobExecution, there are StepExecutions. This represents an attempt to run a Step in a Job.
&nbsp;
</li>
</ul>
<br />
<b>Q. </b>Can you describe the key steps involved in a typical batch job scenario you had worked on?<br />
<b>A</b>.

A simplified batch process scenario is explained below.<br />
<br />
The scenario is basically a batch job that runs overnight to go through all the accounts from the accounts table and calculates the available_cash by subtracting debit from the credit.<br />
<br />
<b>Step 1: </b>Define a batch control table that keeps metdata about the batch job. The example below shows a <b>batch_control </b>table that process accounts in chunks. The account numbers 000 - 999 ara processed by a job and account_no 1000 - 1999 by another job. This table also holds information about when the job started, when the job finished, status (i.e. COMPLETED or FAILED), last processed account_no, etc.<br />
<br />
<table border="1">
<tbody>
<tr>
<td><b>job_id</b></td>
<td><b>job_name</b></td>
<td><b>start_timestamp</b></td>
<td><b>end_timestamp</b></td>
<td><b>status</b></td>
<td><b>account_
no_from </b></td>
<td><b>account_
no_to</b></td>
<td><b>last_
account_no</b></td>
</tr>
<tr>
<td>1</td>
<td>accountValueUpdateJob1</td>
<td>21/04/2012 3:49:11.053 AM</td>
<td>21/04/2012 3:57:55.480 AM</td>
<td>COMPLETED</td>
<td>000 </td>
<td>999</td>
<td>845</td>
</tr>
<tr>
<td>2</td>
<td>accountValueUpdateJob2</td>
<td>21/04/2012 3:49:11.053 AM</td>
<td>21/04/2012 3:57:55.480 AM</td>
<td>FAILED</td>
<td>1000 </td>
<td>1999</td>
<td>1200</td>
</tr>
</tbody></table>
<br />
<b>Step 2:</b> To keep it simple, a single data table is used. You need to define a <b>job </b>and its <b>step</b>s. A job can have more than one steps. Each step can have a reader, processor, and a writer. An <i>ItemReader </i>will read data from the <b>accounts </b>table shown below for account numbers between account_from and account_to read from the <b>batch_control </b>table shown above. An <i>ItemProcessor </i>will calculate the <b>availbale_cash</b> and an <i>ItemWriter </i>will update the available_cash on the accounts table.<br />
<br />
<table border="1">


<tbody>
<tr>
<td><b>account_no</b></td>
<td><b>account_name</b></td>
<td><b>debit</b></td>
<td><b>credit</b></td>
<td><b>available_cash</b></td>
</tr>
<tr>
<td>001</td>
<td>John Smith</td>
<td>200.00</td>
<td>4000.0</td>
<td>0.0</td>
</tr>
<tr>
<td>1199</td>
<td>Peter Smith</td>
<td>55000.50</td>
<td>787.25</td>
<td>0.0</td>
</tr>
</tbody></table>
<br />
<b>Step 3: </b>Once the batch job is completed, the batch_contol table will be updated accordingly.<br />
<br />
<b>Step 4</b>: Listeners can be used to process errors (e.g. onProcessError(....), onReadError(....), etc) and other pre and post item events like beforeRead(...), afterRead(...), etc. The spring-batch framework make use of the configuration xml file, for example batch-context.xml and the Java classes annotated with @Component to wire up the components and implement the logic.<br />
<br />
<b>Step 5:</b> The batch job can be executed via a shell or batch script that invokes the spring-batch framework as shown below. The CommandLineJobRunner is the Spring class that initiates the job by wiring up the relevant components, listeners, daos, etc via the configuration file batch-context.xml. The job parameter that is passed is "accountValueUpdateJob1", which is used to retrieve the relevant job metatdata from the job control table.<br />
<br />
<pre class="brush: csharp">my_job_run.sh  accountValueUpdateJob1 accountValueUpdateJob1.log
   $0                 $1                    $2
</pre>
<br />
The my_job_run.sh looks something like

<br />
<pre class="brush: csharp">...
JOB_CLASS=org.springframework.batch.core.launch.support.CommandLineJobRunner
APPCONTEXT=batch-context.xml
SPRING_JOB=availableBalanceJob
CLASSPATH=$JAVA_HOME/bin:....................... 
JOB_TO_RUN=$1
...

# the jobParameter is jobName. It is passed via job script argument &lt;jobNameToRun&gt;.
$JAVA_HOME/bin/java -classpath ${CLASSPATH} ${JOB_CLASS} ${APPCONTEXT} ${SPRING_JOB} jobName=${JOB_TO_RUN}"

</pre>
<b>Step 6: </b>The shell script (e.g.<b> my_job_run.sh</b>) or batch file will be invoked by a job scheduler like quartz or<br />
Unix cron job  at a particular time without any human intervention.<br />
<br />
This is basically the big picture. The wiring up of spring-batch will be explained in a different post.<br />
<br />
<br />
<ul>
<li>
<a href="http://java-success.blogspot.com.au/2013/12/beginner-spring-batch-reader-and-writer.html">Beginner Spring batch tutorial with simple reader and writer</a></li>
<li><a href="http://java-success.blogspot.com.au/2012/06/batch-processing-in-java-with-spring_18.html" target="_blank">Spring batch part -2 - wiring up the components</a></li>
<li><a href="http://java-success.blogspot.com.au/2012/06/batch-processing-in-java-with-spring_19.html">Spring batch part 3 -- wiring reader, processor, and writer</a></li>
<li><a href="http://java-success.blogspot.com.au/2012/12/spring-batch-advanced-tutorial-writing.html">Spring batch advanced tutorial -- writing your own reader</a></li>
<li><a href="http://java-success.blogspot.com.au/2013/07/spring-batch-code-snippets.html">Spring batch code snippets</a></li>
</ul>
<br />
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/spring%20batch">spring batch</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2012/06/batch-processing-in-java-with-spring.html" title="permanent link"> 6/05/2012 07:00:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2012/06/batch-processing-in-java-with-spring.html#comment-form"location.href=http://java-success.blogspot.com/2012/06/batch-processing-in-java-with-spring.html#comment-form;><span style="text-transform:lowercase">5 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=7975232438657924007" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=7975232438657924007&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
   

</div></div>
<!-- End #main -->







<!-- Begin #sidebar -->
<div id="sidebar"><div id="sidebar2">

  
  
  <h2 class="sidebar-title">Previous Posts</h2>
    <ul id="recently">
    
        <li><a href="http://java-success.blogspot.in/2014/11/are-you-java-beginner-why-good-java.html">Are you a Java beginner? Why good Java developers ...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/11/java-exception-handling-beginner.html">Java exception handling beginner mistakes and best...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/11/unix-interview-questions-and-answers.html">Unix Interview Questions and Answers for Java deve...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/debugging-and-working-like-pro-with.html">Debugging and working  like a pro with a Java appl...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/yammer-metrics-to-monitor-restful-web_22.html">Yammer metrics to monitor RESTful web services and...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/when-to-use-which-java-collection-or.html">When to use which Java collection or data structur...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2011/09/how-to-prepare-for-javajee-job.html">How to prepare or train for Java and JEE Job Inter...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/yammer-metrics-to-monitor-restful-web.html">Yammer metrics to monitor RESTful web services wit...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/09/monitoring-and-gathering-statistics.html">Monitoring and gathering statistics with JMX based...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/08/what-are-different-ways-java-thread.html">What are the different ways a Java thread gets blo...</a></li>
     
  </ul>
  
  
  
  <h2 class="sidebar-title">Archives</h2>

    <ul class="archive-list">
   	  
    	<li><a href="http://java-success.blogspot.in/2006_10_01_archive.html">October 2006</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2006_11_01_archive.html">November 2006</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_05_01_archive.html">May 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_10_01_archive.html">October 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_12_01_archive.html">December 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2008_08_01_archive.html">August 2008</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_02_01_archive.html">February 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_10_01_archive.html">October 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_11_01_archive.html">November 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_12_01_archive.html">December 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_01_01_archive.html">January 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_07_01_archive.html">July 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_09_01_archive.html">September 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_10_01_archive.html">October 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_11_01_archive.html">November 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_12_01_archive.html">December 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_01_01_archive.html">January 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_02_01_archive.html">February 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_03_01_archive.html">March 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_04_01_archive.html">April 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_05_01_archive.html">May 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_06_01_archive.html">June 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_07_01_archive.html">July 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_08_01_archive.html">August 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_09_01_archive.html">September 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_10_01_archive.html">October 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_11_01_archive.html">November 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_12_01_archive.html">December 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_01_01_archive.html">January 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_02_01_archive.html">February 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_03_01_archive.html">March 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_04_01_archive.html">April 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_05_01_archive.html">May 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_06_01_archive.html">June 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_07_01_archive.html">July 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_08_01_archive.html">August 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_09_01_archive.html">September 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_10_01_archive.html">October 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_11_01_archive.html">November 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_12_01_archive.html">December 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_01_01_archive.html">January 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_02_01_archive.html">February 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_03_01_archive.html">March 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_04_01_archive.html">April 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_05_01_archive.html">May 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_06_01_archive.html">June 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_07_01_archive.html">July 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_08_01_archive.html">August 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_09_01_archive.html">September 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_10_01_archive.html">October 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_11_01_archive.html">November 2014</a></li>
	  

  </ul>
  
  
  
  <!-- Begin #profile-container -->
  
    <div id="profile-container"><h2 class="sidebar-title">About Me</h2>
<dl class="profile-datablock"><dt class="profile-img"><a href="https://plus.google.com/109240621969095737337"><img src="//lh3.googleusercontent.com/-XMLxx0v_R7A/AAAAAAAAAAI/AAAAAAAACxk/8BeHFmsEuy8/s80-c/photo.jpg" width="80" height="80" alt="My Photo"></a></dt>
<dd class="profile-data"><strong>Name:</strong> <a rel="author" href="https://plus.google.com/109240621969095737337"> Arulkumaran Kumaraswamipillai </a></dd>
</dl>
<p class="profile-textblock">Java freelancer from Australia. As a contractor, attended 100+ job interviews and received multiple job offers. Authored Java career books that sold over 30,000 copies.<br><br><a href="http://www.java-success.com" rel="nofollow" target="_blank">www.java-success.com</a> for 500+ Java/JEE job interview questions and answers and tutorials.<br></p>
<p class="profile-link"><a rel="author" href="https://plus.google.com/109240621969095737337">View my complete profile</a></p></div>
  
  <!-- End #profile -->

  
  <p id="powered-by"><a href="http://www.blogger.com"><img src="http://buttons.blogger.com/bloggerbutton1.gif" alt="Powered by Blogger" /></a></p>
  <p id="blogfeeds">Subscribe to<br />Posts [<a target="_blank" href="http://java-success.blogspot.com/feeds/posts/default" type="application/atom+xml">Atom</a>]</p>

  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  
   
  <!--
  <p>This is a paragraph of text that could go in the sidebar.</p>
  -->
  
  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  



</div></div>
<!-- End #sidebar -->




<!-- Begin #footer -->
<div id="footer"><hr />

  <p><!-- This is an optional footer. If you want text here, place it inside these tags, and remove this comment. -->&nbsp;</p>

  </div>
<!-- End #footer -->




</div>
<!-- End #content -->






</div></div></div></div>
<!-- End wraps -->

</body>
</html>