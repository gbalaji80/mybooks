<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
  <title>Java-Success Blog: February 2013</title>

  <link href='http://www.java-success.com' rel='canonical'/>



  <script type="text/javascript">(function() { (function(){function c(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(l){}};this.tick("start",null,a)}var a,e;window.performance&&(e=(a=window.performance.timing)&&a.responseStart);var h=0<e?new c(e):new c;window.jstiming={Timer:c,load:h};if(a){var b=a.navigationStart;0<b&&e>=b&&(window.jstiming.srt=e-b)}if(a){var d=window.jstiming.load;0<b&&e>=b&&(d.tick("_wtsrt",void 0,b),d.tick("wtsrt_","_wtsrt",
e),d.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),d&&0<b&&(d.tick("_tbnd",void 0,window.chrome.csi().startE),d.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,d&&0<b&&(d.tick("_tbnd",void 0,window.external.startE),d.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(k){}})();window.tickAboveFold=function(c){var a=0;if(c.offsetParent){do a+=c.offsetTop;while(c=c.offsetParent)}c=a;750>=c&&window.jstiming.load.tick("aft")};var f=!1;function g(){f||(f=!0,window.jstiming.load.tick("firstScrollTime"))}window.addEventListener?window.addEventListener("scroll",g,!1):window.attachEvent("onscroll",g);
 })();</script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Blogger" />
<link rel="icon" type="image/vnd.microsoft.icon" href="https://www.blogger.com/favicon.ico"/>
<link rel="alternate" type="application/atom+xml" title="Java-Success Blog - Atom" href="http://java-success.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Java-Success Blog - RSS" href="http://java-success.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Java-Success Blog - Atom" href="https://www.blogger.com/feeds/35897879/posts/default" />
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/static/v1/v-css/50269083-blog_controls.css"/>
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/dyn-css/authorization.css?targetBlogID=35897879&zx=32ffd7df-5810-469f-a666-048e5011b3eb"/>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/979395223-backlink.js"></script>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/4080670514-backlink_control.js"></script>
<script type="text/javascript">var BL_backlinkURL = "https://www.blogger.com/dyn-js/backlink_count.js";var BL_blogId = "35897879";</script>


  <style type="text/css">
/*
-----------------------------------------------
Blogger Template Style
Name:     Harbor
Designer: Douglas Bowman
URL:      www.stopdesign.com
Date:     24 Feb 2004
----------------------------------------------- */


body {
  background:#fff url("http://www.blogblog.com/harbor/rocks.jpg") no-repeat right bottom;
  background-attachment:fixed;
  margin:0;
  padding:0;
  font:x-small Georgia,Serif;
  color:#333;
  font-size/* */:/**/small;
  font-size: /**/small;
  }
/* Commented Backslash Hack hides rule from IE5-Mac \*/
  body {background-attachment:scroll;}
  /* End IE5-Mac hack */
a:link {
  color:#36a;
  text-decoration:none;
  }
a:visited {
  color:#764;
  text-decoration:none;
  }
a:hover {
  color:#933;
  text-decoration:underline;
  }
a img {
  border-width:0;
  }


/* Page Structure
----------------------------------------------- */
#wrap {
  background:url("http://www.blogblog.com/harbor/sky.jpg") repeat-x left top;
  min-width:740px;
  margin:0;
  padding:0;
  text-align:left;
  }
#wrap2 {
  background:url("http://www.blogblog.com/harbor/lighthouse.jpg") no-repeat left top;
  }
#wrap3 {
  background:url("http://www.blogblog.com/harbor/cloud.jpg") no-repeat 100% 75px;
  }
#wrap4 {
  background:url("http://www.blogblog.com/harbor/center_cloud.jpg") no-repeat 50% 0;
  padding:15px;
  width:100%;
  width/* */:/**/auto;
  width: /**/auto;
  }
@media all {
  #content {
    max-width:890px;
    padding:0 30px 50px;
    width:100%;
    width/* */:/**/auto;
    width: /**/auto;
    }
  html>body #content {
    border:3px double #fff;
    }
  #main {
    width:64%;
    float:right;
    }
  #main2 {
    margin:0;
    padding:0;
    }
  #sidebar {
    width:32%;
    float:left;
    }
  #sidebar2 {
    margin:0;
    padding:170px 0 20px;
    }
  }
@media handheld {
  #content {
    width:90%;
    }
  #main {
    width:100%;
    float:none;
    }
  #sidebar {
    width:100%;
    float:none;
    }
  }

/* Header
----------------------------------------------- */
@media all {
  #header {
    padding:15px 0 10px 110px;
    }
  }
@media handheld {
  #header {
    width:100%;
    padding:15px 0 10px 0;
    }
  }
#blog-title {
  margin:0 0 .25em;
  font-size:270%;
  font-weight:normal;
  color:#678;
  }
#blog-title a {
  color:#678;
  text-decoration:none;
  }
#description {
  margin:0;
  max-width:700px;
  font-size:75%;
  line-height:1.8em;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#789;
  }


/* Headings
----------------------------------------------- */
h2 {
  margin:1.5em 0 .75em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }


/* Posts
----------------------------------------------- */
.date-header {
  margin:2em 0 .5em;
  }
.post {
  margin:.5em 0 1.5em;
  line-height:1.6em;
  }
.post-title {
  margin:.25em 0 0;
  padding:0 0 4px;
  font-size:140%;
  font-weight:normal;
  line-height:1.4em;
  }
.post-title a, .post-title strong {
  background:url("http://www.blogblog.com/harbor/icon_lighthouse.gif") no-repeat 0 .15em;
  display:block;
  padding-left:20px;
  text-decoration:none;
  color:#368;
  font-weight:normal;
  }
.post-title strong {
  background-image:url("http://www.blogblog.com/harbor/icon_lighthouse2.gif");
  color:#000;
  }
.post-title a:hover {
  color:#933;
  }
.post-body {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding-top:12px;
  }
.post p {
  margin:0 0 .75em;
  }
p.post-footer {
  color:#999;
  }
.post-footer em, .comment-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.post-footer em {
  font-style:normal;
  color:#666;
  margin-right:.4em;
  }
.comment-link strong {
  font-size:130%;
  }
.comment-link {
  margin-left:.4em;
  }
.post img {
  padding:4px;
  border:1px solid #cde;
  }


/* Comments
----------------------------------------------- */
#comments {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding:15px 0 0;
  }
#comments h4 {
  margin:1em 0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }
#comments h4 strong {
  font-size:130%;
  }
#comments-block {
  margin:1em 0 1.5em;
  line-height:1.4em;
  }
#comments-block dt {
  margin:.5em 0;
  }
#comments-block dd {
  margin:.25em 20px 0;
  }
#comments-block dd.comment-timestamp {
  margin:-.25em 20px 1.5em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
#comments-block dd p {
  margin:0 0 .75em;
  }
.deleted-comment {
  font-style:italic;
  color:gray;
  }


/* Sidebar Content
----------------------------------------------- */
#sidebar ul {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 15px;
  padding:0 0 15px;
  list-style:none;
  }
#sidebar li {
  margin:0;
  padding:0 0 .25em 15px;
  text-indent:-15px;
  line-height:1.5em;
  }
#sidebar p {
  color:#666;
  line-height:1.5em;
  }


/* Profile
----------------------------------------------- */
#profile-container {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 2em;
  padding:0 0 15px;
  }
.profile-datablock {
  margin:.5em 0 .5em;
  }
.profile-img {
  display:inline;
  }
.profile-img img {
  float:left;
  padding:4px;
  border:1px solid #cde;
  margin:0 8px 3px 0;
  }
.profile-data {
  margin:0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.profile-data strong {
  display:none;
  }
.profile-textblock {
  margin:0 0 .5em;
  }
.profile-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Footer
----------------------------------------------- */
#footer {
  clear:both;
  padding:15px 30px 0 50px;
  }
#footer hr {
  display:none;
  }
#footer p {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  margin:0;
  padding-top:15px;
  font:78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Feeds
----------------------------------------------- */
#blogfeeds {
  }
#postfeeds {
  }
  </style>
<!-- --><style type="text/css">@import url(https://www.blogger.com/static/v1/v-css/navbar/3334278262-classic.css);
div.b-mobile {display:none;}
</style>

</head>

<body><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d35897879\x26blogName\x3dJava-Success+Blog\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dBLUE\x26layoutType\x3dCLASSIC\x26searchRoot\x3dhttp://java-success.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://java-success.blogspot.com/\x26vt\x3d2978101103701820782',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script>

<!-- Begin wraps -->

<div id="wrap"><div id="wrap2"><div id="wrap3"><div id="wrap4">


<!-- Begin #content -->
<div id="content">


<div id="header">

  <h1 id="blog-title">
    
	Java-Success Blog
	
  </h1>

  <p id="description">Java/JEE blog containing interview questions and answers and tutorials</p>

</div>


<!-- Begin #main -->
<div id="main"><div id="main2">

<div class='adsense' style='text-align:center; padding: 0px 3px 0.5em 3px;'>
<script type="text/javascript"><!--
google_ad_client="pub-3764234023451771";
google_ad_host="pub-1556223355139109";
google_ad_width=468;
google_ad_height=60;
google_ad_format="468x60_as";
google_ad_type="text";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="333333";
google_color_url="009900";
google_color_text="993333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



</div>

<!-- Search Google -->
<center>
<form method="get" action="http://www.google.com/custom" target="_top">
<table bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<label for="sbi" style="display: none">Enter your search terms</label>
<input type="text" name="q" size="31" maxlength="255" value="" id="sbi"></input>
<label for="sbb" style="display: none">Submit search form</label>
<input type="submit" name="sa" value="Search" id="sbb"></input>
<input type="hidden" name="client" value="pub-3764234023451771"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
</center>
<!-- Search Google -->









<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 27, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="8201441847275039126"></a>
    
         
    


    <h3 class="post-title">
	 
	 JavaScript Coding Questions and Answers
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>

<br />
<br />
<b>Q.</b> Can you write JavaScript Utils functions for the given scenarios?
<br />
<br />
<b>Scenario 1: </b>Generate random numbers to break cache in restful service calls? For example, the random numbers can be added as a query parameter to break cache.
<br />
<br />
<!-- INFOLINK_OFF -->


<br />
<pre class="brush: csharp">function Utils() {

    this.cacheBreaker = function () {
            return ((new Date()).getTime() + '').substr(2,8);   // A string that is different every second
    };
}
</pre>
<br />
<br />
<b>Scenario 2:</b> Convert Date format from  "YYYYMMDD" to  "DD/MM/YYYY".  The following examples use regular expressions
<br />
<br />
<pre class="brush: csharp">function Utils() {

    //For example, from JSON data format YYYYMMDD to GUI display format DD/MM/YYYY. 
    this.dateConvertRestToUser = function (dateInput) {
        var m = dateInput.match(/^([1-9][0-9]{3})([0-9]{2})([0-9]{2})$/);
        if (m) {
            return m[3] + '/' + m[2] + '/' + m[1];
        }
      return null;
    };
 
 //For example, from GUI display format DD/MM/YYYY to JSON data format YYYYMMDD
 this.dateConvertUserToRest = function (dateInput) {
        var m = dateInput.match(/^ *([0-3]?[0-9])\/([0-1]?[0-9])\/([1-2][0-9][0-9][0-9]) *$/);
        if (m) {
            var day = m[1];
            var month = m[2];
            var year = m[3];

            if (day.length == 1) {
                day = '0' + day;
            }
            if (month.length == 1) {
                month = '0' + month;
            }
            return year + month + day;
        }
        return null;
    };
}

</pre>
<br />
<br />
<b>Scenario 3:</b> Get the attribute value for a given HTML element and attribute.
<br />
<br />
<pre class="brush: csharp">function Utils() {

    this.getAttrString = function (attr, element) {
         var attrValue = element.attr(attr);
         if (attrValue &amp;&amp; attrValue.length &gt; 0) {
            return attrValue;
         }
        return null;
    };
}
</pre>
<br />
<br />
<b>Scenario 4:</b> Extract HTML value form a given tag.
<br />
<br />
<pre class="brush: csharp">function Utils() {

    this.extractHTMLValue = function (html, tag) {
        var htmlValue = "";

        if (tag != null &amp;&amp; html != null) {
            var beginTag = "&lt;" + tag.toUpperCase() + "&gt;";
            var endTag = "&lt;/" + tag.toUpperCase() + "&gt;";

            html = html.toUpperCase();

            var beginIndex = html.indexOf(beginTag);
            var endIndex = html.indexOf(endTag);

           if (beginIndex &gt; -1 &amp;&amp; endIndex &gt; -1 &amp;&amp; endIndex &gt; beginIndex) {
                htmlValue = html.substring(beginIndex + beginTag.length, endIndex);
            }
        }

        return htmlValue;
    };
 
}

</pre>
<br />
<br />
Scenario 5: Logging from your JavaScriot at different log levels like debug, info, warn, and error.
<br />
<br />
<pre class="brush: csharp">function PortalLog(logLevel) {
     
        if (typeof console != 'object' || (typeof console.log != 'function' &amp;&amp; typeof console.log != 'object')) {
            logLevel = 4;
        }

        function evalLog(type, args) {
            var evalLog = '';
            for (var i = 0; i &lt; args.length; i++) {
                if (i &gt; 0) {
                    evalLog += ',';
                }
                evalLog += 'args[' + i + ']';
            }
            return eval('console.' + type + '(' + evalLog + ');');
        }

        if (logLevel &lt;= 0) {
            this.log = function () {
                return evalLog('log', arguments);
            }
            this.debug = this.log;
        } else {
            this.log = function () {};
            this.debug = function () {};
        }

        if (logLevel &lt;= 1) {
            this.info = function () {
                return evalLog('info', arguments);
            }
        } else {
            this.info = function () {};
        }

        if (logLevel &lt;= 2) {
            this.warn = function () {
                return evalLog('warn', arguments);
            }
        } else {
            this.warn = function () {};
        }

        if (logLevel &lt;= 3) {
            this.error = function () {
                return evalLog('error', arguments);
            }
        } else {
            this.error = function () {};
        }

}

</pre>
<br />
<br />
<b>Q.</b> What’s the difference between these two statements?<br />
<br />
<pre class="brush: csharp">var x = 3;

x = 3;
</pre>
<br />
<br />
<b>A.</b> The first statement puts the variable in the scope of whatever function it was defined. The second statement places the variable in global scope. Global scope can potentially cause collision with other variables with the same name. Therefore, the keyword var must be used when defining variables, and an anonymous function should be used as a closure if needed, encapsulating multiple functions which can share access to the same set of variables. That makes sure the variables stay sandboxed, accessible only by those functions which need them.

<br />
<br />
<b>Q. </b>What is the difference between the following 2 statements?
<br />
<br />
<pre class="brush: csharp">!!(obj1 &amp;&amp; obj2);

(obj1 &amp;&amp; obj2);

</pre>
<br />
<br />
<b>A</b>. The first statement returns a “real” boolean value, because you first negate what is inside the parenthesis, but then immediately negate it again. So, this is like saying something is “not not” truth-a, making it true. The second example simply checks for the existence of the obj1 and obj2, but might not necessarily return a “real” boolean value, instead returning something that is either truth-a or false-a. This can be problematic, because false-a can be the number 0, or an empty string, etc. Simple existence can be truth-a. A “real” boolean will only be true or false.<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/JavaScript">JavaScript</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/02/javascript-coding-questions-and-answers.html" title="permanent link"> 2/27/2013 10:12:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/02/javascript-coding-questions-and-answers.html#comment-form"location.href=http://java-success.blogspot.com/2013/02/javascript-coding-questions-and-answers.html#comment-form;><span style="text-transform:lowercase">1 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/02/javascript-coding-questions-and-answers.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=8201441847275039126" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=8201441847275039126&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 22, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="3663256734885885545"></a>
    
         
    


    <h3 class="post-title">
	 
	 Handling Concurrent modifications in Java
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>

<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>

<br/>
<br/>


There are scenarios where you need to deal with concurrent modifications in Java. Here are 2 scenarios that I can currently think of.<br />
<br />
<b>Scenario 1</b>: Looping through a list of items and removing an item in the list could lead to "<b>ConcurrentModificationException</b>". Here is an example.<br />
<br />
<b>Code that throws an Exception:</b><br />
<br />
<br />
<pre class="brush: csharp"> private void removeDetailSummaryRecordsWithAllZeroAmounts(CashForecastSummaryVO cfVo)
    {
        List&lt;cashforecastsummaryaccountvo&gt; accounts = cfVo.getAccounts();
        for (CashForecastSummaryAccountVO cfAcctVO : accounts)
        {
            List&lt;cashforecastsummaryrecordvo&gt; summaryRecords = cfAcctVO.getSummaryRecords();
          
            for (CashForecastSummaryRecordVO recordVO:summaryRecords)
            {
                if (recordVO.getRecordtype() == RecordType.DETAILS)
                {
                    List&lt;bigdecimal&gt; amounts = recordVO.getAmounts();
                    boolean foundNonZero = false;
                    for (BigDecimal amount : amounts)
                    {
                        if (BigDecimal.ZERO.compareTo(amount) != 0)
                        {
                            foundNonZero = true;
                        }
                    }
                    
                    if (!foundNonZero)
                    {
                        summaryRecords.remove(recordVO); // throws aoncurrentModificationException
                    }
                }
            }
        }
    }
</pre>
<br />
<br />
<b>Code that fixes the above issue: </b>Using an <b>iterator </b>and remove from the iterator to prevent the exception.<b><br /></b><br />
<br />
<pre class="brush: csharp"> private void removeDetailSummaryRecordsWithAllZeroAmounts(CashForecastSummaryVO cfVo)
    {
        List&lt;cashforecastsummaryaccountvo&gt; accounts = cfVo.getAccounts();
        for (CashForecastSummaryAccountVO cfAcctVO : accounts)
        {
            List&lt;cashforecastsummaryrecordvo&gt; summaryRecords = cfAcctVO.getSummaryRecords();
            Iterator&lt;cashforecastsummaryrecordvo&gt; it = summaryRecords.iterator();  // get the iterator
            CashForecastSummaryRecordVO recordVO = null;
            while (it.hasNext())
            {
                recordVO = it.next();
                if (recordVO.getRecordtype() == RecordType.DETAILS)
                {
                    List&lt;bigdecimal&gt; amounts = recordVO.getAmounts();
                    boolean foundNonZero = false;
                    for (BigDecimal amount : amounts)
                    {
                        if (BigDecimal.ZERO.compareTo(amount) != 0)
                        {
                            foundNonZero = true;
                        }
                    }
                    
                    if (!foundNonZero)
                    {
                        it.remove();  // an iterator is used
                    }
                }
            }
        }
    }
 
</pre>
<br />
<b>Scenario 2</b>: Two users try to modify the same record in the database. In this scenario, you want one modification to go through and the other modification to notify the user as shown below.<br />
<br />
"<b>This record was not updated as the record you are trying to update has been updated by another user. Try refreshing your data, and update again.</b>"<br />
<br />
This will require a number of steps.<br />
<br />
<b>Step 1</b>: You would require a "<b>version number</b>" or a "<b>timestamp</b>"&nbsp; column in the database table to detect concurrent modifications.<br />
<br />
<b>Step 2</b>: When a record is initially read, the time stamp or version number also read.<br />
<br />
<br />

<pre class="brush: csharp">
    @Override
    public List&lt;AdjustmentDetail&gt; getAdjustmentRecords(final AdjustmentCriteria criteria)
    {
        String sql = "select a.detailid, a.portfolioCd, a.accountCd, a.PositionIndicator, a.cashValue, TmStamp = convert(int,substring(a.Timestamp,5,4))" +
                "from AdjustmentDetail a " +
                "Where a.portfoliocd = ? " +
                "and   a.valuationDttm = ? " +
                "and   a.inactiveFlag = 'N' ";
        
        List&lt;Object&gt; parametersList = new ArrayList&lt;Object&gt;();
        parametersList.add(criteria.getPortfolioCode());
        parametersList.add(criteria.getValuationDate());
        
        Object[] parameters = parametersList.toArray(new Object[parametersList.size()]);
        
        List&lt;AdjustmentDetail&gt; adjustments = jdbcTemplateSybase.query(sql, parameters,
                new RowMapper&lt;AdjustmentDetail&gt;()
                {
                    public AdjustmentDetail mapRow(ResultSet rs, int rowNum) throws SQLException
                    {
                        AdjustmentDetail record = new AdjustmentDetail();
      record.setDetailId(BigInteger.valueOf(rs.getLong("DetailId")));
                        record.setPortfolioCode(criteria.getPortfolioCode());
                        record.setAccountcd(rs.getString("accountCd"));
                        record.setAmount(rs.getBigDecimal("cashValue"));
      record.setPositionIndicator(rs.getString("PositionIndicator"));
                     record.setTimestamp(rs.getInt("TmStamp"));  // timestamp to detect any later modifications 

                        return record;

                    }
                });

        return adjustments;
        
    } 
</pre>


<br />
<br />
<b>Step 3</b>: After the record has been modified, when ready to update the record, do a select query first to read the time stamp or version number for the same record to ensure that it has not been modified. if the "timestamp" or the "version number" has changed, you need to throw the above exception and abort modifying the record as it had been modified by another user. <br />
<br />
<br />

<pre class="brush: csharp">
@Override
    public AdjustmentDetail modifyAdjustment(AdjustmentDetail adjDetail)
    {
        if (adjDetail == null)
        {
            throw new RuntimeException("adjDetail is null");
        }
        
        int noOfRecords = 0;
        
        String inactiveFlag;
        
        
    
        try
        {
         //check if the record has been modified.
         Integer adjustmentModifiedTimestamp = getAdjustmentModifiedTimestamp(adjDetail.getDetailId());
            
            //logic to modify adjustments go here
   //every time the record is modified, the timestamp or version number is incremented.
        }
        catch (Exception e)
        {
            logger.error("Error updating adjustment  detail: ", e);
        }
        
        if (noOfRecords == 0) throw new ValidationException("The adjustment was not updated. It may be the record you are trying to update has been updated by another user. Try refreshing your data and update again.");
        
        
        logger.info("No of adjustment details updated = " + noOfRecords);
        
        return adjDetail;
    }
 
</pre>
<br />
now the sample method that retrieves the timestamp.
<br />
<br/>

<pre class="brush: csharp">
//retrieve the timestamp value for the given datialid to detect if it has been modified.
 private Integer getAdjustmentModifiedTimestamp(BigInteger adjustmentDetailId) {

  String sql = "SELECT TmStamp = convert(int,substring(Timestamp,5,4)) from AdjustmentDetail where DetailId = ?";

  List&lt;Object&gt; parametersList = new ArrayList&lt;Object&gt;();
  parametersList.add(cashForecastDetaillId.intValue());

  Object[] parameters = parametersList.toArray(new Object[parametersList.size()]);

  List&lt;Integer&gt; ts = jdbcTemplateSybase.query(sql, parameters, new RowMapper&lt;Integer&gt;() {
   public Integer mapRow(ResultSet rs, int rowNum) throws SQLException {
    Integer tsValue = rs.getInt("TmStamp");
    return tsValue;

   }
  });
  return ts.get(0);
 }
 
</pre>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Multi-threading">Multi-threading</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/02/handling-concurrent-modifications-in.html" title="permanent link"> 2/22/2013 12:49:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/02/handling-concurrent-modifications-in.html#comment-form"location.href=http://java-success.blogspot.com/2013/02/handling-concurrent-modifications-in.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/02/handling-concurrent-modifications-in.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=3663256734885885545" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=3663256734885885545&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 19, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="6800598091324402252"></a>
    
         
    


    <h3 class="post-title">
	 
	 Spring JDBC Template examples -- calling stored proc, simple select, and insert with returning the generated key
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><h2>
Spring Interview Questions and Answers  Q1 - Q14 are FAQs</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2011/10/spring-interview-questions-and-answers.html"> <span style="font-size: normal;">Q1 - Q4 Overview &amp; DIP</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/11/spring-interview-questions-and-answers.html"> <span style="font-size: normal;">Q5 - Q8 DI &amp; IoC</span></a> </td>
<td><a href="http://java-success.blogspot.com.au/2014/02/understanding-spring-scopes-singleton.html"> <span style="font-size: normal;">Q9 - Q10 Bean Scopes</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/06/spring-architecture-and-understanding.html"> <span style="font-size: normal;">Q11 Packages</span></a> </td>
<td><a href="http://java-success.blogspot.com.au/2014/05/understanding-openclosed-principle-ocp.html"> <span style="font-size: normal;">Q12 Principle OCP</span></a> </td>
<td colspan="2"><a href="http://java-success.blogspot.com/2014/06/java-aop-with-aopalliance-method.html"> <span style="font-size: normal;">Q14 AOP and interceptors</span></a> </td>
</tr>
<tr>
<td><a href="http://java-success.blogspot.com/2011/11/spring-interview-questions-and-answers_30.html"> <span style="font-size: normal;">Q15 - Q16 Hibernate &amp; Transaction Manager</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/01/hibernate-interview-q-with-annotations.html"> <span style="font-size: normal;">Q17 - Q20 Hibernate &amp; JNDI</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/11/spring-interview-questions-and-answers_29.html"> <span style="font-size: normal;">Q21 - Q22 read properties</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/12/spring-interview-questions-and-answers.html"> <span style="font-size: normal;">Q23 - Q24 JMS &amp; JNDI</span></a> </td>
<td><a href="http://java-success.blogspot.com/2013/02/spring-jdbc-template-examples-calling.html"> <span style="font-size: normal;">Q25 JDBC</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/11/jsonp-and-jquery-with-spring-mvc.html"> <span style="font-size: normal;">Q26 Spring MVC</span></a> </td>
<td><a href="http://java-success.blogspot.com/2013/03/spring-mvc-view-resolvers.html"> <span style="font-size: normal;">Q27 - Spring MVC Resolvers</span></a> </td>
</tr>
</tbody></table>
<br />
<b>Q24.</b> How will you go about invoking stored procedures with Spring JDBC?
<b>&nbsp;</b><br />
<b>A24</b>. This post covers three typical scenarios of using the Spring JDBC template.

<b>&nbsp;</b>&nbsp;

<b></b><br />
<br />
<b>1.</b> Invoking a stored procedure to retrieve some results. This uses the JDBC Callable statement.<br />
<b>2</b>. Retrieving the data from the database via a simple "SELECT" query.<br />
<b>3</b>. Insert a new record into a table and then return the generated primary key.<br />
<br />
Here is the sample code snippet to achieve the above requirements using the Spring framework.<br />
<br />
<!--INFOLINKS_OFF-->

<br />
<pre class="brush: csharp">package com.myapp.repository.impl;

import java.math.BigInteger;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Types;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.annotation.Resource;

import org.apache.commons.lang.StringUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;
import org.springframework.jdbc.core.simple.SimpleJdbcCall;
import org.springframework.jdbc.core.simple.SimpleJdbcInsert;
import org.springframework.stereotype.Repository;

//...other imports

@Repository(value = "myAppDao")
public class MyAppDaoImpl implements MyAppDao {

 private static Logger logger = LoggerFactory.getLogger(MyAppDaoImpl.class);
 

 @Resource(name = "jdbcBasicTemplateSybase")
 private JdbcTemplate jdbcTemplateSybase;

 // ************ Retrieve data fromm a stored procedure  *******************
 
 @Override
 public List&lt;MyAppFeedResult&gt; getMyAppFeedData(final MyAppFeedCriteria criteria) {
  SimpleJdbcCall call  = new SimpleJdbcCall(jdbcTemplateSybase)
                          .withProcedureName("ProcGetMyAppFeed");
  
  call = call.returningResultSet("my_app_proc_result", new RowMapper&lt;MyAppFeedResult&gt;() {
   public MyAppFeedResult mapRow(ResultSet rs, int rowNum) throws SQLException {
    MyAppFeedResult  record = new MyAppFeedResult();

    record.setPortfolioCode(criteria.getPortfolioCode());
    record.setValuationDate(criteria.getValuationDate());
    record.setAccountcd(rs.getString("accountCd"));
    record.setPositionIndicator(rs.getString("PositionIndicator"));
    record.setAmount(rs.getBigDecimal("amount"));
    record.setSecurityIdentifier(rs.getString("securityIdentifier"));
    record.setCurrencyCode(rs.getString("currencyCd"));
    record.setUnitCost(rs.getBigDecimal("unitCost"));
    return record;
   }
  });
                          

  //construct the stored proc input parameters      
  java.sql.Date valDate = new java.sql.Date(criteria.getValuationDate().getTime());
  java.sql.Date foreCastDateAsAtEndOf = null;
  java.sql.Date foreCastDate = null; 

  if (criteria.getForeCastAsAtEndOf() != null) foreCastDateAsAtEndOf = new java.sql.Date(criteria.getForeCastAsAtEndOf().getTime());
  if (criteria.getForeCastDate() != null) foreCastDate = new java.sql.Date(criteria.getForeCastDate().getTime());
  
  final MapSqlParameterSource params = new MapSqlParameterSource();
  params.addValue("PortfolioCd", criteria.getPortfolioCode());
  params.addValue("ValuationDttm",valDate);
  params.addValue("ForeCastAsAtEndOf",foreCastDateAsAtEndOf);
  params.addValue("AccountCd",criteria.getAccountCode());
  params.addValue("ForecastDate", foreCastDate);
  params.addValue("TranTypeDesc", criteria.getTranTypeDesc());
  params.addValue("Debug", "N");
  
  //execute the stored proc with the input parameters
  Map&lt;String, Object&gt; results = call.execute(params);
  
  //get the results
  List&lt;MyAppFeedResult&gt; resultList = (List&lt;MyAppFeedResult&gt;)results.get("my_app_proc_result");
  
  return resultList;
 }
 
 @Override
 /** Simple select query **/
 public List&lt;MyAppAccount&gt; getMyAppAccountRecords(ReconciliationCriteria criteria) 
 {
  String sql = "Select MyAppId, PortfolioCd, AccountCd, CurrencyCd, ValuationDttm" +
                  "From MyApp " +
         "Where PortfolioCd = ? " +
         "And   InactiveFlag = 'N' " +
                  "Order by CurrencyCd, AccountCd";
  
  List&lt;Object&gt; parametersList = new ArrayList&lt;Object&gt;();
  parametersList.add(criteria.getPortfolioCode());
  parametersList.add(criteria.getValuationDate());

  Object[] parameters = parametersList.toArray(new Object[parametersList.size()]);

  List&lt;MyAppAccount&gt; parentList = jdbcTemplateSybase.query(sql, parameters, new RowMapper&lt;MyAppAccount&gt;() {
   public MyAppAccount mapRow(ResultSet rs, int rowNum) throws SQLException {
    MyAppAccount record = new MyAppAccount();

    record.setMyAppId(rs.getLong("MyAppId"));
    record.setPortfolioCode(rs.getString("portfolioCd"));
    record.setAccountCd(rs.getString("AccountCd"));
    record.setCurrencyCd(rs.getString("CurrencyCd"));
    record.setValuationDate(rs.getDate("ValuationDttm"));   
    return record;
   }
  });
  
  return parentList;
 }
 

 
 @Override
 /** insert a new record and get the generated primary key id**/
 public MyAppDetail addOrModifyAdjustment(MyAppDetail adjDetail) {
  if (adjDetail == null) {
   throw new RuntimeException("adjDetail is null");
  }

  try {
   SimpleJdbcInsert jdbcInsert = new SimpleJdbcInsert(jdbcTemplateSybase).withTableName("MyAppdetail").usingGeneratedKeyColumns("MyAppDetailid");
   Map&lt;String, Object&gt; lParameters = new HashMap&lt;String, Object&gt;(20);
      lParameters.put("MyAppId", adjDetail.getMyAppId().longValue());
      lParameters.put("TranCd",  adjDetail.getTxnCd());
      lParameters.put("TranTypeCd", Integer.valueOf(adjDetail.getTxnTypeCd()));
      lParameters.put("TranTypeDesc",  adjDetail.getTxnTypeDesc());
          
      
   Number generatedKey = jdbcInsert.executeAndReturnKey(lParameters);
   logger.info("adjustment detail added with id = " + generatedKey.longValue());
   
   adjDetail.setMyAppId(generatedKey.longValue());
  
   
  } catch (Exception e) {
   logger.error("Error saving MyApp transaction detail: ", e); 
   throw new RuntimeException(e);
  }
  

  return adjDetail;
 }

 //seter of the jdbcTemplate
 public void setJdbcTemplateSybase(JdbcTemplate jdbcTemplateSybase) {
  this.jdbcTemplateSybase = jdbcTemplateSybase;
 }

}</pre>
<br />
<br />
<b>Q.</b> How will you process the results and return them as a Map?<br />
<b>A. </b> Use the <b>ResultSetExtractor </b>class from Spring.<br />
<br />
<pre class="brush: csharp">    @Override
 public Map&lt;String, BigDecimal&gt; getAccountPVClosingBalances(PortfolioCriteria criteria) {
  String sql = "select accountcd, LiquidityLocal from portfolio p where p.portfoliocd = ? and   p.valuationdttm = ?  ";
    
  List&lt;Object&gt; parametersList = new ArrayList&lt;Object&gt;();
  parametersList.add(criteria.getPortfolioCd()); 
  parametersList.add(criteria.getValuationDtTm());

  //where clause prepared statement parameters
  Object[] parameters = parametersList.toArray(new Object[parametersList.size()]);

  //store results in a map
  Map&lt;String, BigDecimal&gt; results = jdbcTemplateSybase.query(sql, parameters, new ResultSetExtractor&lt;Map&lt;String, BigDecimal&gt;&gt;() {
   public Map&lt;String, BigDecimal&gt; extractData(ResultSet rs) throws SQLException {
    Map&lt;String, BigDecimal&gt; mapOfPortfolioBalances = new HashMap&lt;String, BigDecimal&gt;(100);
    while (rs.next()) {
     String accounrCd = rs.getString("accountcd");
     BigDecimal portfolioBalance = rs.getBigDecimal("LiquidityLocal");
     mapOfPortfolioBalances.put(accounrCd, portfolioBalance);
    }
    return mapOfPortfolioBalances;
   }
  });
  
  return results;
 }
  
</pre>
<br />
<br />
The "jdbcTemplateSybase" is configured and injected via the Spring dependency injection.<br />
<br />
<br />
JDBC, Spring, and Hibernate tutorials<br />
<br />
<ul>
<li><a href="http://java-success.blogspot.com.au/2012/05/spring-and-hibernate-simple-jdbc.html">Spring and Hibernate simple JDBC example</a></li>
<li><a href="http://java-success.blogspot.com.au/2012/10/jdbc-tutorial-with-hsqldb.html">JDBC Tutorial with HSQLDB</a></li>
<li><a href="http://java-success.blogspot.com.au/2013/12/spring-simplejdbccall-to-invoke-stored.html">Spring SimpleJdbcCall to invoke stored procedures</a></li>
</ul>
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Spring%20JDBC">Spring JDBC</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/02/spring-jdbc-template-examples-calling.html" title="permanent link"> 2/19/2013 01:45:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/02/spring-jdbc-template-examples-calling.html#comment-form"location.href=http://java-success.blogspot.com/2013/02/spring-jdbc-template-examples-calling.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=6800598091324402252" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=6800598091324402252&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 13, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="5668460748512437244"></a>
    
         
    


    <h3 class="post-title">
	 
	 JMS versus AMQP, Enterprise Integration Patterns (EIP), and Spring Integration versus Apache Camel
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><table>
<tbody>
<tr>

<td width="50%"><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* LHS - Medium Rectangle */
google_ad_slot = "1728948974";
google_ad_width = 336;
google_ad_height = 280;
google_ad_channel ="6353655268";
google_page_url = "http://java-success.blogspot.com.au/2011/09/java-multi-threading-interview.html";
//-->
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
</td>


<td>

<div>
<b>Q.</b> Why do you need <b>AMQP </b>when there is <b>JMS</b>?</div>
<div>
<b>A.</b> <b>AMQP </b>stands for Advanced Message Queuing Protocol, and was developed to address the problem of interoperability by creating a standard for how messages should be structured and transmitted between platforms the same way as SMTP, HTTP, FTP, etc. have created interoperable systems. This standard binary wire level protocol for messaging would therefore allow hetrogeneous disparate systems between and within companies to exchange messages regrdless of the message broker vendor or platform.&nbsp;</div>
<div>
<br /></div>
<div>
<br /></div>
<div>
<b>RabbitMQ</b>, <b>Apache Qpid</b>, <b>StormMQ</b>, etc are open source message broker softwares (i.e. <b>MOM </b>- message-oriented middlewares) that implements the Advanced Message Queuing Protocol (<b>AMQP</b>).&nbsp;</div>
<div>
<br /></div>
<div>
<b>Q.</b> How does <b>AMQP </b>differ from <b>JMS</b>?</div>
<div>
<b>A.</b> JMS is a standard messaging API for the Java platform. It provides a level of abstraction that frees developers from having to worry about specific implementation and wire protocols. This is similar to the JDBC API that allows you to easily switch databases. With JMS, you can switch from one JMS complian message broker (e.g. Web Methods) with another one (e.g. MQSeries or WebspehreMQ) with little or no changes to your source code. It also provides interoperability between other JVM based languages like Scala and Groovy. Altough JMS brokers can be used in .NET applications, &nbsp;the whole JMS specification does not guarantee interoperability, and integration between Java to .NET &nbsp;or Java to Ruby, is proprietary and can be quite tricky. In scenarios where you want to send a message from a Java based message producer to a .NET based message consumer, then you need a message based cross platform interoperability that is what AMQP does. With AMQP, you can use any AMQP compliant client library, and AMQP compliant message broker.</div>


</td>
</tr>
</tbody>
</table>


<div>
<br /></div>
<div>
<br /></div>
<div>
<b>Q.</b> What are the different alternatives to integrate various enterprise systems?</div>
<div>
<b>A.</b></div>
<div>
<br /></div>
<div>
<b>Alternative 1:</b> Custom Solution. Implement an individual solution that works for your problem without separating problems into little pieces. For example, use Apache CXF for Web services, overnight batch job runs to load data feeds, JMS for messaging, etc. This is more suited for small use cases. This has higher maintainability and developer effort. The developer has to handle errors, service retries, transactional management, etc. This is suited if you want to integrate one or two applications using one or two protocols.&nbsp;</div>
<div>
<br /></div>
<div>
<br /></div>
<div>
<b>Alternative 2</b>: Using an (opensource) integration framework like Spring Integration or Apache Camel. This helps you integrate systems in a standardised way adhering to the enterprise integration patterns (EIP). Apache Camel is a light weight integration framework that allows you to use HTTP, FTP, JMS, EJB, JPA, RMI, JMS, JMX, LDAP, and Netty to name a few. You use the same concept to integrate various protocols in Apache Camel. This increases maintainability and reduces developer effort. This is more suited &nbsp;if you want to integrate several applications with different protocols.</div>
<div>
<br /></div>
<div>
<br /></div>
<div>
<b>Alternative 3</b>: Using an ESB (Enterprise Service Bus) to integrate your applications. For example, Oracle Service Bus, TIBCO ESB, webMethods, etc. Under the hood, the ESB also uses an integration framework and provide more services and management functionalities like monitoring, high availability, clustering, graphical user inteface for routing and configuring, etc. Usually, an ESB is a complex and powerful product with a higher learning curve. Suited for very large integration projects. Projects requiring BPM (Business Process Managemnt) integration and other integrated services like monitoring, clustering, etc.<br />
<br />



<br />
<br />
<b>Q. </b>What is an architecture that enables separate applications to work together, but in a de-coupled fashion such that applications can be easily added or removed without affecting the others?<br />
<b>A.</b> This is achieved via a Message Oriented Middleware (aka a message bus).<br />
<br />
<br />
<br />
<b>Q</b>. How can the caller be sure that exactly one receiver will receive the document or perform the call?<br />
<b>A</b>. Use the point-to-point channel<br />
<br />
<br />
<b>Q.</b> How can the sender broadcast an event to all interested receivers?<br />
<b>A</b>. Use the publish subscribe channel.<br />
<br />
<b>Q.</b> What will the messaging system do with a message it cannot deliver?<br />
<b>A</b>. Put it on the dead letter channel.<br />
<br />
<b>Q</b>. How can the sender make sure that a message will be delivered, even if the messaging system fails?<br />
<b>A</b>. Use the "guaranteed delivery" mechanism.<br />
<br />
<br />
<b>Q</b>. What are the diffrent ways to route messages?<br />
<b>A</b>. EIP (Enterprise Integration Patterns) define different types of rules based routing to solve common enterprise intergration problems. Like GoF design patterns is the EIP allows integration architects and designers to share a common vocabulary.<br />
<br />
<ol>
<li><b>Content based routing</b> uses XPath predicates to route messages based on the message content. &nbsp;<b>Content enricher </b>supplements the original message with additional relevant information recieved from the other sources.</li>
<li><b>Splitter &nbsp;</b>provides the EIP service engine to split messages into separate parts based on the XPATH expression. Splits a composite message into a series of individual message parts.</li>
<li><b>Split Aggregator</b> is used to collect and store individual message parts until a complete set of co-related message parts has been recieved. Once all the related parts have been recieved, they are aggregated to form a single message.</li>
<li><b>Static Recipent List</b> based routing inspects an incoming message, and depending upon the number of recipients mentioned in the list, it can forward the message to all channels associated with the "recipients list".&nbsp;&nbsp;</li>
<li>A <b>Resquencer </b>is used to get a stream of related but out of sequence messages back into correct order. Because individual messages may follow different routes, some messages are likely to pass through the processing steps sooner than others, resulting in the messages getting out of order. A resequencer usually does not modify the message contents.</li>
<li>A <b>message filter</b> is a processor that eliminates undesired messages based on specific criteria. Filtering is controlled by specifying a predicate in the filter: when the predicate is true, the incoming message is allowed to pass; otherwise, it is blocked. A message filter usually does not modify the message contents.</li>
</ol>
<br />
<div>
<br />
<b>Q</b>. How would you deal with large message volumes?<br />
<b>A.</b><br />
<ul>
<li>You can reduce the data volume with the use of "<b>Claim Check</b>" pattern, which allows you to replace message content with a claim check (a unique key), which can be used to retrieve the message content at a later time. The message content will be stored temporarily in a persistent store like a database or file system. This pattern is very useful when message content is very large and not all components require all information.</li>
<li>A <b>Content Filter</b> can be used to remove unwanted data elements from a message. It is useful to simplify the structure of the message. Very often, messages are represented as tree structures containing many levels of nested, repeating groups because they are modeled after generic, normalized database structures. Very often, this level of nesting is superfluous and a Content Filter can be used to 'flatten' the hierarchy into a simple list of elements that can be more easily understood and processed by other systems.</li>
</ul>
<br /></div>
<br />
<b>Q.</b> How would you go about choosing between <b>Spring Integration</b> and <b>Apache Camel </b>to solve common integration problems?<br />
<b>A.&nbsp;</b><br />
<br />
<b>Spring Integration </b>provides an extension to the Spring programming model to support the well-known Enterprise Integration Patterns while building on the Spring Framework's existing support for enterprise integrationSpring Integration is more suited, if you already have got a Spring project and need to add some integration stuff to it. It requires almost no additional effort to learn Spring Integration if you know Spring itself. Nevertheless, Spring Integration only offers very rudimenary support for technologies such as AMQP, Spring Application Events, Feeds (e.g, RSS/ATOM), File, FTP, FTPS, SFTP, Gemfire, Groovy, HTTP (REST), TCP/IP, JDBC, JMS, JMX, Mail (IMAP/IDLE/POP3), MongoDB, Redis, RMI, Twitter, Web Services (SOAP), and XMPP. Integrations are implemented by writing a lot of XML based DSL(without a real DSL - Domain Specific Language).&nbsp;Spring Integration can be though of as a catch up game to Apache Camel as JavaEE did a catch up with Spring.<br />
<br />
<b>Apache Camel</b> is a powerful open source integration framework based on known Enterprise Integration Patterns with powerful support for integration with core Spring. Apache Camel is almost identical to Mule ESB, and offers many components (even more than Spring Integration) for almost every technology you could think of. If there is no component available, you can create your own component very easily starting with a Maven archetype. Camel also supports a Spring based XML configuration as well as a "DSL" for Java, Groovy, and Scala. The benefits of using the Java DSL is that your IDE can auto complete your code as you start typing, rather than having to mess around with buckets of XML. The Java DSL is also very expressive as you can mix and match your own code within the language for Expression or Predicate evaluations. So, it has better readability and there are commercial tools like "Fuse IDE" for generating XML based DSL code.<br />
<br />
<b>Mule ESB</b> is another choice and as the name suggests, it is an ESB including additional bells and whistles. This can be compared to "Apache ServiceMix", which is an extension to Apache Camel. Mule also only offers XML based DSL. The Mule Studio is a visual designer. Mule does provide proprietary connector support for systems like SAP, Tibco Rendevous, PayPal, Sibel CRM, IBM's CICS, etc.<br />
<br />
So, the decision is not clear cut and it depends on your needs.<br />
<br />
<div>
<br /></div>
</div>
<div>
<br /></div>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/AMQP">AMQP</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/JMS">JMS</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/02/jms-versus-amqp-enterprise-integration.html" title="permanent link"> 2/13/2013 11:03:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/02/jms-versus-amqp-enterprise-integration.html#comment-form"location.href=http://java-success.blogspot.com/2013/02/jms-versus-amqp-enterprise-integration.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/02/jms-versus-amqp-enterprise-integration.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=5668460748512437244" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=5668460748512437244&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
   

</div></div>
<!-- End #main -->







<!-- Begin #sidebar -->
<div id="sidebar"><div id="sidebar2">

  
  
  <h2 class="sidebar-title">Previous Posts</h2>
    <ul id="recently">
    
        <li><a href="http://java-success.blogspot.in/2014/11/are-you-java-beginner-why-good-java.html">Are you a Java beginner? Why good Java developers ...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/11/java-exception-handling-beginner.html">Java exception handling beginner mistakes and best...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/11/unix-interview-questions-and-answers.html">Unix Interview Questions and Answers for Java deve...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/debugging-and-working-like-pro-with.html">Debugging and working  like a pro with a Java appl...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/yammer-metrics-to-monitor-restful-web_22.html">Yammer metrics to monitor RESTful web services and...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/when-to-use-which-java-collection-or.html">When to use which Java collection or data structur...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2011/09/how-to-prepare-for-javajee-job.html">How to prepare or train for Java and JEE Job Inter...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/yammer-metrics-to-monitor-restful-web.html">Yammer metrics to monitor RESTful web services wit...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/09/monitoring-and-gathering-statistics.html">Monitoring and gathering statistics with JMX based...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/08/what-are-different-ways-java-thread.html">What are the different ways a Java thread gets blo...</a></li>
     
  </ul>
  
  
  
  <h2 class="sidebar-title">Archives</h2>

    <ul class="archive-list">
   	  
    	<li><a href="http://java-success.blogspot.in/2006_10_01_archive.html">October 2006</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2006_11_01_archive.html">November 2006</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_05_01_archive.html">May 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_10_01_archive.html">October 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_12_01_archive.html">December 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2008_08_01_archive.html">August 2008</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_02_01_archive.html">February 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_10_01_archive.html">October 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_11_01_archive.html">November 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_12_01_archive.html">December 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_01_01_archive.html">January 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_07_01_archive.html">July 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_09_01_archive.html">September 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_10_01_archive.html">October 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_11_01_archive.html">November 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_12_01_archive.html">December 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_01_01_archive.html">January 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_02_01_archive.html">February 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_03_01_archive.html">March 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_04_01_archive.html">April 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_05_01_archive.html">May 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_06_01_archive.html">June 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_07_01_archive.html">July 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_08_01_archive.html">August 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_09_01_archive.html">September 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_10_01_archive.html">October 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_11_01_archive.html">November 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_12_01_archive.html">December 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_01_01_archive.html">January 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_02_01_archive.html">February 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_03_01_archive.html">March 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_04_01_archive.html">April 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_05_01_archive.html">May 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_06_01_archive.html">June 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_07_01_archive.html">July 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_08_01_archive.html">August 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_09_01_archive.html">September 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_10_01_archive.html">October 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_11_01_archive.html">November 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_12_01_archive.html">December 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_01_01_archive.html">January 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_02_01_archive.html">February 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_03_01_archive.html">March 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_04_01_archive.html">April 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_05_01_archive.html">May 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_06_01_archive.html">June 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_07_01_archive.html">July 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_08_01_archive.html">August 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_09_01_archive.html">September 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_10_01_archive.html">October 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_11_01_archive.html">November 2014</a></li>
	  

  </ul>
  
  
  
  <!-- Begin #profile-container -->
  
    <div id="profile-container"><h2 class="sidebar-title">About Me</h2>
<dl class="profile-datablock"><dt class="profile-img"><a href="https://plus.google.com/109240621969095737337"><img src="//lh3.googleusercontent.com/-XMLxx0v_R7A/AAAAAAAAAAI/AAAAAAAACxk/8BeHFmsEuy8/s80-c/photo.jpg" width="80" height="80" alt="My Photo"></a></dt>
<dd class="profile-data"><strong>Name:</strong> <a rel="author" href="https://plus.google.com/109240621969095737337"> Arulkumaran Kumaraswamipillai </a></dd>
</dl>
<p class="profile-textblock">Java freelancer from Australia. As a contractor, attended 100+ job interviews and received multiple job offers. Authored Java career books that sold over 30,000 copies.<br><br><a href="http://www.java-success.com" rel="nofollow" target="_blank">www.java-success.com</a> for 500+ Java/JEE job interview questions and answers and tutorials.<br></p>
<p class="profile-link"><a rel="author" href="https://plus.google.com/109240621969095737337">View my complete profile</a></p></div>
  
  <!-- End #profile -->

  
  <p id="powered-by"><a href="http://www.blogger.com"><img src="http://buttons.blogger.com/bloggerbutton1.gif" alt="Powered by Blogger" /></a></p>
  <p id="blogfeeds">Subscribe to<br />Posts [<a target="_blank" href="http://java-success.blogspot.com/feeds/posts/default" type="application/atom+xml">Atom</a>]</p>

  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  
   
  <!--
  <p>This is a paragraph of text that could go in the sidebar.</p>
  -->
  
  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  



</div></div>
<!-- End #sidebar -->




<!-- Begin #footer -->
<div id="footer"><hr />

  <p><!-- This is an optional footer. If you want text here, place it inside these tags, and remove this comment. -->&nbsp;</p>

  </div>
<!-- End #footer -->




</div>
<!-- End #content -->






</div></div></div></div>
<!-- End wraps -->

</body>
</html>