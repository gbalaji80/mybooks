<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
  <title>Java-Success Blog: February 2014</title>

  <link href='http://www.java-success.com' rel='canonical'/>

  


  <script type="text/javascript">(function() { (function(){function c(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(l){}};this.tick("start",null,a)}var a,e;window.performance&&(e=(a=window.performance.timing)&&a.responseStart);var h=0<e?new c(e):new c;window.jstiming={Timer:c,load:h};if(a){var b=a.navigationStart;0<b&&e>=b&&(window.jstiming.srt=e-b)}if(a){var d=window.jstiming.load;0<b&&e>=b&&(d.tick("_wtsrt",void 0,b),d.tick("wtsrt_","_wtsrt",
e),d.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),d&&0<b&&(d.tick("_tbnd",void 0,window.chrome.csi().startE),d.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,d&&0<b&&(d.tick("_tbnd",void 0,window.external.startE),d.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(k){}})();window.tickAboveFold=function(c){var a=0;if(c.offsetParent){do a+=c.offsetTop;while(c=c.offsetParent)}c=a;750>=c&&window.jstiming.load.tick("aft")};var f=!1;function g(){f||(f=!0,window.jstiming.load.tick("firstScrollTime"))}window.addEventListener?window.addEventListener("scroll",g,!1):window.attachEvent("onscroll",g);
 })();</script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Blogger" />
<link rel="icon" type="image/vnd.microsoft.icon" href="https://www.blogger.com/favicon.ico"/>
<link rel="alternate" type="application/atom+xml" title="Java-Success Blog - Atom" href="http://java-success.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Java-Success Blog - RSS" href="http://java-success.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Java-Success Blog - Atom" href="https://www.blogger.com/feeds/35897879/posts/default" />
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/static/v1/v-css/50269083-blog_controls.css"/>
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/dyn-css/authorization.css?targetBlogID=35897879&zx=32ffd7df-5810-469f-a666-048e5011b3eb"/>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/979395223-backlink.js"></script>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/4080670514-backlink_control.js"></script>
<script type="text/javascript">var BL_backlinkURL = "https://www.blogger.com/dyn-js/backlink_count.js";var BL_blogId = "35897879";</script>


  <style type="text/css">
/*
-----------------------------------------------
Blogger Template Style
Name:     Harbor
Designer: Douglas Bowman
URL:      www.stopdesign.com
Date:     24 Feb 2004
----------------------------------------------- */


body {
  background:#fff url("http://www.blogblog.com/harbor/rocks.jpg") no-repeat right bottom;
  background-attachment:fixed;
  margin:0;
  padding:0;
  font:x-small Georgia,Serif;
  color:#333;
  font-size/* */:/**/small;
  font-size: /**/small;
  }
/* Commented Backslash Hack hides rule from IE5-Mac \*/
  body {background-attachment:scroll;}
  /* End IE5-Mac hack */
a:link {
  color:#36a;
  text-decoration:none;
  }
a:visited {
  color:#764;
  text-decoration:none;
  }
a:hover {
  color:#933;
  text-decoration:underline;
  }
a img {
  border-width:0;
  }


/* Page Structure
----------------------------------------------- */
#wrap {
  background:url("http://www.blogblog.com/harbor/sky.jpg") repeat-x left top;
  min-width:740px;
  margin:0;
  padding:0;
  text-align:left;
  }
#wrap2 {
  background:url("http://www.blogblog.com/harbor/lighthouse.jpg") no-repeat left top;
  }
#wrap3 {
  background:url("http://www.blogblog.com/harbor/cloud.jpg") no-repeat 100% 75px;
  }
#wrap4 {
  background:url("http://www.blogblog.com/harbor/center_cloud.jpg") no-repeat 50% 0;
  padding:15px;
  width:100%;
  width/* */:/**/auto;
  width: /**/auto;
  }
@media all {
  #content {
    max-width:890px;
    padding:0 30px 50px;
    width:100%;
    width/* */:/**/auto;
    width: /**/auto;
    }
  html>body #content {
    border:3px double #fff;
    }
  #main {
    width:64%;
    float:right;
    }
  #main2 {
    margin:0;
    padding:0;
    }
  #sidebar {
    width:32%;
    float:left;
    }
  #sidebar2 {
    margin:0;
    padding:170px 0 20px;
    }
  }
@media handheld {
  #content {
    width:90%;
    }
  #main {
    width:100%;
    float:none;
    }
  #sidebar {
    width:100%;
    float:none;
    }
  }

/* Header
----------------------------------------------- */
@media all {
  #header {
    padding:15px 0 10px 110px;
    }
  }
@media handheld {
  #header {
    width:100%;
    padding:15px 0 10px 0;
    }
  }
#blog-title {
  margin:0 0 .25em;
  font-size:270%;
  font-weight:normal;
  color:#678;
  }
#blog-title a {
  color:#678;
  text-decoration:none;
  }
#description {
  margin:0;
  max-width:700px;
  font-size:75%;
  line-height:1.8em;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#789;
  }


/* Headings
----------------------------------------------- */
h2 {
  margin:1.5em 0 .75em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }


/* Posts
----------------------------------------------- */
.date-header {
  margin:2em 0 .5em;
  }
.post {
  margin:.5em 0 1.5em;
  line-height:1.6em;
  }
.post-title {
  margin:.25em 0 0;
  padding:0 0 4px;
  font-size:140%;
  font-weight:normal;
  line-height:1.4em;
  }
.post-title a, .post-title strong {
  background:url("http://www.blogblog.com/harbor/icon_lighthouse.gif") no-repeat 0 .15em;
  display:block;
  padding-left:20px;
  text-decoration:none;
  color:#368;
  font-weight:normal;
  }
.post-title strong {
  background-image:url("http://www.blogblog.com/harbor/icon_lighthouse2.gif");
  color:#000;
  }
.post-title a:hover {
  color:#933;
  }
.post-body {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding-top:12px;
  }
.post p {
  margin:0 0 .75em;
  }
p.post-footer {
  color:#999;
  }
.post-footer em, .comment-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.post-footer em {
  font-style:normal;
  color:#666;
  margin-right:.4em;
  }
.comment-link strong {
  font-size:130%;
  }
.comment-link {
  margin-left:.4em;
  }
.post img {
  padding:4px;
  border:1px solid #cde;
  }


/* Comments
----------------------------------------------- */
#comments {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding:15px 0 0;
  }
#comments h4 {
  margin:1em 0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }
#comments h4 strong {
  font-size:130%;
  }
#comments-block {
  margin:1em 0 1.5em;
  line-height:1.4em;
  }
#comments-block dt {
  margin:.5em 0;
  }
#comments-block dd {
  margin:.25em 20px 0;
  }
#comments-block dd.comment-timestamp {
  margin:-.25em 20px 1.5em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
#comments-block dd p {
  margin:0 0 .75em;
  }
.deleted-comment {
  font-style:italic;
  color:gray;
  }


/* Sidebar Content
----------------------------------------------- */
#sidebar ul {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 15px;
  padding:0 0 15px;
  list-style:none;
  }
#sidebar li {
  margin:0;
  padding:0 0 .25em 15px;
  text-indent:-15px;
  line-height:1.5em;
  }
#sidebar p {
  color:#666;
  line-height:1.5em;
  }


/* Profile
----------------------------------------------- */
#profile-container {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 2em;
  padding:0 0 15px;
  }
.profile-datablock {
  margin:.5em 0 .5em;
  }
.profile-img {
  display:inline;
  }
.profile-img img {
  float:left;
  padding:4px;
  border:1px solid #cde;
  margin:0 8px 3px 0;
  }
.profile-data {
  margin:0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.profile-data strong {
  display:none;
  }
.profile-textblock {
  margin:0 0 .5em;
  }
.profile-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Footer
----------------------------------------------- */
#footer {
  clear:both;
  padding:15px 30px 0 50px;
  }
#footer hr {
  display:none;
  }
#footer p {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  margin:0;
  padding-top:15px;
  font:78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Feeds
----------------------------------------------- */
#blogfeeds {
  }
#postfeeds {
  }
  </style>
<!-- --><style type="text/css">@import url(https://www.blogger.com/static/v1/v-css/navbar/3334278262-classic.css);
div.b-mobile {display:none;}
</style>

</head>

<body><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d35897879\x26blogName\x3dJava-Success+Blog\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dBLUE\x26layoutType\x3dCLASSIC\x26searchRoot\x3dhttp://java-success.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://java-success.blogspot.com/\x26vt\x3d2978101103701820782',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script>

<!-- Begin wraps -->

<div id="wrap"><div id="wrap2"><div id="wrap3"><div id="wrap4">


<!-- Begin #content -->
<div id="content">


<div id="header">

  <h1 id="blog-title">
    
	Java-Success Blog
	
  </h1>

  <p id="description">Java/JEE blog containing interview questions and answers and tutorials</p>

</div>


<!-- Begin #main -->
<div id="main"><div id="main2">

<div class='adsense' style='text-align:center; padding: 0px 3px 0.5em 3px;'>
<script type="text/javascript"><!--
google_ad_client="pub-3764234023451771";
google_ad_host="pub-1556223355139109";
google_ad_width=468;
google_ad_height=60;
google_ad_format="468x60_as";
google_ad_type="text";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="333333";
google_color_url="009900";
google_color_text="993333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



</div>

<!-- Search Google -->
<center>
<form method="get" action="http://www.google.com/custom" target="_top">
<table bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<label for="sbi" style="display: none">Enter your search terms</label>
<input type="text" name="q" size="31" maxlength="255" value="" id="sbi"></input>
<label for="sbb" style="display: none">Submit search form</label>
<input type="submit" name="sa" value="Search" id="sbb"></input>
<input type="hidden" name="client" value="pub-3764234023451771"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
</center>
<!-- Search Google -->









<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 27, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="988120171642877145"></a>
    
         
    


    <h3 class="post-title">
	 
	 Debugging Java Class loading issues
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><div style="text-align: center;">
<span style="font-size: large;">"I thought that I was using my application package version of a library but apparently my application server (e.g. Weblogic, JBoss) has already loaded an older version of this-library-issue"</span>&nbsp;</div>
<br />
These issues normally arise when there are certain classes which are packaged along with Application Server as part of common libraries and the same set of classes are also present in your Application package as well (normally inside WEB-INF/lib folder of the application). The reasons for the problem lies with how the class loading works in any Application Server.<br />
<br />
A common question many developers ask is that<br />
<br />
<span style="font-size: large;">Where on the file system was my Java class loaded from?</span><br />
<br />
<b>Here are some tips and steps to troubleshoot Java class loading issues.</b><br />
<br />
<b>1. -verbose:class</b> option in your JVM. With the <b>-verbose</b> option all the classes that are loaded are listed, along with the JAR file or directory from which they were loaded. The "<b>class</b>" output shows additional information, such as when superclasses are being loaded, and when static initializers are being run.<br />
<br />
<b>2. Creating a Java dump</b> and analyzing the Java dump for class loading issues. The Java dumps are created under following circumstances.<br />
<div>
<div>
<ul>
<li>When a fatal native JVM error.</li>
<li>When the JVM runs out of heaps memory space.</li>
<li>When a signal is sent to the JVM (e.g. Control-Break is pressed on Windows, Control-\ on Linux, or kill -3 on Unix)</li>
</ul>
<div>
There are tools like <b>jstack</b>, <b>jmap</b>, <b>hprof</b>, and&nbsp;<b>Eclipse Memory Analyzer (MAT)&nbsp;</b>to analyze the Java dumps.</div>
</div>
</div>
<div>
<br /></div>
<div>
<b>3.&nbsp;&nbsp;Some of the libraries provide API to list the version number</b>. For example, The Eclipse link MOXy library provides a method as shown below.</div>
<br />
<pre class="brush: csharp">  PrintWriter out = response.getWriter();
  out.println("&lt;html&gt;");
  out.println("&lt;body&gt;");
  out.println("&lt;h1&gt;Simple&lt;/h1&gt;");
  out.println(org.eclipse.persistence.Version.getVersion());
  out.println("&lt;/body&gt;");
  out.println("&lt;/html&gt;");
 </pre>
<br />
<b>4. &nbsp;</b>The<b> org.jboss.test.util.Debug </b>class has a method &nbsp;<i>displayClassInfo(Class clazz, StringBuffer results)</i> to display the loaded class details. This is done programmatically. What this class essentially does is <br />
<br />
<pre class="brush: csharp">    


URL loc = MyClass.class.getProtectionDomain().getCodeSource().getLocation();


 </pre>
<br />
<b>5. The http://www.findjar.com</b> is an onlime search engine that can list possible jar files in which a particular class file like <i>java.sql.Connection</i> can be found.<br />
<br />
<br />
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Center - Leader board -->
<br />
<ins class="adsbygoogle" data-ad-client="ca-pub-3764234023451771" data-ad-slot="5678244596" style="display: inline-block; height: 90px; width: 728px;"></ins><script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<br />
<b>6. </b>Finally, using the <b>Unix find and grep command</b>s to list the jar files that has a given class file like "Connection".<br />
<br />
<pre class="brush: csharp"> 


find . -name '*.jar' -print0 |  xargs -0 -I '{}' sh -c 'jar tf {} | grep Connection.class &amp;&amp;  echo {}' 


</pre>
<br />
You may also like<br />
<br />
<ul>
<li><a href="http://java-success.blogspot.com/2014/02/troubleshooting-java-classloader-or.html">Troubleshooting Java classloader or class loading issues -- Weblogic example</a></li>
<li><a href="http://java-success.blogspot.com/2014/02/troubleshooting-java-classloader-or_25.html">Troubleshooting Java classloader or class loading issues -- JBoss example</a></li>
</ul>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Class%20loader">Class loader</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Java%20Debugging">Java Debugging</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/debugging-java-class-loading-issues.html" title="permanent link"> 2/27/2014 10:07:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/debugging-java-class-loading-issues.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/debugging-java-class-loading-issues.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=988120171642877145" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=988120171642877145&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 25, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="5186542182868822273"></a>
    
         
    


    <h3 class="post-title">
	 
	 Troubleshooting Java classloader or class loading issues -- JBoss example
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>Every Java developer faces the following issue from time to time.<br />
<br />
<div style="text-align: center;">
<span style="font-size: large;">"I thought that I was using my application package version of a library but apparently my application server (e.g. Weblogic, JBoss) has already loaded an older version of this-library-issue"</span></div>
<div style="text-align: center;">
<br />
<div style="text-align: left;">
These issues normally arise when there are certain classes which are packaged along with Application Server as part of common libraries and the same set of classes are also present in our Application package as well (normally inside WEB-INF/lib folder of the application). The reasons for the problem lies with how the class loading works in any Application Server. Different Application Servers provide different mechanisms to deal with this problem. We have already looked at how to deal with this in <a href="http://java-success.blogspot.com/2014/02/troubleshooting-java-classloader-or.html">Weblogic application server</a>.<br />
<br />
<b>In JBoss 4.x</b> versions, you need to turn off the PARENT_FIRST delegation mode in its<b> jboss-web.xml</b> descriptor file.<br />
<br />
<!-- INFOLINKS_OFF -->

<br />
<pre class="brush: csharp">&lt;jboss-web&gt;
    &lt;!--
      Sets the isolation scope for the WAR. We are now using a parent LAST policy for the war classloader.
      Meaning that classes/jars in the war take precedence over those provided by the EAr &amp; App Server. 
    --&gt;
 &lt;loader-repository&gt;
  maya.macquarie.com:loader=my-webservices.war
  &lt;loader-repository-config&gt;java2ParentDelegation=false&lt;/loader-repository-config&gt;
 &lt;/loader-repository&gt;
&lt;/jboss-web&gt;
</pre>
<br />
<b>In JBoss 5 </b>on wards, you need to have a<b> jboss-classloading.xml</b> in my_app.ear/META-INF as shown below<br />
<br />
<pre class="brush: csharp">&lt;classloading xmlns="urn:jboss:classloading:1.0"
            domain="my_app.ear"
            export-all="NON_EMPTY"
            import-all="true"
            parent-first="false"&gt;
&lt;/classloading&gt;
</pre>
<br />
<br />
<ul>
<li>by setting the domain, we are specifing that the my_app.ear application participate in its own domain my_app.ear.</li>
<li>by setting parent-first to false, we are essentially declaring that EARs classes be preferred over JBoss’s</li>
</ul>
<br />
<b>JBoss AS 7</b> follows a real modular approach deprecating all earlier approaches. The server bootstrap libraries are now located at the root of the application server. The <b>jboss-deployment-structure.xml</b> needs to be placed within the META-INF folder of the EAR or inside WEB-INF of your war file.<br />
<br />
<pre class="brush: csharp">&lt;jboss-deployment-structure&gt;
  &lt;sub-deployment name="my_app.war"&gt;
    &lt;dependencies&gt;
      &lt;module name="org.apache.log4j" /&gt;
    &lt;/dependencies&gt;
  &lt;/sub-deployment&gt;
&lt;/jboss-deployment-structure&gt;
</pre>
<br />
You can apply exclusions<br />
<br />
<pre class="brush: csharp">&lt;jboss-deployment-structure&gt;
  &lt;deployment&gt;
    &lt;exclusions&gt;
      &lt;module name="javax.faces.api" /&gt;
      &lt;module name="com.sun.jsf-impl" /&gt;
    &lt;/exclusions&gt;
    &lt;dependencies&gt;
      &lt;module name="javax.faces.api" slot="2.0"/&gt;
      &lt;module name="com.sun.jsf-impl" slot="2.0"/&gt;
    &lt;/dependencies&gt;
  &lt;/deployment&gt;
&lt;/jboss-deployment-structure&gt;
</pre>
<br />
<br />
This is only a general discussion. Please refer to the relevant JBoss documentation for more options and appropriate solutions.</div>
</div>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Class%20loader">Class loader</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/JBoss">JBoss</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/troubleshooting-java-classloader-or_25.html" title="permanent link"> 2/25/2014 11:49:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/troubleshooting-java-classloader-or_25.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/troubleshooting-java-classloader-or_25.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=5186542182868822273" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=5186542182868822273&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 24, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="1048096119149615566"></a>
    
         
    


    <h3 class="post-title">
	 
	 Troubleshooting Java classloader or class loading issues -- Weblogic example
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>Every Java developer faces the following issue from time to time.<br />
<br />
<div style="text-align: center;">
<span style="font-size: large;">"I thought that I was using my application package version of a library but apparently my application server (e.g. Weblogic, JBoss) has already loaded an older version of this-library-issue"</span></div>
<div style="text-align: center;">
<br />
<div style="text-align: left;">
These issues normally arise when there are certain classes which are packaged along with Application Server as part of common libraries and the same set of classes are also present in our Application package as well (normally inside WEB-INF/lib folder of the application). The reasons for the problem lies with how the class loading works in any Application Server. Different Application Servers provide different mechanisms to deal with this problem.&nbsp;</div>
</div>
<div style="text-align: left;">
<br /></div>
<div style="text-align: left;">
Recently I faced the similar issue with loading my MOXy libraries for marshaling and marshaling XML to and from Java objects. Troubleshooting these issues could be tricky. and luckily the eclipse link MOXy library had a&nbsp;<i>org.eclipse.persistence.Version</i>.getVersion( ), which prints the version of the library used. In my case, an older version was used from the Weblogic lib directory, ignoring the later version packed in my war or ear package.</div>
<div style="text-align: left;">
<br /></div>
<div style="text-align: left;">
<b>Solving it when you deploy a war file in Weblogic server.</b></div>
<div style="text-align: left;">
<b><br /></b></div>
<div style="text-align: left;">
The web logic specific web deployment descriptor file <b>weblogic.xml </b>file shown below hinting weblogic to use the jar libraries included the WEB-INF/lib for the listed packages like<i>&nbsp;org.eclipse.persistence.*.</i></div>
<div style="text-align: left;">
<br />
<br />
<!-- INFOLINKS_OFF -->

<br />
<pre class="brush: csharp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;weblogic-web-app xmlns="http://xmlns.oracle.com/weblogic/weblogic-web-app" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd"&gt;

 &lt;context-root&gt;wrapng&lt;/context-root&gt;

 &lt;container-descriptor&gt;
  &lt;prefer-application-packages&gt;
         &lt;package-name&gt;javax.el.*&lt;/package-name&gt;
         &lt;package-name&gt;com.sun.el.*&lt;/package-name&gt;
         &lt;package-name&gt;javax.faces.*&lt;/package-name&gt;
   &lt;package-name&gt;com.sun.faces.*&lt;/package-name&gt;
   &lt;package-name&gt;org.joda.*&lt;/package-name&gt;
   &lt;package-name&gt;org.apache.*&lt;/package-name&gt;
      &lt;package-name&gt;antlr.*&lt;/package-name&gt;
      &lt;package-name&gt;com.sun.xml.bind.*&lt;/package-name&gt;
   &lt;package-name&gt;javax.servlet.jsp.jstl.*&lt;/package-name&gt;
   &lt;package-name&gt;org.eclipse.persistence.*&lt;/package-name&gt;
     &lt;/prefer-application-packages&gt;
 &lt;/container-descriptor&gt;
 
 &lt;fast-swap&gt;
  &lt;enabled&gt;false&lt;/enabled&gt;
 &lt;/fast-swap&gt;
 
 &lt;jsp-descriptor&gt;
  &lt;compress-html-template&gt;true&lt;/compress-html-template&gt;
 &lt;/jsp-descriptor&gt;
 
&lt;/weblogic-web-app&gt;

</pre>
<br />
<b>Solving it when you deploy an ear file in Weblogic server.</b><br />
<b><br /></b>
Similarly, if you have an ear file, and the the library is packaged within /lib folder. The ear descriptor file&nbsp;<b>weblogic-application.xml</b> &nbsp;will look like<br />
<br />
<pre class="brush: csharp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;wls:weblogic-application xmlns:wls="http://www.bea.com/ns/weblogic/weblogic-application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/javaee_5.xsd 
   http://www.bea.com/ns/weblogic/weblogic-application 
   http://www.bea.com/ns/weblogic/weblogic-application/1.0/weblogic-application.xsd"&gt;
 &lt;wls:application-param&gt;
  &lt;wls:param-name&gt;webapp.encoding.default&lt;/wls:param-name&gt;
  &lt;wls:param-value&gt;UTF-8&lt;/wls:param-value&gt;
 &lt;/wls:application-param&gt;
 
 &lt;wls:prefer-application-packages&gt;
        &lt;wls:package-name&gt;antlr.*&lt;/wls:package-name&gt;
        &lt;wls:package-name&gt;org.eclipse.persistence.*&lt;/wls:package-name&gt;
    &lt;/wls:prefer-application-packages&gt;
 
&lt;/wls:weblogic-application&gt;
</pre>
<br />
<br />
<br />
Refer to Weblogic documentation for other options like<span style="font-family: inherit;"> "<span style="background-color: white;">prefer-web-inf-classes" element</span></span><span style="background-color: white; font-family: Tahoma, sans-serif;">.</span><span style="font-family: inherit;"><span style="background-color: white;">&nbsp;</span></span></div>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Class%20loader">Class loader</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Weblogic">Weblogic</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/troubleshooting-java-classloader-or.html" title="permanent link"> 2/24/2014 10:45:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/troubleshooting-java-classloader-or.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/troubleshooting-java-classloader-or.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=1048096119149615566" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=1048096119149615566&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 23, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="7059678068136075101"></a>
    
         
    


    <h3 class="post-title">
	 
	 Top 20 Java technical interview questions and answers for experienced Java developers -- Part 4
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><h2>
Java Interview Questions and Answers</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2013/01/top-20-java-technical-interview.html"> <span style="font-size: large;"><b>1-5 </b></span>for experienced developers </a> </td>

<td><a href="http://java-success.blogspot.com/2014/02/top-20-java-technical-interview.html"><span style="font-size: large;"><b> 6-10</b></span> for experienced developers </a></td>

<td><a href="http://java-success.blogspot.com/2013/05/top-20-java-technical-interview.html"> <span style="font-size: large;"><b>11-16</b></span> for experienced developers </a></td>

<td><a href="http://java-success.blogspot.com/2014/02/top-20-java-technical-interview_23.html"> <span style="font-size: large;"><b>17-20</b></span> for experienced developers </a></td>
</tr>
</tbody></table>
<br/>
<b>Q17</b>. Can you explain singleton and prototype bean scopes in Spring framework? Which one is the default? Which one is thread-safe?<br />
<b>A17</b>. <span style="font-size: large;"><a href="http://java-success.blogspot.com/2014/02/understanding-spring-scopes-singleton.html">Understanding Spring bean scopes - Singleton Vs Protype</a></span><br />
<br />
After Spring, the most popular third-party framework is Hibernate.<br />
<br />
<b>Q18</b>. Can you explain hibernate object states? Also, explain hibernate objects life cycle? <br />
<b>A18.&nbsp;</b><br />
<br />
<b>Persistent objects and collections </b>are short lived single 
threaded objects, which store the persistent state. These objects&nbsp; 
synchronize their state with the database depending on your flush 
strategy (i.e. auto-flush where as soon as setXXX() method is called or 
an item is removed from a Set, List&nbsp; etc or define your own 
synchronization points with session.flush(), transaction.commit() 
calls). If you remove an item&nbsp; from a persistent collection like a Set, 
it will be removed from the database either immediately or when flush() 
or commit() is called depending on your flush strategy. They are Plain 
Old Java Objects (POJOs) and are currently associated with a session. As
 soon as the associated session is closed, persistent objects become 
detached objects and are free to use directly as data transfer objects 
in any application layers like business layer, presentation layer etc.&nbsp;&nbsp;
 <br />
<br />
<b>Detached objects</b> <b>and collections</b> are instances of persistent 
objects that were associated with a session but currently not associated
 with a session. These objects can be freely used as Data Transfer 
Objects without having any impact on your database. Detached objects can
 be later on attached to another session by calling methods like 
session.update(), session.saveOrUpdate() etc. and become persistent 
objects.<br />
<br />
<b>Transient objects and collections</b> are instances of persistent 
objects that were never associated with a session. These objects can be 
freely used as Data Transfer Objects without having any impact on your 
database. Transient objects become persistent objects when associated to
 a session by calling methods like session.save( ), session.persist( )&nbsp; 
etc.<b> </b><br />
<br />
<a href="http://4.bp.blogspot.com/-_lA0YLJzxcQ/ToEVy_EEQoI/AAAAAAAAAEw/1FS7RWeNyHo/s1600/Hibernate_states.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-_lA0YLJzxcQ/ToEVy_EEQoI/AAAAAAAAAEw/1FS7RWeNyHo/s640/Hibernate_states.JPG" /></a>
<br />
<br />
<b>Q19.</b> Why use JAXB in your Java project?<br />
<b>A19</b>. <span style="font-size: large;"><a href="http://java-success.blogspot.com/2013/10/jaxb-interview-questions-and-answers.html">JAXB interview questions and answers</a></span>.<br />
<br />
If the organization you are being interviewed for is using an agile methodology, then you will be probed on agile development practices.<br />
<br />
<b>Q20</b>a. What are the pros and cons of agile development methodology<br />
<b>A20</b>a.&nbsp; <span style="font-size: large;"><a href="http://java-success.blogspot.com/2013/12/pros-and-cons-of-agile-development.html">Pros and cons of agile development methodology</a></span>.<br />
<br />
<b>Q20b</b>. What is the difference between agile theme, epic and story?<br />
<b>A20b</b>. <a href="http://java-success.blogspot.com/2013/09/agile-development-methodology-theme.html">Understanding theme, epic, and story</a><br />
<br />
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Center - Leader board -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3764234023451771"
     data-ad-slot="5678244596"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<br/>
<br/>
<h2>
Java Interview Questions and Answers</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2013/01/top-20-java-technical-interview.html"> <span style="font-size: large;"><b>1-5 </b></span>for experienced developers </a> </td>

<td><a href="http://java-success.blogspot.com/2014/02/top-20-java-technical-interview.html"><span style="font-size: large;"><b> 6-10</b></span> for experienced developers </a></td>

<td><a href="http://java-success.blogspot.com/2013/05/top-20-java-technical-interview.html"> <span style="font-size: large;"><b>11-16</b></span> for experienced developers </a></td>

<td><a href="http://java-success.blogspot.com/2014/02/top-20-java-technical-interview_23.html"> <span style="font-size: large;"><b>17-20</b></span> for experienced developers </a></td>
</tr>
</tbody></table><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Java%20Interview">Java Interview</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Java%20Interview%20Answers">Java Interview Answers</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Java%20Interview%20Questions">Java Interview Questions</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/top-20-java-technical-interview_23.html" title="permanent link"> 2/23/2014 03:21:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/top-20-java-technical-interview_23.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/top-20-java-technical-interview_23.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=7059678068136075101" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=7059678068136075101&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  





  
     
  <!-- Begin .post -->
  <div class="post"><a name="516017791654600562"></a>
    
         
    


    <h3 class="post-title">
	 
	 Top 20 Java technical interview questions and answers for experienced Java developers - part 2
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><h2>
Java Interview Questions and Answers</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2013/01/top-20-java-technical-interview.html"> <span style="font-size: large;"><b>1-5 </b></span>for experienced developers </a> </td>

<td><a href="http://java-success.blogspot.com/2014/02/top-20-java-technical-interview.html"><span style="font-size: large;"><b> 6-10</b></span> for experienced developers </a></td>

<td><a href="http://java-success.blogspot.com/2013/05/top-20-java-technical-interview.html"> <span style="font-size: large;"><b>11-16</b></span> for experienced developers </a></td>

<td><a href="http://java-success.blogspot.com/2014/02/top-20-java-technical-interview_23.html"> <span style="font-size: large;"><b>17-20</b></span> for experienced developers </a></td>
</tr>
</tbody></table>
<br/>
<b>Q</b>6. How would you go about designing a car parking station? <br />
<b>A6</b>. <br />
<br />
<b>Map out the requirements:</b><br />
<ul>
<li>The car park needs to cater for different types of car parks like regular, handicapped, and compact.</li>
<li>It should keep track of empty and filled spaces.</li>
<li>It should also cater for valet parking.</li>
</ul>
<b>Map out the classes that would be required.</b> Use a <a href="http://java-success.blogspot.com/2012/07/uml-diagrams-interview-questions-and.html">UML class diagram.</a> Here are some points to get started.<br />
<ul>
<li>A CarPark class to represent a parking station.</li>
<li>A ParkingSpace can be an abstract class or an interface to represent a parking space, and RegularParkingSpace, HandicappedParkingSpace, CompactParkingSpace, etc are subtypes of a ParkingSpace. This means a RegularParkingSpace <span style="font-size: large;"><b>is a </b></span>ParkingSpace.</li>
<li>A CarPark <span style="font-size: large;"><b>has a</b></span> (i.e. composition) finite number of ParkingSpaces. A CarPark also keeps track of all the parking spaces and a separate list of all the vacant parking spaces.</li>
<li>A Vehicle class <span style="font-size: large;"><b>uses a</b></span> (i.e. delegation) ParkingSpace.&nbsp; The Vehicle class will hold attributes using enum classes like&nbsp; VehicleType and ParkingType. The vehicle types could be Compact, Regular, and Handicapped. The parking types could be Self or Valet. Depending on the requirements, the self or valet types could be designed as subtypes of the Vehicle class. </li>
</ul>
<br />
<br />
<b>Q7</b>: Can you design the classes that represent a restaurant? <br />
<b>A7</b>: Very popular. Good understanding of <b>OO design</b> is vital to job interview success. Learn the <b>SOLID </b>design principles, know why you<b> favor composition over inheritance</b>, and<b> don't under estimate the power of coding to interface</b>. <br />
<ul>
<li><span style="font-size: large;"><a href="http://java-success.blogspot.com/2011/09/java-oo-interview-questions-and-answers.html">Java OO Interview Questions and Answers</a>.</span> A step-by-step tutorial explaining how you would go about designing your classes. The "Core Java Career Essentials" PDF covers more examples on SOLID design principles with working code.</li>
</ul>
<br />
How would you go about identifying <b>thread safety issues</b> in an application? How would you go about identifying <b>memory leaks</b> issues? How would you go about identifying <b>performance issues</b>?, etc to judge your experience. I am yet to work on a project that didn't face problems relating to 
thread safety, memory leaks, and performance issues. Hence, it really 
pays to market your skills and experience in fixing issues relating to 
these common challenges. <br />
<br />
<br />
<b>Q8</b>. How will you go about fixing memory leaks in Java?<br />
<b>A8</b>. Again, a very common problem, and a thorough answer will go a long way in securing your next Java job.<br />
<ul>
<li><span style="font-size: large;"><a href="http://java-success.blogspot.com/2012/05/memory-leak-in-java.html">Detecting and fixing memory leak issues in Java</a></span>. Tools and techniques to detect memory leaks in Java.</li>
<li><span style="font-size: large;"><a href="http://java-success.blogspot.com/2012/05/java-memory-profiling-questions-and.html">Memory profiling in Java</a></span>. Tutorial on memory profiling a Java application. </li>
</ul>
<br />
<b>Q9</b>: How will you go about fixing performance issues in Java?<br />
<b>A9</b>:<br />
<ul>
<li><span style="font-size: large;"><a href="http://java-success.blogspot.com/2012/05/java-performance-questions-and-answers.html">Detecting performance issues in Java</a></span>. A basic tutorial covering -- how to detect performance issues.</li>
<li>Also, refer to the JMeter tutorials in this blog as to learn how you can put load on your application to simulate concurrent users. </li>
</ul>
<br />
<b>Q10</b>: How will you go about detecting and fixing thread-safety issues in Java?<br />
<b>A10</b>: Debugging concurrency issues and fixing any <b>thread starvation,</b> <b>dead lock</b>, and <b>contention </b>requires skills and experience to identify and reproduce these hard to resolve issues. Here are some techniques to detect concurrency issues.<br />
<ul>
<li>Manually reviewing the code for any obvious thread-safety issues. There are static analysis tools like Sonar, ThreadCheck, etc for catching concurrency bugs at compile-time by analyzing their byte code.</li>
</ul>
<ul>
<li>List all possible causes and add extensive log statements and write test cases to prove or disprove your theories.</li>
</ul>
<ul>
<li>Thread dumps are very useful for diagnosing synchronization problems such as deadlocks. The trick is to take 5 or 6 sets of thread dumps at an interval of 5 seconds between each to have a log file that has 25 to 30 seconds worth of runtime action. For thread dumps, use kill -3 <pid> in Unix and CTRL+BREAK in Windows. There are tools like Thread Dump Analyzer (TDA), Samurai, etc. to derive useful information from the thread dumps to find where the problem is. For example, Samurai colors idle threads in grey, blocked threads in red, and running threads in green. You must pay more attention to those red threads. </pid></li>
</ul>
<ul>
<li>There are tools like JDB (i.e. Java DeBugger) where a “watch” can be set up on the suspected variable. When ever the application is modifying that variable, a thread dump will be printed.</li>
</ul>
<ul>
<li>There are dynamic analysis tools like jstack and JConsole, which is a JMX compliant GUI tool to get a thread dump on the fly. The JConsole GUI tool does have handy features like “detect deadlock” button to perform deadlock detection operations and ability to inspect the threads and objects in error states. Similar tools are available for other languages as well.</li>
</ul>
<br />
<b>Q</b>. What is the difference between mutex and semaphores? What problem do they solve?<br />
<b>A</b>. <br />
<br />
<b>Example 1</b>: A trading system creates a buy order and places it in a 
queue, and a separate consumer thread picks up the order and sends it to
 the <span class="IL_AD" id="IL_AD3">stock exchange</span>. A typical producer and consumer scenario.<br />
<br />
<b>Example 2</b>: If you want to recursively traverse through nested folders 
and spawn a number of worker threads to move the html files found to a 
destination folder and increment the semaphore permits with a release( ) 
method call. A separate thread will wait with the 
acquire(numberOfPermits) to acquire all the released permits before 
start archiving (i.e. zipping up) those files. <br />
<br />
<b>Example 3</b>: A counter that keeps track of the number of active logged in users by 
incrementing the count when users log in and decrementing the count when
 the users log out.<br />
<br />
<span style="font-size: small;"><a href="http://java-success.blogspot.com/2012/03/java-multi-threading-interview.html">Mutex and semaphores are used to solve producer and consumer synchroniztion</a> scenarios outline above..&nbsp; </span><br />
<br />
<b>Q</b>. Can you write code to demonstrate deadlock in Java? <br />
<b>A</b>. <span style="font-size: large;"><a href="http://java-success.blogspot.com/2012/03/java-multi-threading-interview.html">Creating a deadlock in Java</a></span><br />
<br />
<b>Q</b>. Can you give some examples of thread racing conditions you had experienced?<br />
<b>A</b>. <span style="font-size: large;"><a href="http://java-success.blogspot.com/2012/03/java-multi-threading-interview.html">Thread racing conditions and atomic operations.&nbsp;</a></span><br />
<br />
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Center - Large Rectangle -->
<br />
<ins class="adsbygoogle" data-ad-client="ca-pub-3764234023451771" data-ad-slot="1845819831" style="display: inline-block; height: 280px; width: 336px;"></ins><script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<br />
<br/>
<h2>
Java Interview Questions and Answers</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2013/01/top-20-java-technical-interview.html"> <span style="font-size: large;"><b>1-5 </b></span>for experienced developers </a> </td>

<td><a href="http://java-success.blogspot.com/2014/02/top-20-java-technical-interview.html"><span style="font-size: large;"><b> 6-10</b></span> for experienced developers </a></td>

<td><a href="http://java-success.blogspot.com/2013/05/top-20-java-technical-interview.html"> <span style="font-size: large;"><b>11-16</b></span> for experienced developers </a></td>

<td><a href="http://java-success.blogspot.com/2014/02/top-20-java-technical-interview_23.html"> <span style="font-size: large;"><b>17-20</b></span> for experienced developers </a></td>
</tr>
</tbody></table><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Java%20Interview">Java Interview</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Java%20Interview%20Answers">Java Interview Answers</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Java%20Interview%20Questions">Java Interview Questions</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/top-20-java-technical-interview.html" title="permanent link"> 2/23/2014 02:37:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/top-20-java-technical-interview.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/top-20-java-technical-interview.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=516017791654600562" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=516017791654600562&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 20, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="7859896109007633931"></a>
    
         
    


    <h3 class="post-title">
	 
	 Database interview questions - triggers
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>The post entitled<a href="http://java-success.blogspot.com/2012/02/database-interview-questions-and.html">&nbsp;<span style="font-size: large;">Database interview questions and answers</span></a><span style="font-size: large;"> </span>covered some trigger based questions like<br />
<ul>
<li>When to not use a trigger?</li>
<li>Where to use a trigger?</li>
</ul>
<div>
<div>
Triggers give you control <b>just before data is changed and just after the data is changed</b>. This allows for:</div>
<div>
<ul>
<li>Auditing.&nbsp;</li>
<li>Validation and business security checking if so is desired. Because of this type of control, you can do tasks such as column formatting before and after inserts into database.</li>
</ul>
</div>
</div>
<div>
<br /></div>
<div>
In this post, I will give an example of a trigger SQL code for Sybase database.<br />
<br />
The following trigger compares the <i>ReportForecastId</i> values from the inserted table with those from the <i>ReportForecast</i> table. When you insert a new foreign key row, make sure the foreign key matches a primary key. The trigger should check for joins between the inserted rows (using the inserted table) and the rows in the primary key table, and then roll back any inserts of foreign keys that do not match a key in the primary key table.<br />
<br />
<br /></div>
<!-- INFOLINKS_OFF -->

<br />
<pre class="brush: csharp">use my_schema
go

setuser 'dbo'
go

IF OBJECT_ID('dbo.ReportForecast_I') IS NOT NULL
BEGIN
    DROP TRIGGER dbo.ReportForecast_I
    IF OBJECT_ID('dbo.ReportForecast_I') IS NOT NULL
        PRINT '&lt;&lt;&lt; FAILED DROPPING TRIGGER dbo.ReportForecast_I &gt;&gt;&gt;'
    ELSE
        PRINT '&lt;&lt;&lt; DROPPED TRIGGER dbo.ReportForecast_I &gt;&gt;&gt;'
END
go

CREATE TRIGGER ReportForecast_I ON ReportForecast FOR INSERT AS

BEGIN
 DECLARE  @numrows int,
  @nullcnt int,
  @validcnt int,
  @insReportForecastId numeric(9,0),
  @errno   int,
  @errmsg  varchar(255),
  @ValidateCode CdStd

 SELECT @numrows = @@rowcount
 SELECT @errno = @@error      

 IF @numrows = 0
  RETURN
 /* Sybase bug allows triggers to be called after error - we rollback */
 IF @errno!=0
 BEGIN
  SELECT @errno = 997
  SELECT @errmsg = " should not have fired. Rollback"
  GOTO error
 END /* of Header */

 /***** Start of MAIN BODY *****/ 

 /* All Code Table Validations Go Here*/ 

 /* All Parent-Child Relationship Checks Go Here */ 
 
 
 


 /* Now, Depending on what operation we are going to perform we will differentiate between them like
 ** 'I' for inssert, 'U'  for update, and 'D' for delete . The audits are essentially the same but there
    */
 IF OBJECT_ID('mydb..ReportForecast_Audit') IS NOT NULL
 BEGIN 
  INSERT INTO mydb..ReportForecast_Audit (
   Audit_ModifiedDtTm,
   Audit_ModifiedBy,
   Audit_OperationType,
   ReportForecastId, 
   InactiveFlag, 
   CreatedDtTm, 
   ModifiedDtTm, 
   ModifiedBy, 
   Timestamp)
  SELECT getdate(), 
   suser_name(),
   'I',
   ReportForecast.ReportForecastId, 
   ReportForecast.InactiveFlag, 
   ReportForecast.CreatedDtTm, 
   ReportForecast.ModifiedDtTm, 
   ReportForecast.ModifiedBy, 
   ReportForecast.Timestamp
  FROM ReportForecast, inserted
  WHERE ReportForecast.ReportForecastId = inserted.ReportForecastId

  SELECT @validcnt = @@rowcount, @errno = @@error
  IF @validcnt != @numrows or @errno != 0
  BEGIN
   SELECT @errno = 998
   SELECT @errmsg = 'Error writing to audit table (ReportForecast_Audit).'
   GOTO error
  END  
 END 
 
 
 
 RETURN
error:
 SELECT @errmsg = 'ReportForecast_I: ' + @errmsg
     RAISERROR @errno @errmsg
     ROLLBACK TRANSACTION
END
go
IF OBJECT_ID('dbo.ReportForecast_I') IS NOT NULL
    PRINT '&lt;&lt;&lt; CREATED TRIGGER dbo.ReportForecast_I &gt;&gt;&gt;'
ELSE
    PRINT '&lt;&lt;&lt; FAILED CREATING TRIGGER dbo.ReportForecast_I &gt;&gt;&gt;'
go

setuser
go

</pre>
<br />
<br />
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Center - Large Rectangle -->
<br />
<ins class="adsbygoogle" data-ad-client="ca-pub-3764234023451771" data-ad-slot="1845819831" style="display: inline-block; height: 280px; width: 336px;"></ins><script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Database">Database</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/database-interview-questions-triggers.html" title="permanent link"> 2/20/2014 09:56:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/database-interview-questions-triggers.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/database-interview-questions-triggers.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=7859896109007633931" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=7859896109007633931&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 19, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="1731205628871197129"></a>
    
         
    


    <h3 class="post-title">
	 
	 Spring lookup-method injection to inject prototype scoped bean into a singleton bean
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>This post extends <a href="http://java-success.blogspot.com.au/2014/02/tutorial-understanding-spring-scopes.html"><span style="font-size: large;">Tutorial to understand Spring scopes -- singleton Vs prototype</span></a>.<br />
<br />
<b>Step 0: </b>You need <b>asm </b>and <b>cgilib </b>libraries in addition to Spring libraries.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-2hRgVC4l4GM/Uv1033vaIDI/AAAAAAAAB9A/ggXkGLzBf9I/s1600/Spring-lookup-method.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-2hRgVC4l4GM/Uv1033vaIDI/AAAAAAAAB9A/ggXkGLzBf9I/s1600/Spring-lookup-method.jpg" height="184" width="320" /></a></div>
<br />
<br />
<b>Step 1</b>: define the Dao (Data Access Object) interface.<br />
<br />
<!-- INFOLINKS_OFF -->

<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

public interface MyDao {
 abstract void printData();
}
</pre>
<br />
<b>Step 2</b>: Define the Dao implementation.<br />
<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

public class MyDaoImpl implements MyDao {

 @Override
 public void printData() {
  System.out.println("printing data"); 
  System.out.println(this);
 }
}
</pre>
<br />
<br />
<b>Step 3</b>: Define the service interface.<br />
<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

public interface MyService {
 abstract void performTask();
}
</pre>
<br />
<b>Step 4</b>: Define the service implementation. Note that the class is abstract as Spring will decorate this class with cgilib.<br />
<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

public abstract class MyServiceImpl implements MyService {

 protected abstract MyDao createMyDao();

 @Override
 public void performTask() {
  System.out.println("Performing tasks .............");
  createMyDao().printData();
 }
}
</pre>
<br />
<b>Step 5</b>: The spring context file <b>applicationContext.xml</b> that wires up dao and service. Take note of the "<b><span style="font-size: large;">lookup-method</span></b>".<br />
<br />
<pre class="brush: csharp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt;

    &lt;bean id="myDaoDef" class="com.mycompany.understanding.spring.MyDaoImpl" scope="prototype"/&gt;
    
    &lt;bean id="myServiceDef" class="com.mycompany.understanding.spring.MyServiceImpl" scope="singleton"&gt; 
       &lt;lookup-method name="createMyDao" bean="myDaoDef" /&gt; 
    &lt;/bean&gt;

&lt;/beans&gt;
</pre>
<br />
<b>Step 6</b>: Executable main class.<br />
<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MyMainApp {
 
 public static void main(String[] args) {
  ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");
  for (int i = 0; i &lt;3; i++) {
   MyService service = (MyService) applicationContext.getBean("myServiceDef");
   System.out.println(service);
   service.performTask();
  }
 }
}
</pre>
<br />
<b>Output </b>if you run the above class<br />
<br />
<pre class="brush: csharp">com.mycompany.understanding.spring.MyServiceImpl$$EnhancerByCGLIB$$35dfd4bb@750efc01
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@2ac2e1b1
com.mycompany.understanding.spring.MyServiceImpl$$EnhancerByCGLIB$$35dfd4bb@750efc01
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@606f4165
com.mycompany.understanding.spring.MyServiceImpl$$EnhancerByCGLIB$$35dfd4bb@750efc01
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@282e7f59
</pre>
<br />
<br />
Single instance of service has 3 separate instances of &nbsp;Dao.<br />
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Spring">Spring</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Spring%20core">Spring core</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/spring-lookup-method-injection-to.html" title="permanent link"> 2/19/2014 11:08:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/spring-lookup-method-injection-to.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/spring-lookup-method-injection-to.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=1731205628871197129" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=1731205628871197129&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 17, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="7960138367945130450"></a>
    
         
    


    <h3 class="post-title">
	 
	 Tutorial: Understanding Spring scopes -- Singleton Vs Prototype 
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>This posts extends<span style="font-size: large;">&nbsp;<a href="http://java-success.blogspot.com/2014/02/understanding-spring-scopes-singleton.html">Understanding Spring scopes -- Singleton Vs Prototype</a>.</span><br />
<br />
<b>Step 0</b>: Spring Jar files required. You can use maven or download and add to the classpath.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-PsISHa7u758/UvxDzqpWhLI/AAAAAAAAB8s/nI4zv2zEpqE/s1600/spring-scopes.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-PsISHa7u758/UvxDzqpWhLI/AAAAAAAAB8s/nI4zv2zEpqE/s1600/spring-scopes.jpg" height="185" width="320" /></a></div>
<br />
<br />
<b>Step 1</b>: Define the Java interface for Dao class.<br />
<br />
<!-- INFOLINKS_OFF -->

<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

public interface MyDao {
 abstract void printData();
}
</pre>
<br />
<br />
<b>Step 2</b>: Define the Dao implementation.<br />
<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

public class MyDaoImpl implements MyDao {

 @Override
 public void printData() {
  System.out.println("printing data"); 
  System.out.println(this);
 }

}
</pre>
<br />
<b>Step 3</b>: Define the Service interface.<br />
<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

public interface MyService {
 abstract void performTask();
}
</pre>
<br />
<b>Step 4</b>: &nbsp;Define the Service implementation into which the Dao implementation gets injected.<br />
<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

public class MyServiceImpl implements MyService {

 private MyDao myDao;
 
 public MyServiceImpl(MyDao myDao) {
  this.myDao = myDao;
 }

 @Override
 public void performTask() {
  System.out.println("Performing tasks .............");
  myDao.printData();
 }
}

</pre>
<br />
<br />
<div style="text-align: center;">
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Center - Medium Rectangle -->
<br />
<ins class="adsbygoogle" data-ad-client="ca-pub-3764234023451771" data-ad-slot="6223817039" style="display: inline-block; height: 250px; width: 300px;"></ins><script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<br />
<br />
<b>Step 5</b>: Use Spring context file &nbsp;<b>applicationContext.xml</b> to wire up the dependencies. Note that both beans are defined as singleton, which is the default.<br />
<br />
<pre class="brush: csharp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt;

    &lt;bean id="myDaoDef" class="com.mycompany.understanding.spring.MyDaoImpl" scope="singleton"/&gt;
    
    &lt;bean id="myServiceDef" class="com.mycompany.understanding.spring.MyServiceImpl" scope="singleton"&gt; 
       &lt;constructor-arg name="myDao" ref="myDaoDef" /&gt; 
    &lt;/bean&gt;

&lt;/beans&gt;
</pre>
<br />
<br />
<b>Step 6</b>: &nbsp;The runnable main class. The <b>applicationContext.xml </b>is bootstrapped here.<br />
<br />
<pre class="brush: csharp">package com.mycompany.understanding.spring;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MyMainApp {
 
 public static void main(String[] args) {
  ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");
  for (int i = 0; i &lt;3; i++) {
   MyService service = (MyService) applicationContext.getBean("myServiceDef");
   System.out.println(service);
   service.performTask();
  }
 }
}
</pre>
<br />
<b>Step 7</b>: Running the main class and comparing the results with different scopes. The for loop was created to instantiate more than one bean. Look at the memory address of the beans printed to see how many instances are created.<br />
<br />
<span style="font-size: large;">1.When both beans are singleton:</span><br />
<br />
<pre class="brush: csharp">com.mycompany.understanding.spring.MyServiceImpl@7188eb7
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@5d419404
com.mycompany.understanding.spring.MyServiceImpl@7188eb7
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@5d419404
com.mycompany.understanding.spring.MyServiceImpl@7188eb7
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@5d419404
</pre>
<br />
Only MyDaoImpl@5d419404 and MyServiceImpl@7188eb7 are created.
<br />
<span style="font-size: large;"><br /></span>
<span style="font-size: large;">2. When both beans are prototypes: </span>now change both scopes to "prototype" in the&nbsp;<b>applicationContext.xml </b>and retrun<b>.</b><br />
<br />
<pre class="brush: csharp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt;

    &lt;bean id="myDaoDef" class="com.mycompany.understanding.spring.MyDaoImpl" scope="prototype"/&gt;
    
    &lt;bean id="myServiceDef" class="com.mycompany.understanding.spring.MyServiceImpl" scope="prototype"&gt; 
       &lt;constructor-arg name="myDao" ref="myDaoDef" /&gt; 
    &lt;/bean&gt;

&lt;/beans&gt;
</pre>
<br />
<br />
You can see <b>3 instances</b> of service and <b>3 instances</b> of Dao are created.
<br />
<br />
<pre class="brush: csharp">com.mycompany.understanding.spring.MyServiceImpl@64c53235
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@4e636942
com.mycompany.understanding.spring.MyServiceImpl@8dc488c
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@361ee3df
com.mycompany.understanding.spring.MyServiceImpl@2602613b
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@663d7bfb
</pre>
<br />
<br />
<span style="font-size: large;">3. When Service bean is singleton and Dao bean is prototype</span><br />
<br />
<pre class="brush: csharp">com.mycompany.understanding.spring.MyServiceImpl@7188eb7
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@5d419404
com.mycompany.understanding.spring.MyServiceImpl@7188eb7
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@5d419404
com.mycompany.understanding.spring.MyServiceImpl@7188eb7
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@5d419404
</pre>
<br />
<br />
You can only see 1 instance of service bean and 1 instance of prototype bean. This is not desired as in some scenarios you want to create new prototype bean again and again. This is where<b><span style="font-size: large;"> lookup-method </span></b>comes in handy.<br />
<br />
<span style="font-size: large;">4. When Service bean is prototype and Dao bean is singleton.</span><br />
<br />
<pre class="brush: csharp">com.mycompany.understanding.spring.MyServiceImpl@5d419404
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@7c5cc270
com.mycompany.understanding.spring.MyServiceImpl@528f1577
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@7c5cc270
com.mycompany.understanding.spring.MyServiceImpl@2fca61f9
Performing tasks .............
printing data
com.mycompany.understanding.spring.MyDaoImpl@7c5cc270
</pre>
<br />
<br />
You can see 3 instances of the service beans and only 1 instance of the dao bean. Simple examples like this can clarify the concepts.
<br />
<br />
Scenario 3 is not desired as in some scenarios, and you want to create new prototype bean again and again. This is where<b>&nbsp;lookup-method<span style="font-size: large;">&nbsp;</span></b>comes in handy. I will cover this in the next post.<br />
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Spring">Spring</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Spring%20core">Spring core</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/tutorial-understanding-spring-scopes.html" title="permanent link"> 2/17/2014 11:12:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/tutorial-understanding-spring-scopes.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/tutorial-understanding-spring-scopes.html#comment-form;><span style="text-transform:lowercase">2 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=7960138367945130450" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=7960138367945130450&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 13, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="1548105700100577241"></a>
    
         
    


    <h3 class="post-title">
	 
	 Understanding Spring scopes -- Singleton Vs Prototype
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><h2>
Spring Interview Questions and Answers  Q1 - Q14 are FAQs</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2011/10/spring-interview-questions-and-answers.html"> <span style="font-size: normal;">Q1 - Q4 Overview &amp; DIP</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/11/spring-interview-questions-and-answers.html"> <span style="font-size: normal;">Q5 - Q8 DI &amp; IoC</span></a> </td>
<td><a href="http://java-success.blogspot.com.au/2014/02/understanding-spring-scopes-singleton.html"> <span style="font-size: normal;">Q9 - Q10 Bean Scopes</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/06/spring-architecture-and-understanding.html"> <span style="font-size: normal;">Q11 Packages</span></a> </td>
<td><a href="http://java-success.blogspot.com.au/2014/05/understanding-openclosed-principle-ocp.html"> <span style="font-size: normal;">Q12 Principle OCP</span></a> </td>
<td colspan="2"><a href="http://java-success.blogspot.com/2014/06/java-aop-with-aopalliance-method.html"> <span style="font-size: normal;">Q14 AOP and interceptors</span></a> </td>
</tr>
<tr>
<td><a href="http://java-success.blogspot.com/2011/11/spring-interview-questions-and-answers_30.html"> <span style="font-size: normal;">Q15 - Q16 Hibernate &amp; Transaction Manager</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/01/hibernate-interview-q-with-annotations.html"> <span style="font-size: normal;">Q17 - Q20 Hibernate &amp; JNDI</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/11/spring-interview-questions-and-answers_29.html"> <span style="font-size: normal;">Q21 - Q22 read properties</span></a> </td>
<td><a href="http://java-success.blogspot.com/2011/12/spring-interview-questions-and-answers.html"> <span style="font-size: normal;">Q23 - Q24 JMS &amp; JNDI</span></a> </td>
<td><a href="http://java-success.blogspot.com/2013/02/spring-jdbc-template-examples-calling.html"> <span style="font-size: normal;">Q25 JDBC</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/11/jsonp-and-jquery-with-spring-mvc.html"> <span style="font-size: normal;">Q26 Spring MVC</span></a> </td>
<td><a href="http://java-success.blogspot.com/2013/03/spring-mvc-view-resolvers.html"> <span style="font-size: normal;">Q27 - Spring MVC Resolvers</span></a> </td>
</tr>
</tbody></table>
<br />
You will be hard pressed to find a Java project that does not use Spring, hence it pays to know its fundamentals. These questions and answers on Spring scopes are often asked in good job interviews.<br />
<b><br /></b>
<b>Q.</b> Does Spring dependency injection happen during compile time or runtime?<br />
<b>A</b>. Runtime during creating an object.<br />
<br />
<b>Q</b>9. What is the difference between prototype scope and singleton scope? Which one is the default?<br />
<b>A</b>9. Singleton means single bean instance per <b>IoC </b>container, and prototype means any number of object instances per <b>IoC </b>container. The default scope is "singleton".<br />
<br />
<b>Q</b>. When will you use singleton scope? When will you use prototype scope?<br />
<b>A</b>. <b>Singleton </b>scope is used for stateless object use. For example, injectiong a DAO (i.e. Data Access Object) into a service object. DAOs don't need to maintain conversation state. For example,<br />
<br />
<!-- INFOLINKS_OFF -->

<br />
<pre class="brush: csharp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt;

    &lt;bean id="myDaoDef" class="com.mycompany.understanding.spring.MyDaoImpl" scope="singleton"/&gt;
    
    &lt;bean id="myServiceDef" class="com.mycompany.understanding.spring.MyServiceImpl" scope="singleton"&gt; 
       &lt;constructor-arg name="myDao" ref="myDaoDef" /&gt; 
    &lt;/bean&gt;

&lt;/beans&gt;
</pre>
<br />
<br />
<div>
<b>Prototype </b>is useful when your objects maintain state in a multi-threaded environment. Each thread needs to use its own object and cannot share the single object. For example, you might hava a RESTFul web service client making multi-threaded calls to Web services. The REST easy client APIs like RESTEasy uses the Apache Connection manager which is not thread safe and each thread should use its own client. Hence, you need to use the prototype scope.<br />
<br />
<b>Q. </b>Would both singleton and prototype bean's life cycle be managed by the Spring IoC container?<br />
<b>A</b>. Yes and no. The singleton bean's complete life cycle will be managed by Spring IoC container, but with regards to prototype scope, IoC container only partially manages the life cycle - instantiates, configures, decorates and otherwise assembles a prototype object, hands it to the client and then has no further knowledge of that prototype instance. As per the spring documentation<br />
<br />
"This means that while initialization lifecycle callback methods will be called on all objects regardless of scope, in the case of prototypes, any configured destruction lifecycle callbacks will not be called. It is the responsibility of the client code to clean up prototype scoped objects and release any expensive resources that the prototype bean(s) are holding onto."<br />
<br />
<b>Q</b>. What happens if you inject a prototype scoped bean into a singleton scoped bean?<br />
<b>A</b>. A new prototype scoped bean will be injected into a singleton scoped <b><u>bean once at runtime</u></b>, and the same prototype bean will be used by the singleton bean.<br />
<br /></div>
<div>
<b>Q</b>. What if you want the singleton scoped bean to be able to acquire a brand new instance of the prototype-scoped bean <b>again and again at runtime</b>?<br />
<b>A</b>. In this &nbsp;use-case, there is no use in just dependency injecting a prototype-scoped bean into your singleton bean, because as stated above, this only happens once when the Spring container is instantiating the singleton bean and resolving and injecting its dependencies. You can just inject a singleton (e.g. a factory) bean and then use Java class to instantiate (e.g with a newInstance(...) or create(..) method) <b>a new bean again and again at runtime </b>without relying on Spring or alternatively have a look at Spring's "<span style="font-size: large;"><b>method injection</b></span>". As per Spring documentation for "<b><span style="font-size: large;">Lookup method injection</span></b>"<br />
<br />
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Center - Leader board -->
<br />
<ins class="adsbygoogle" data-ad-client="ca-pub-3764234023451771" data-ad-slot="5678244596" style="display: inline-block; height: 90px; width: 728px;"></ins><script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<br/>
<br />
"Lookup method injection refers to the ability of the container to override methods on container managed beans, to return the result of looking up another named bean in the container. The lookup will typically be of a prototype bean as in the scenario described above. The Spring Framework implements this method injection by dynamically generating a subclass overriding the method, using bytecode generation via the CGLIB library."<br />
<br />
<br />
<b>Q10.</b> What are the scopes defined in HTTP context?<br />
<b>A10</b>. Following scopes are only valid in the context of a<b> web-aware Spring ApplicationContext</b>.<br />
<br />
<ul>
<li><b>request Scope</b> is for a single bean definition to the lifecycle of a single HTTP request.In other words each and every HTTP request will have its own instance of a bean created off the back of a single bean definition.&nbsp;</li>
<li><b>session Scope</b> is for a single bean definition to the lifecycle of a HTTP Session.&nbsp;</li>
<li><b>global session Scope</b> is for a &nbsp;single bean definition to the lifecycle of a global HTTP Session. Typically only valid when used in a portlet context.&nbsp;</li>
</ul>
<div>
<br />
<b>Q</b>. Does Spring allow you to define your own bean scopes?<br />
<b>A</b>. Yes, from Spring 2.0 onwards you can define custom scopes. For example,<br />
<ul>
<li>You can define a ThreadOrRequest and ThreadOrSession scopes to be able to switch between the environment you run in like JUnit for testing and Servlet container for running as a Web application.&nbsp;</li>
<li>You can write a custom scope to inject stateful objects into singleton services or factories.</li>
<li>You can write a custom bean scope that would create new instances per each JMS message consumed</li>
<li>Oracle Coherence has implemented a datagrid scope for Spring beans. You will find many others like this.</li>
</ul>
<br />
<br />
In the next post, I will demonstrate "singleton" and prototype scopes with tutorial like code, Stay tuned.</div>
</div>
<br />
<span style="font-size: large;"><b>Relevant tutorials:</b></span><br />
<ul>
<li><a href="http://java-success.blogspot.com/2014/02/tutorial-understanding-spring-scopes.html">Tutorial: Understanding Spring scopes -- Singleton Vs Prototype</a></li>
<li><a href="http://java-success.blogspot.com/2014/02/spring-lookup-method-injection-to.html">Tutorial: Spring lookup method</a></li>
</ul>
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Spring">Spring</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Spring%20core">Spring core</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/understanding-spring-scopes-singleton.html" title="permanent link"> 2/13/2014 12:00:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/understanding-spring-scopes-singleton.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/understanding-spring-scopes-singleton.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=1548105700100577241" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=1548105700100577241&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 11, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="7161112402899349317"></a>
    
         
    


    <h3 class="post-title">
	 
	 Dynamically generating "insert" SQL statments
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>There are times where you need to generate "INSERT" SQL statements from existing data. For example, you may have a production release ready "Delete" SQL statement as shown below to remove some existing records.<br />
<br />
<!-- INFOLINKS_OFF-->

<br />
<pre class="brush: csharp">Delete from employee_table WHERE first_name like ('P%')
</pre>
<br />
For this script, you need to have a <b>rollback </b>script. It can be dynamically generated as shown below.<br />
<br />
<pre class="brush: csharp">SELECT 'INSERT INTO employee_table ( first_name, surname, birth_date, created_date, updated_by) VALUES (' 
|| '''' || first_name || ''' '
|| ',''' || surname || ''' '
|| ',''' || convert(CHAR(20),birth_date) || ''' '
|| ',''' || convert(CHAR(20),created_date) || ''' '
|| ',''' || updated_by || ''' '
FROM employee_table  WHERE first_name like ('P%')
<br/>
</pre>
<br />
Alternatively, there are database management tools like TOAD, DBArtisan, SQL Developer, etc that allows you to generate SQL statements from the selected records. At times those generated insert statements need to be massaged like removing the auto generated <i>primary key ids,</i> <i>timestamp</i>, &nbsp;etc. You can make the changes in <b>Notepad++ </b><b>Find/Replace </b>with regular expression feature. For example, the following generated insert statement<br />
<br />

<br/>
<pre class="brush: csharp">INSERT INTO employee_table (emp_id, first_name, surname, birth_date, created_date, updated_by, timestamp)
   VALUES ( 1365, 'Peter', 'Smith', '03 Dec 1950', '03 Jun 2013 11:15:59.456 AM', 'user1', 0x0000090209F4A6E6)
</pre>
<br />
can be modified with the following regular expressions<br />
<br />
<b>For: &nbsp; emp_id</b><br />
<br />
<pre class="brush: csharp">
Find: \(\s* emp_id,<br />
Replace with: (<br />
</pre>
<br />
<pre class="brush: csharp">
Find: VALUES\s*\(\s*\d+,<br />
Replace with: VALUES (<br />
</pre>
<br />
<br />
<b>For: &nbsp;timestamp</b><br />
<br />
<pre class="brush: csharp">
Find: ,timestamp
Replace with:
</pre>
<br/>
<br/>
<pre class="brush: csharp">
Find:0x[0-9A-G]+,<br />
Replace with:
</pre><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/SQL">SQL</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/dynamically-generating-insert-sql.html" title="permanent link"> 2/11/2014 09:03:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/dynamically-generating-insert-sql.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/dynamically-generating-insert-sql.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=7161112402899349317" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=7161112402899349317&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Feb 4, 2014</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="6364297954600428215"></a>
    
         
    


    <h3 class="post-title">
	 
	 Transaction management in SQL -- Sybase example
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Top - Leader board -->
<br />
<ins class="adsbygoogle" data-ad-client="ca-pub-3764234023451771" data-ad-slot="4890304945" style="display: inline-block; height: 90px; width: 728px;"></ins><script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<br />
<br />
You may also like:<br />
<ul>
<li><a href="http://java-success.blogspot.com/2013/11/common-hibernate-mistakes-accessing.html">Common Hibernate mistakes - accessing objects outside of a transaction</a></li>
<li><a href="http://java-success.blogspot.com/2011/10/sql-interview-questions-and-answers.html">SQL Interview Questions and Answers</a></li>
</ul>
<b><br /></b>
<b>Q</b>. How do you perform transaction management in SQL stored procedures?<br />
<b>A</b>. Handled with <b>begin</b>, <b>commit</b>, and <b>rollback '</b>tran'&nbsp;commands in <b><i>Sybase </i></b>server.<br />
<br />
<b>Q</b>. Why is it important?<br />
<b>A</b>. It is important to leave the database in a consistent state.<br />
<br />
<b>Q</b>. Can you give an example?<br />
<b>A</b>. For example, as demonstrated below, if you are going to delete 21 records from a database table, you can use transaction management to ensure that a GIVEN COUNT say 21 records are either deleted or rolled back. Partially deleting records can leave the database &nbsp;in inconsistent state.<br />
<br />
<!-- INFOLINKS_OFF -->

<br />
<pre class="brush: csharp">print 'Before delete from employee_table'
print '-------------------------------'

DECLARE  @EMPLOYEE_IN_CLAUSE  varCHAR(10000)
Select @EMPLOYEE_IN_CLAUSE = "'John', 'Joseph'"

exec ('select * from semployee_table where first_name in (' +  @EMPLOYEE_IN_CLAUSE +  '))
exec ('select count(*) as deleted_transact_records_count from employee_table where first_name in (' +  @EMPLOYEE_IN_CLAUSE + ') )

declare @rowcount int
select  @rowcount = 0

--transaction starts
begin tran

--Deletion
print 'delete some records from employee_table'
exec ('delete from sd_wrap..employee_table where first_name in (' +  @EMPLOYEE_IN_CLAUSE + ') and bean_name = ''TransactDetail''')

--number of rows deleted
select @rowcount = @rowcount + @@rowcount

--commit or rollback
if @rowcount = 21
begin
   commit tran
   print 'success'
end
else
begin
   rollback tran
   print 'failed'
end


print 'After delete from employee_table'
print '-------------------------------'

exec ('select * from employee_table where first_name in (' +  @EMPLOYEE_IN_CLAUSE +  '))
exec ('select count(*) as deleted_transact_records_count from sd_wrap..employee_table where first_name in (' +  @EMPLOYEE_IN_CLAUSE + ') )

go

</pre>
<br />
In Sybase, @@rowcount variable returns the number of rows affected by the query. This post also demonstrates a production ready script with proper print statements, transaction management, etc to perform a basic DELETE operation. Same thing is true for insert and update operations.<br />
<br />
<b>Q</b>. Do you require any other script if the above deletion causes unexpected &nbsp;issue?<br />
<b>A</b>. Yes, you need a rollback script with 21 insert statements to revert the changes. In other words script to put the deleted data back.<br />
<br />
<b>Q</b>. Is there a smarter way to generate the insert script or will you type them in one by one?<br />
<b>A</b>. There is a smarter way using a select statement to generate all the 21 insert statements with the following query.
<br />
<br />
<pre class="brush: csharp">SELECT 'INSERT INTO employee_table ( first_name, surname, salary) VALUES (' 
|| '''' || fist_name || ''' '
|| ',''' || surname || ''' '
|| ',''' || salary 

|| ')'

FROM employee_table 
WHERE first_name in ('John', 'Joseph');
</pre>
<br />
Another <span style="font-size: large;"><a href="http://java-success.blogspot.com/2013/06/excel-spreadsheet-to-generate-sql.html">SQL generation tip with Excel spreadsheet.</a></span><br />
<br />
You may also like:<br />
<br />
<ul>
<li><a href="http://java-success.blogspot.com/2013/11/common-hibernate-mistakes-accessing.html">Common Hibernate mistakes - accessing objects outside of a transaction</a></li>
<li><a href="http://java-success.blogspot.com/2011/10/sql-interview-questions-and-answers.html">SQL Interview Questions and Answers</a></li>
</ul>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/SQL">SQL</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/TransactionMgmt">TransactionMgmt</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2014/02/transaction-management-in-sql-sybase.html" title="permanent link"> 2/04/2014 09:25:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2014/02/transaction-management-in-sql-sybase.html#comment-form"location.href=http://java-success.blogspot.com/2014/02/transaction-management-in-sql-sybase.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=6364297954600428215" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=6364297954600428215&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
   

</div></div>
<!-- End #main -->







<!-- Begin #sidebar -->
<div id="sidebar"><div id="sidebar2">

  
  
  <h2 class="sidebar-title">Previous Posts</h2>
    <ul id="recently">
    
        <li><a href="http://java-success.blogspot.in/2014/11/are-you-java-beginner-why-good-java.html">Are you a Java beginner? Why good Java developers ...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/11/java-exception-handling-beginner.html">Java exception handling beginner mistakes and best...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/11/unix-interview-questions-and-answers.html">Unix Interview Questions and Answers for Java deve...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/debugging-and-working-like-pro-with.html">Debugging and working  like a pro with a Java appl...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/yammer-metrics-to-monitor-restful-web_22.html">Yammer metrics to monitor RESTful web services and...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/when-to-use-which-java-collection-or.html">When to use which Java collection or data structur...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2011/09/how-to-prepare-for-javajee-job.html">How to prepare or train for Java and JEE Job Inter...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/yammer-metrics-to-monitor-restful-web.html">Yammer metrics to monitor RESTful web services wit...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/09/monitoring-and-gathering-statistics.html">Monitoring and gathering statistics with JMX based...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/08/what-are-different-ways-java-thread.html">What are the different ways a Java thread gets blo...</a></li>
     
  </ul>
  
  
  
  <h2 class="sidebar-title">Archives</h2>

    <ul class="archive-list">
   	  
    	<li><a href="http://java-success.blogspot.in/2006_10_01_archive.html">October 2006</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2006_11_01_archive.html">November 2006</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_05_01_archive.html">May 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_10_01_archive.html">October 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_12_01_archive.html">December 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2008_08_01_archive.html">August 2008</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_02_01_archive.html">February 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_10_01_archive.html">October 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_11_01_archive.html">November 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_12_01_archive.html">December 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_01_01_archive.html">January 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_07_01_archive.html">July 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_09_01_archive.html">September 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_10_01_archive.html">October 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_11_01_archive.html">November 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_12_01_archive.html">December 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_01_01_archive.html">January 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_02_01_archive.html">February 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_03_01_archive.html">March 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_04_01_archive.html">April 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_05_01_archive.html">May 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_06_01_archive.html">June 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_07_01_archive.html">July 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_08_01_archive.html">August 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_09_01_archive.html">September 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_10_01_archive.html">October 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_11_01_archive.html">November 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_12_01_archive.html">December 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_01_01_archive.html">January 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_02_01_archive.html">February 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_03_01_archive.html">March 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_04_01_archive.html">April 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_05_01_archive.html">May 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_06_01_archive.html">June 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_07_01_archive.html">July 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_08_01_archive.html">August 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_09_01_archive.html">September 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_10_01_archive.html">October 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_11_01_archive.html">November 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_12_01_archive.html">December 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_01_01_archive.html">January 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_02_01_archive.html">February 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_03_01_archive.html">March 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_04_01_archive.html">April 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_05_01_archive.html">May 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_06_01_archive.html">June 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_07_01_archive.html">July 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_08_01_archive.html">August 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_09_01_archive.html">September 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_10_01_archive.html">October 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_11_01_archive.html">November 2014</a></li>
	  

  </ul>
  
  
  
  <!-- Begin #profile-container -->
  
    <div id="profile-container"><h2 class="sidebar-title">About Me</h2>
<dl class="profile-datablock"><dt class="profile-img"><a href="https://plus.google.com/109240621969095737337"><img src="//lh3.googleusercontent.com/-XMLxx0v_R7A/AAAAAAAAAAI/AAAAAAAACxk/8BeHFmsEuy8/s80-c/photo.jpg" width="80" height="80" alt="My Photo"></a></dt>
<dd class="profile-data"><strong>Name:</strong> <a rel="author" href="https://plus.google.com/109240621969095737337"> Arulkumaran Kumaraswamipillai </a></dd>
</dl>
<p class="profile-textblock">Java freelancer from Australia. As a contractor, attended 100+ job interviews and received multiple job offers. Authored Java career books that sold over 30,000 copies.<br><br><a href="http://www.java-success.com" rel="nofollow" target="_blank">www.java-success.com</a> for 500+ Java/JEE job interview questions and answers and tutorials.<br></p>
<p class="profile-link"><a rel="author" href="https://plus.google.com/109240621969095737337">View my complete profile</a></p></div>
  
  <!-- End #profile -->

  
  <p id="powered-by"><a href="http://www.blogger.com"><img src="http://buttons.blogger.com/bloggerbutton1.gif" alt="Powered by Blogger" /></a></p>
  <p id="blogfeeds">Subscribe to<br />Posts [<a target="_blank" href="http://java-success.blogspot.com/feeds/posts/default" type="application/atom+xml">Atom</a>]</p>

  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  
   
  <!--
  <p>This is a paragraph of text that could go in the sidebar.</p>
  -->
  
  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  



</div></div>
<!-- End #sidebar -->




<!-- Begin #footer -->
<div id="footer"><hr />

  <p><!-- This is an optional footer. If you want text here, place it inside these tags, and remove this comment. -->&nbsp;</p>

  </div>
<!-- End #footer -->




</div>
<!-- End #content -->






</div></div></div></div>
<!-- End wraps -->

</body>
</html>