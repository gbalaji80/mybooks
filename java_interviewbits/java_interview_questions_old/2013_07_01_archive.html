<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
  <title>Java-Success Blog: July 2013</title>

  <link href='http://www.java-success.com' rel='canonical'/>


  <script type="text/javascript">(function() { (function(){function c(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(l){}};this.tick("start",null,a)}var a,e;window.performance&&(e=(a=window.performance.timing)&&a.responseStart);var h=0<e?new c(e):new c;window.jstiming={Timer:c,load:h};if(a){var b=a.navigationStart;0<b&&e>=b&&(window.jstiming.srt=e-b)}if(a){var d=window.jstiming.load;0<b&&e>=b&&(d.tick("_wtsrt",void 0,b),d.tick("wtsrt_","_wtsrt",
e),d.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),d&&0<b&&(d.tick("_tbnd",void 0,window.chrome.csi().startE),d.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,d&&0<b&&(d.tick("_tbnd",void 0,window.external.startE),d.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(k){}})();window.tickAboveFold=function(c){var a=0;if(c.offsetParent){do a+=c.offsetTop;while(c=c.offsetParent)}c=a;750>=c&&window.jstiming.load.tick("aft")};var f=!1;function g(){f||(f=!0,window.jstiming.load.tick("firstScrollTime"))}window.addEventListener?window.addEventListener("scroll",g,!1):window.attachEvent("onscroll",g);
 })();</script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Blogger" />
<link rel="icon" type="image/vnd.microsoft.icon" href="https://www.blogger.com/favicon.ico"/>
<link rel="alternate" type="application/atom+xml" title="Java-Success Blog - Atom" href="http://java-success.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Java-Success Blog - RSS" href="http://java-success.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Java-Success Blog - Atom" href="https://www.blogger.com/feeds/35897879/posts/default" />
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/static/v1/v-css/50269083-blog_controls.css"/>
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/dyn-css/authorization.css?targetBlogID=35897879&zx=32ffd7df-5810-469f-a666-048e5011b3eb"/>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/979395223-backlink.js"></script>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/4080670514-backlink_control.js"></script>
<script type="text/javascript">var BL_backlinkURL = "https://www.blogger.com/dyn-js/backlink_count.js";var BL_blogId = "35897879";</script>


  <style type="text/css">
/*
-----------------------------------------------
Blogger Template Style
Name:     Harbor
Designer: Douglas Bowman
URL:      www.stopdesign.com
Date:     24 Feb 2004
----------------------------------------------- */


body {
  background:#fff url("http://www.blogblog.com/harbor/rocks.jpg") no-repeat right bottom;
  background-attachment:fixed;
  margin:0;
  padding:0;
  font:x-small Georgia,Serif;
  color:#333;
  font-size/* */:/**/small;
  font-size: /**/small;
  }
/* Commented Backslash Hack hides rule from IE5-Mac \*/
  body {background-attachment:scroll;}
  /* End IE5-Mac hack */
a:link {
  color:#36a;
  text-decoration:none;
  }
a:visited {
  color:#764;
  text-decoration:none;
  }
a:hover {
  color:#933;
  text-decoration:underline;
  }
a img {
  border-width:0;
  }


/* Page Structure
----------------------------------------------- */
#wrap {
  background:url("http://www.blogblog.com/harbor/sky.jpg") repeat-x left top;
  min-width:740px;
  margin:0;
  padding:0;
  text-align:left;
  }
#wrap2 {
  background:url("http://www.blogblog.com/harbor/lighthouse.jpg") no-repeat left top;
  }
#wrap3 {
  background:url("http://www.blogblog.com/harbor/cloud.jpg") no-repeat 100% 75px;
  }
#wrap4 {
  background:url("http://www.blogblog.com/harbor/center_cloud.jpg") no-repeat 50% 0;
  padding:15px;
  width:100%;
  width/* */:/**/auto;
  width: /**/auto;
  }
@media all {
  #content {
    max-width:890px;
    padding:0 30px 50px;
    width:100%;
    width/* */:/**/auto;
    width: /**/auto;
    }
  html>body #content {
    border:3px double #fff;
    }
  #main {
    width:64%;
    float:right;
    }
  #main2 {
    margin:0;
    padding:0;
    }
  #sidebar {
    width:32%;
    float:left;
    }
  #sidebar2 {
    margin:0;
    padding:170px 0 20px;
    }
  }
@media handheld {
  #content {
    width:90%;
    }
  #main {
    width:100%;
    float:none;
    }
  #sidebar {
    width:100%;
    float:none;
    }
  }

/* Header
----------------------------------------------- */
@media all {
  #header {
    padding:15px 0 10px 110px;
    }
  }
@media handheld {
  #header {
    width:100%;
    padding:15px 0 10px 0;
    }
  }
#blog-title {
  margin:0 0 .25em;
  font-size:270%;
  font-weight:normal;
  color:#678;
  }
#blog-title a {
  color:#678;
  text-decoration:none;
  }
#description {
  margin:0;
  max-width:700px;
  font-size:75%;
  line-height:1.8em;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#789;
  }


/* Headings
----------------------------------------------- */
h2 {
  margin:1.5em 0 .75em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }


/* Posts
----------------------------------------------- */
.date-header {
  margin:2em 0 .5em;
  }
.post {
  margin:.5em 0 1.5em;
  line-height:1.6em;
  }
.post-title {
  margin:.25em 0 0;
  padding:0 0 4px;
  font-size:140%;
  font-weight:normal;
  line-height:1.4em;
  }
.post-title a, .post-title strong {
  background:url("http://www.blogblog.com/harbor/icon_lighthouse.gif") no-repeat 0 .15em;
  display:block;
  padding-left:20px;
  text-decoration:none;
  color:#368;
  font-weight:normal;
  }
.post-title strong {
  background-image:url("http://www.blogblog.com/harbor/icon_lighthouse2.gif");
  color:#000;
  }
.post-title a:hover {
  color:#933;
  }
.post-body {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding-top:12px;
  }
.post p {
  margin:0 0 .75em;
  }
p.post-footer {
  color:#999;
  }
.post-footer em, .comment-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.post-footer em {
  font-style:normal;
  color:#666;
  margin-right:.4em;
  }
.comment-link strong {
  font-size:130%;
  }
.comment-link {
  margin-left:.4em;
  }
.post img {
  padding:4px;
  border:1px solid #cde;
  }


/* Comments
----------------------------------------------- */
#comments {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding:15px 0 0;
  }
#comments h4 {
  margin:1em 0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }
#comments h4 strong {
  font-size:130%;
  }
#comments-block {
  margin:1em 0 1.5em;
  line-height:1.4em;
  }
#comments-block dt {
  margin:.5em 0;
  }
#comments-block dd {
  margin:.25em 20px 0;
  }
#comments-block dd.comment-timestamp {
  margin:-.25em 20px 1.5em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
#comments-block dd p {
  margin:0 0 .75em;
  }
.deleted-comment {
  font-style:italic;
  color:gray;
  }


/* Sidebar Content
----------------------------------------------- */
#sidebar ul {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 15px;
  padding:0 0 15px;
  list-style:none;
  }
#sidebar li {
  margin:0;
  padding:0 0 .25em 15px;
  text-indent:-15px;
  line-height:1.5em;
  }
#sidebar p {
  color:#666;
  line-height:1.5em;
  }


/* Profile
----------------------------------------------- */
#profile-container {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 2em;
  padding:0 0 15px;
  }
.profile-datablock {
  margin:.5em 0 .5em;
  }
.profile-img {
  display:inline;
  }
.profile-img img {
  float:left;
  padding:4px;
  border:1px solid #cde;
  margin:0 8px 3px 0;
  }
.profile-data {
  margin:0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.profile-data strong {
  display:none;
  }
.profile-textblock {
  margin:0 0 .5em;
  }
.profile-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Footer
----------------------------------------------- */
#footer {
  clear:both;
  padding:15px 30px 0 50px;
  }
#footer hr {
  display:none;
  }
#footer p {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  margin:0;
  padding-top:15px;
  font:78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Feeds
----------------------------------------------- */
#blogfeeds {
  }
#postfeeds {
  }
  </style>
<!-- --><style type="text/css">@import url(https://www.blogger.com/static/v1/v-css/navbar/3334278262-classic.css);
div.b-mobile {display:none;}
</style>

</head>

<body><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d35897879\x26blogName\x3dJava-Success+Blog\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dBLUE\x26layoutType\x3dCLASSIC\x26searchRoot\x3dhttp://java-success.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://java-success.blogspot.com/\x26vt\x3d2978101103701820782',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script>

<!-- Begin wraps -->

<div id="wrap"><div id="wrap2"><div id="wrap3"><div id="wrap4">


<!-- Begin #content -->
<div id="content">


<div id="header">

  <h1 id="blog-title">
    
	Java-Success Blog
	
  </h1>

  <p id="description">Java/JEE blog containing interview questions and answers and tutorials</p>

</div>


<!-- Begin #main -->
<div id="main"><div id="main2">

<div class='adsense' style='text-align:center; padding: 0px 3px 0.5em 3px;'>
<script type="text/javascript"><!--
google_ad_client="pub-3764234023451771";
google_ad_host="pub-1556223355139109";
google_ad_width=468;
google_ad_height=60;
google_ad_format="468x60_as";
google_ad_type="text";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="333333";
google_color_url="009900";
google_color_text="993333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



</div>

<!-- Search Google -->
<center>
<form method="get" action="http://www.google.com/custom" target="_top">
<table bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<label for="sbi" style="display: none">Enter your search terms</label>
<input type="text" name="q" size="31" maxlength="255" value="" id="sbi"></input>
<label for="sbb" style="display: none">Submit search form</label>
<input type="submit" name="sa" value="Search" id="sbb"></input>
<input type="hidden" name="client" value="pub-3764234023451771"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
</center>
<!-- Search Google -->









<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 30, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="3381621272812322381"></a>
    
         
    


    <h3 class="post-title">
	 
	 Spring JMS with Websphere MQ (aka MQ Series) -- Part 1 (configuration)
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>Messaging systems are used in enterprise applications for scalability. Here is the series of JMS tutorials. Stay tuned for more parts to follow.

<br />
<br />
<!-- INFOLINKS_OFF  -->

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//-->
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br />
<b>Step 1</b>: Add the relevant dependency jars to the <b>pom.xml</b> file.<br />
<br />
<pre class="brush: csharp">&lt;!-- Spring --&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- JMS/MQ --&gt;
&lt;dependency&gt;
 &lt;groupId&gt;com.ibm.webshere.mq7&lt;/groupId&gt;
 &lt;artifactId&gt;commonservices&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;com.ibm.webshere.mq7&lt;/groupId&gt;
 &lt;artifactId&gt;com-ibm-mqjms&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;com.ibm.webshere.mq7&lt;/groupId&gt;
 &lt;artifactId&gt;com-ibm-mq&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;com.ibm.webshere.mq7&lt;/groupId&gt;
 &lt;artifactId&gt;dhbcore&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;com.ibm.webshere.mq7&lt;/groupId&gt;
 &lt;artifactId&gt;com-ibm-mq-jmqi&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;javax.jms&lt;/groupId&gt;
 &lt;artifactId&gt;jms&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;javax.jms&lt;/groupId&gt;
 &lt;artifactId&gt;jms&lt;/artifactId&gt;
&lt;/dependency&gt;
</pre>
<br />
<br />
<b>Step 2</b>: Define the JMS properties jms/<i><b>internalConnection.properties</b></i> as shown below<br />
<br />
#connection factory properties<br />
<pre class="brush: csharp">jms.transportType=1  # i.e. TCP
jms.hostName=your_host
jms.channel=your.channel
jms.port=1414
jms.queueManager=your.que.manager
jms.sslEnabled=false
jms.sslCipherSuite=
jms.ssl.keystore.path=
jms.ssl.password=</pre>
<pre class="brush: csharp">&nbsp;</pre>
<pre class="brush: csharp">#destination property </pre>
<pre class="brush: csharp">my.queueName=my.queue </pre>
<br />
<br />
<b>Step 3</b>: An abstract class that configures the&nbsp; <i><b>ConnectionFactory</b></i>. <br />
<br />
<pre class="brush: csharp">package com.myapp.jms;

import java.util.Properties;

import javax.jms.ConnectionFactory;
import javax.jms.JMSException;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.core.convert.support.ConfigurableConversionService;
import org.springframework.core.convert.support.DefaultConversionService;

import com.ibm.mq.jms.MQConnectionFactory;
import com.ibm.mq.jms.MQQueueConnectionFactory;

public class AbstractMqJmsConnectionConfig {

 private static final Logger LOG = LoggerFactory.getLogger(AbstractMqJmsConnectionConfig.class);

 private final ConfigurableConversionService conversionService = new DefaultConversionService();

 protected ConnectionFactory createQueueConnectionFactory(Properties properties) throws JMSException {
  MQQueueConnectionFactory connectionFactory = new MQQueueConnectionFactory();

  setConnectionFactoryProperties(connectionFactory, properties);

  return connectionFactory;
 }

 private void setConnectionFactoryProperties(MQConnectionFactory connectionFactory, Properties properties)
   throws JMSException {
    
  connectionFactory.setTransportType(conversionService.convert(properties.getProperty("jms.transportType"), Integer.class));
  connectionFactory.setHostName(properties.getProperty("jms.hostName"));
  connectionFactory.setChannel(properties.getProperty("jms.channel"));
  connectionFactory.setPort(conversionService.convert(properties.getProperty("jms.port"), Integer.class));
  connectionFactory.setQueueManager(properties.getProperty("jms.queueManager"));
  connectionFactory.setClientID(properties.getProperty("jms.clientid"));
  
  if (conversionService.convert(properties.getProperty("jms.sslEnabled"), Boolean.class)) {
   setSSLSystemProperties(properties);
   connectionFactory.setSSLCipherSuite(properties.getProperty("jms.sslCipherSuite"));
  }
 }

 private void setSSLSystemProperties(Properties properties) {
  String sslkeystoreFullPath = properties.getProperty("jms.ssl.keystore.path");
  LOG.info("Setting sslkeystoreFullPath : {}", sslkeystoreFullPath);
  System.setProperty("javax.net.ssl.keyStore", sslkeystoreFullPath);
  System.setProperty("javax.net.ssl.keyStorePassword", properties.getProperty("jms.ssl.password"));
 }

}

</pre>
<b>Note:&nbsp; </b>The&nbsp; <i><b>ConfigurableConversionService&nbsp; </b></i>utility class from spring is handy to convert string property values to relevant data types like Integer, Boolean, etc.<br />
<br />
<b>Step 4</b>: Define the concrete class that loads the <b>internalConnection.properties</b> and has the Spring <b>@Configuration</b> annotation for the Spring dependency injection. <br />
<br />
<pre class="brush: csharp">package com.myapp.jms;

import java.io.IOException;
import java.util.Properties;

import javax.jms.ConnectionFactory;
import javax.jms.JMSException;

import org.springframework.beans.factory.config.PropertiesFactoryBean;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.io.ClassPathResource;

@Configuration
public class InternalJmsConnectionFactoryConfig extends AbstractMqJmsConnectionConfig {
 
 
 @Bean (name="internalJmsConnectionFactory")
 protected ConnectionFactory createQueueConnectionFactory() throws JMSException, IOException {
  return createQueueConnectionFactory(internalUMJMSProperties());
 }
 

 private Properties internalJMSProperties() throws IOException {
  PropertiesFactoryBean factory = new PropertiesFactoryBean();
  factory.setLocation(new ClassPathResource("jms/internalConnection.properties"));
  factory.afterPropertiesSet();
  return factory.getObject();
 }
}
</pre>
<br />
<br />
More on JMS<br />
<br />
<ul>
<li><a href="http://java-success.blogspot.com/2013/08/spring-jms-with-websphere-mq-aka-mq.html">Spring JMS with Websphere MQ (aka MQ Series) -- Part 2 (Receiver/subscriber)</a></li>
</ul>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/JMS">JMS</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Websphere%20MQ">Websphere MQ</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/spring-jms-with-websphere-mq-aka-mq.html" title="permanent link"> 7/30/2013 10:31:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/spring-jms-with-websphere-mq-aka-mq.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/spring-jms-with-websphere-mq-aka-mq.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=3381621272812322381" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=3381621272812322381&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 26, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="7174241081183848479"></a>
    
         
    


    <h3 class="post-title">
	 
	 Creating Java custom annotations with Spring aspectj AOP
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>There are situations where you want to retry a particular method that fails. For example, retry submitting a message to an messaging queue 3 times, retry external service calls, etc. AOP (Aspect Oriented Programming) is well suited for this as this is a cross cutting concern. In this tutorial, I use <b>aspectj</b>, <b>spring-aop</b>, and <b>Java annotation</b>. Here are the steps.<br />
<br />
<!--INFOLINKS_OFF -->

<b>Step 1</b>:&nbsp; The <b>pom.xml </b>file to outline the dependency jar files.<br />
<br />
<pre class="brush: csharp">&lt;!-- Spring --&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
 &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
 &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;

&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
 &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;
 &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
 &lt;groupId&gt;cglib&lt;/groupId&gt;
 &lt;artifactId&gt;cglib&lt;/artifactId&gt;
 &lt;version&gt;2.2&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;
 &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;
&lt;/dependency&gt;


&lt;!-- Aspectj --&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
 &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;
 &lt;version&gt;1.6.11&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
 &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
 &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
 &lt;version&gt;1.6.10&lt;/version&gt;
&lt;/dependency&gt;
</pre>
<br />
<br />
<b>Step 2</b>:Define the annotation -- <i><b>RetryOnFailure</b></i>. <br />
<br />
<pre class="brush: csharp">package com.mycompany.app9;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.RUNTIME)
@Target(
{
    ElementType.METHOD, ElementType.TYPE
})
public @interface RetryOnFailure
{
    int attempts() default 3;
    
    int delay() default 1000; //default 1 second
}
</pre>
<br />
<b>Step 3</b>: Define the aspect point cut implementation <i><b>RetryOnFailureAspect</b></i>.<br />
<br />
<pre class="brush: csharp">package com.mycompany.app9;

import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.springframework.core.NestedRuntimeException;

@Aspect
public class RetryOnFailureAspect
{
    public static final String RETRY_LIMIT_EXCEEDED_MSG = "Retry limit exceeded.";
    
    @Around("execution(* *(..)) &amp;&amp; @annotation(retry)")
    public Object retry(ProceedingJoinPoint pjp, RetryOnFailure retry) throws Throwable
    {
        
        Object returnValue = null;
        for (int attemptCount = 1; attemptCount &lt;= (1 + retry.attempts()); attemptCount++)
        {
            try
            {
                returnValue = pjp.proceed();
            }
            catch (Exception ex)
            {
                handleRetryException(pjp, ex, attemptCount, retry);
            }
        }
        return returnValue;
    }
    
    private void handleRetryException(ProceedingJoinPoint pjp, Throwable ex,
            int attemptCount, RetryOnFailure retry) throws Throwable
    {
        
        if (ex instanceof NestedRuntimeException)
        {
            ex = ((NestedRuntimeException) ex).getMostSpecificCause();
        }
        
        if (attemptCount == 1 + retry.attempts())
        {
            throw new RuntimeException(RETRY_LIMIT_EXCEEDED_MSG, ex);
        }
        else
        {  
            System.out.println(String
                    .format("%s: Attempt %d of %d failed with exception '%s'. Will retry immediately. %s",
                            pjp.getSignature(), attemptCount,
                            retry.attempts(),
                            ex.getClass().getCanonicalName(),
                            ex.getMessage()));
        }
    }
}
</pre>
<br />
<b>Step 4</b>: Now wire up aspectj and the annotation via <b>Spring xml </b>files.<br />
<br />
Firstly, wire up aop via <b>spring-aop.xml</b><br />
<br />
<pre class="brush: csharp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:aop="http://www.springframework.org/schema/aop" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"
 xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd"&gt;

 &lt;!-- Enable the @AspectJ support --&gt;
 &lt;aop:aspectj-autoproxy /&gt;

 &lt;bean id="retryOnFailureAspect" class="com.mycompany.app9.RetryOnFailureAspect" /&gt;

&lt;/beans&gt;
</pre>
<br />
Next, the application context xml file <b>springApplicationContext.xml</b><br />
<br />
<br />
<pre class="brush: csharp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
 xmlns:p="http://www.springframework.org/schema/p"
 xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"&gt;

 &lt;!-- Import your AspectJ config --&gt;
 &lt;import resource="classpath:spring-aop.xml" /&gt;

 &lt;!-- Scan you spring services for annotations --&gt;
 &lt;context:component-scan base-package="com.mycompany.app9" /&gt;

&lt;/beans&gt;
</pre>
<br />
<br />
<b>Step 5</b>: Finally, the test class that uses this annotation. Forcefully throw an exception to see if the method is retried.<br />
<br />
<pre class="brush: csharp">package com.mycompany.app9;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.stereotype.Component;

@Component
public class RetryOnFailureTest
{
    
    @RetryOnFailure(attempts = 3, delay = 2000)
    public void testRetry()
    {
        System.out.println("Entered ....................");
        throw new RuntimeException("Forcing an exception");
    }
    
    public static void main(String[] args)
    {
        final ApplicationContext context = new ClassPathXmlApplicationContext("springApplicationContext.xml");
        // Get me my spring managed bean
        final RetryOnFailureTest retryFailureTest = context.getBean(RetryOnFailureTest.class);
        retryFailureTest.testRetry();
    }
}
</pre>
<br />
<b>Step 6</b>: The output will be<br />
<br />
<br />
<pre class="brush: csharp">Jul 24, 2013 6:41:24 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@5e3974: startup date [Wed Jul 24 18:41:24 EST 2013]; root of context hierarchy
Jul 24, 2013 6:41:24 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [springApplicationContext.xml]
Jul 24, 2013 6:41:24 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [spring-aop.xml]
Jul 24, 2013 6:41:24 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1dc423f: defining beans [org.springframework.aop.config.internalAutoProxyCreator,retryOnFailureAspect,retryOnFailureTest,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
Entered ....................
void com.mycompany.app9.RetryOnFailureTest.testRetry(): Attempt 1 of 3 failed with exception 'java.lang.RuntimeException'. Will retry immediately. Forcing an exception
Entered ....................
void com.mycompany.app9.RetryOnFailureTest.testRetry(): Attempt 2 of 3 failed with exception 'java.lang.RuntimeException'. Will retry immediately. Forcing an exception
Entered ....................
void com.mycompany.app9.RetryOnFailureTest.testRetry(): Attempt 3 of 3 failed with exception 'java.lang.RuntimeException'. Will retry immediately. Forcing an exception
Entered ....................
Exception in thread "main" java.lang.RuntimeException: Retry limit exceeded.
 at com.mycompany.app9.RetryOnFailureAspect.handleRetryException(RetryOnFailureAspect.java:43)
 at com.mycompany.app9.RetryOnFailureAspect.retry(RetryOnFailureAspect.java:26)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 at java.lang.reflect.Method.invoke(Method.java:597)
 at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)
 at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)
 at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:65)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)
 at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
 at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
 at com.mycompany.app9.RetryOnFailureTest$$EnhancerByCGLIB$$4086c6b6.testRetry(<generated>)
 at com.mycompany.app9.RetryOnFailureTest.main(RetryOnFailureTest.java:23)
Caused by: java.lang.RuntimeException: Forcing an exception
 at com.mycompany.app9.RetryOnFailureTest.testRetry(RetryOnFailureTest.java:15)
 at com.mycompany.app9.RetryOnFailureTest$$FastClassByCGLIB$$e37240e1.invoke(<generated>)
 at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
 at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
 at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:80)
 at com.mycompany.app9.RetryOnFailureAspect.retry(RetryOnFailureAspect.java:22)
 ... 13 more
</generated></generated></pre>
<br />
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/annotation">annotation</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/aspectj">aspectj</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/creating-java-custom-annotations-with.html" title="permanent link"> 7/26/2013 10:34:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/creating-java-custom-annotations-with.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/creating-java-custom-annotations-with.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/07/creating-java-custom-annotations-with.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=7174241081183848479" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=7174241081183848479&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 25, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="2272821137761342142"></a>
    
         
    


    <h3 class="post-title">
	 
	 Core Java Executor Service (Thread Pool) Tutorial 
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br/>

Here is a simple code that uses a thread pool of 3 threads to output a list. A stop watch is used to measure the time.<br />
<br />

<!-- INFOLINKS_OFF -->

<pre class="brush: csharp">package com.mycompany.app8;

import java.util.Arrays;
import java.util.List;

public class ExecutorServiceTest
{
    
    public static void main(String[] args)
    {
        MyBusinessService bs = new MyBusinessServiceImpl();
        
        for (int i = 0; i &lt; 3; i++)
        {
            List&lt;String&gt; items = Arrays.asList("Java", "JEE", "JDBC", "EJB");
            bs.process(items);
        }
        
    }  
}
</pre>
<br />
<br />
<pre class="brush: csharp">package com.mycompany.app8;

import java.util.List;

public interface MyBusinessService
{
    abstract void process(List&lt;String&gt; values);
    
    abstract void shutdownAndAwaitTermination();
}
</pre>
<br />
<br />
<pre class="brush: csharp">package com.mycompany.app8;

import java.util.List;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import org.apache.camel.util.StopWatch;

public class MyBusinessServiceImpl implements MyBusinessService
{
    
    private ExecutorService threadPool;
    
    public MyBusinessServiceImpl()
    {
        init();
    }
    
    void init()
    {
        threadPool = Executors.newFixedThreadPool(3);
    }
    
    public void process(final List&lt;String&gt; values)
    {
        threadPool.execute(new Runnable()
        {
            
            public void run()
            {
                StopWatch watch = new StopWatch();
                String threadName = Thread.currentThread().getName();
                System.out.println(threadName + " --&gt; " + values);
                System.out.println(threadName + " --&gt; elapse time:" + watch.stop());
                
            }
            
        });
    }
    
}

</pre>
The output will be:<br />
<br />
<pre class="brush: csharp">pool-1-thread-2 --&gt; [Java, JEE, JDBC, EJB]
pool-1-thread-3 --&gt; [Java, JEE, JDBC, EJB]
pool-1-thread-3 --&gt; elapse time:0
pool-1-thread-1 --&gt; [Java, JEE, JDBC, EJB]
pool-1-thread-2 --&gt; elapse time:0
pool-1-thread-1 --&gt; elapse time:0
</pre>
<br />
<br />
<b>Q</b>. what is missing from the above?<br />
<b>A</b>. The thread pool does not shut down. The shut down logic can be added as shown below.<br />
<br />
<br />
Add the following method to <i><b>MyBusinessServiceImpl </b></i>class. <br />
<br />
<pre class="brush: csharp"> public void shutdownAndAwaitTermination()
    {
        final int timeout = 60;
        final TimeUnit timeoutUnit = TimeUnit.SECONDS;
        threadPool.shutdown(); // Disable new tasks from being submitted
        try
        {
            // Wait a while for existing tasks to terminate
            if (!threadPool.awaitTermination(timeout, timeoutUnit))
            {
                threadPool.shutdownNow(); // Cancel currently executing tasks
                // Wait a while for tasks to respond to being cancelled
                if (!threadPool.awaitTermination(timeout, timeoutUnit))
                {
                    System.out.println("MyBusinessServicee did not terminate");
                }
            }
        }
        catch (InterruptedException ie)
        {
            // (Re-)Cancel if current thread also interrupted
            threadPool.shutdownNow();
            // Preserve interrupt status
            Thread.currentThread().interrupt();
        }
    }
    
</pre>
<br />
The <i>ExecutionServiceTest </i>will invoke this method.<br />
<br />
<pre class="brush: csharp">package com.mycompany.app8;

import java.util.Arrays;
import java.util.List;

public class ExecutorServiceTest
{ 
    public static void main(String[] args)
    {
        MyBusinessService bs = new MyBusinessServiceImpl();
        
        for (int i = 0; i &lt; 3; i++)
        {
            List&lt;String&gt; items = Arrays.asList("Java", "JEE", "JDBC", "EJB");
            bs.process(items);
        }
        
        bs.shutdownAndAwaitTermination();
    } 
}
</pre>
<br />
<b>Note</b>: The Google library has a StopWatch class (com.google.common.base.Stopwatch) as well.<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Coding">Coding</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Multi-threading">Multi-threading</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/core-java-executor-service-thread-pool.html" title="permanent link"> 7/25/2013 09:44:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/core-java-executor-service-thread-pool.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/core-java-executor-service-thread-pool.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=2272821137761342142" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=2272821137761342142&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 24, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="4879591220328781096"></a>
    
         
    


    <h3 class="post-title">
	 
	 Merging code with subversion, and things you must know
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br/>

Branching and merging in Subversion is very common in large projects, but it has a reputation for being so difficult so that many developers either hate performing these tasks or do it incorrectly. Here are some questions and answers style tips to perform these tasks with a greater understanding.<br />
<br />
<b>Q</b>. When will you merge code from a <b>branch </b>to <b>trunk</b>?<br />
<b>A</b>. Merging from a branch to trunk is done<br />
<ul>
<li>When youâ€™ve finished development in your branch, and&nbsp;</li>
<li>When you no longer need the branch.</li>
</ul>
So, only perform this merge <u>when you are completely finished with your 
branch</u>!&nbsp; After merging your branch into trunk, you will no longer be 
able to use your branch.&nbsp; In fact, you should delete your branch after 
merging it into trunk. If you want to add further new features, then create a new branch from your trunk.<br />
<br />
This process of merging code from a <b>branch</b> to <b>trunk</b> is also known as <b>"reintegrate". </b>The diagram below shows that "Tortoise SVN" and "Eclipse SVN client" providing the initial merge options, and <b>reintegration</b> is one of them. You can only<u> reintegrate a branch to trunk, after you have rebased your branch with changes in the trunk.</u><br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-kK5KYRFiCpI/UejTAjMHHCI/AAAAAAAABuo/BXmBg3TbxMk/s1600/subversion-merge.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="404" src="http://2.bp.blogspot.com/-kK5KYRFiCpI/UejTAjMHHCI/AAAAAAAABuo/BXmBg3TbxMk/s640/subversion-merge.jpg" width="640" /></a></div>
<br />
<br />
<b>Q</b>. What are the key steps involved in merging code from branch to a trunk?<br />
<b>A</b>.&nbsp; <br />
<br />
<b>Step 1</b>: Firstly, <b>merge trunk into your branch</b> and commit any changes to your branch. This is a <u>very important step as you need to make sure your branch is consistent</u> with trunk before merging it back.<br />
<br />
This is also known as <b>re-basing</b>. <br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-NlIIFEQvitI/UejVQcvJq7I/AAAAAAAABu4/M4xcayMQltI/s1600/subversion-rebase.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="408" src="http://3.bp.blogspot.com/-NlIIFEQvitI/UejVQcvJq7I/AAAAAAAABu4/M4xcayMQltI/s640/subversion-rebase.jpg" width="640" /></a></div>
<br />
<br />
You can either select a range of revisions to merge or leave it empty to merge all the revisions.<br />
<br />
<b>Step 2</b>:&nbsp; Commit rebased changes in your feature branch to the subversion.<br />
<br />
<b>Step 3</b>: Checkout the trunk.<br />
<br />
<b>Step 4</b>: Reintegrate your feature branch into trunk.<br />
<br />
<b>Step 5</b>: Build and test your merged code.<br />
<br />
<b>Step 6</b>: Commit the code into SVN.<br />
<br />
<b>Step 7</b>: You can delete the branch.&nbsp; As mentioned earlier, after merging a branch into trunk, the branch can no longer be used.&nbsp; Subversion keeps track of merges using the svn:mergeinfo property.&nbsp; Because of the way it uses this property, once a branch is merged into trunk it can no longer be involved in merges properly.<br />
<br />
<br />
<span style="font-size: large;"><b>Tip:</b> <span style="font-size: small;">Copy trunk to a new branch, merge it with feature branch/s. When things done, merge the new branch back to the trunk. This technique is quite like the mercurial and git rebasing.&nbsp;</span></span><br />
<br />
<br />
<b>Q. </b>What do you understand by the term "<b>working copy</b>"? <b></b><br />
<b>A. </b>It is the local copy that you had checked out.<b> </b>Your local working copy reflects some directory in the remote Subversion repository. For example, if you had checked out from a trunk, then trunk is your working copy<b>,</b> and if you had checked out from a branch, then branch is your working copy.<b> </b>Once you make changes to you working copy, you can commit them to the SVN<b>. If you check your local working copy folders, you will see ".svn" folders that contain info about the SVN. </b><br />
<br />
<b>Q</b>. What if you had made a mistake during your merge?<br />
<b>A</b>. You can use the "<b>revert</b>" function to bring in the latest code from the SVN and overwrite your working copy. This means, undoing your uncommitted changes.<br />
<br />
You can also <b>switch </b>between branches and trunk.<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/SourceControl">SourceControl</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/SVN">SVN</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/merging-code-with-subversion-and-things.html" title="permanent link"> 7/24/2013 09:40:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/merging-code-with-subversion-and-things.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/merging-code-with-subversion-and-things.html#comment-form;><span style="text-transform:lowercase">2 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/07/merging-code-with-subversion-and-things.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=4879591220328781096" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=4879591220328781096&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 23, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="537377472704965172"></a>
    
         
    


    <h3 class="post-title">
	 
	 5 Handy Firefox browser plugins for web developers
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//-->
</script>

<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br />
<br />
The trend to develop single page web applications with MVC or MVVM frameworks like Angular requires good tools and plugins to debug and isolate issues on client side. On the previous tutorial I covered writing JavaScript functions and debugging it with the FireBug plugin for Firefox. In this blog post, I will cover 5 handy Firefox plugins that can make you more productive in fixing issues relating <b>client side code</b> like JavaScript errors, effective CSS applied, HTML errors, etc  and <b>client to server interactions</b> like what header was sent? what data was posted?, etc<br />
<ol>
<li>FireBug</li>
<li>Fire Cookie</li>
<li>YSlow</li>
<li>Tamper Data</li>
<li>Modify Headers </li>
</ol>
There are other useful plugins like modify headers, HTML validator, etc.<br />
<br />
<ol>
<li><b>FireBug </b>is&nbsp;<a href="http://www.ibm.com/developerworks/web/library/wa-aj-firebug/" rel="nofollow" target="_blank"> handy to debug and tune client side HTML, CSS, and JavaScript on the fly</a>.</li>
<li><b>Fire Cookie</b> <a href="http://www.softwareishard.com/blog/firecookie/" target="_blank">makes possible to view and manage cookies in your browser</a>. Especially, you can modify and delete cookies.</li>
<li><b>YSlow </b>analyzes web pages and suggests ways to improve their performance based on a set of rules for high performance web pages. YSlow is an extension to FireBug, and you need to install FireBug before installing YSlow. The YSlow grades your web application and provides recommendations to improve performance. Alternatively, you can also install Page Speed from Google. Similar to Yslow!, it tests website performance.</li>
<li><b>Tamper Data</b> is a fast, simple yet effective tool which can be used to do penetration testing. Use tamper data to view and modify HTTP/HTTPS headers, trace and time http response/requests and to security test web applications by modifying the POST parameters.</li>
<li><b>Modify Headers</b> is handy for modifying or adding new headers for testing purpose. For example, add SSO headers to test your application locally.</li>
</ol>
<br />
The FireBug has other developer productivity tools natively within <b>Tools </b>--&gt; <b>Web Developer</b><br />
<br />
<b>Native Inspect Element</b><br />
<br />
This native "Inspect Element" from Firefox may look similar to â€œInspect Element in Firebugâ€, but it&nbsp; acts in different ways. There is one distinctive feature known as the the <b>3D view</b>, which analyses the web page in depth.<br />
<br />
<br />
<b>Responsive Design View </b><br />
<br />
This native "Responsive Design View " assists with the Responsive Website Design (i.e. RWD). With more and more mobile users online via smartphones and tablets, it has never been more important to design a friendly environment for those visitors. A responsive website design allows your visitors to navigate to your site that is optimally designed for the device they are using like smartphone, tablet, or laptop/desktop, without having to painfully zoom in and zoom out.<br />
<br />
<br />
<b>Style Editor</b><br />
<br />
If you work frequently with CSS then the "style editor" is very handy as it allows you to edit the CSS and see the impact of your change instantly. This is available from version 11.<br />
<br />
<br />
Here are some step by step tutorials on using <b>FireBug</b>:<br />
<br />
<ul>
<li>&nbsp;<a href="http://java-success.blogspot.com/2013/07/css-selectors-tutorial-with-firebug.html" target="_blank">CSS Selectors tutorial with Firebug</a></li>
<li><a href="http://java-success.blogspot.com/2013/04/javascript-tutorial-coding-and.html" target="_blank">&nbsp;JavaScript tutorial with Firebug</a></li>
</ul>
<ol>
</ol>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Firefox">Firefox</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/5-handy-firefox-browser-plugins-for-web.html" title="permanent link"> 7/23/2013 11:32:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/5-handy-firefox-browser-plugins-for-web.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/5-handy-firefox-browser-plugins-for-web.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=537377472704965172" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=537377472704965172&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 19, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="4804040904665124788"></a>
    
         
    


    <h3 class="post-title">
	 
	 Core Java multi-thread coding -- printing odd and even numbers with two threads and a blocking queue
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><h2>
Core Java Coding Questions and Answers for beginner to intermediate level</h2>
<table bgcolor="#FFFFCC" border="2" cell-padding="10px" style="width: 100%;">
<tbody>
<tr>
<td><a href="http://java-success.blogspot.com/2012/07/java-coding-question-and-answer-on.html"> <span style="font-size: large;">Q1</span></a> </td>
<td><a href="http://java-success.blogspot.com/2012/07/can-you-write-code-by-asking-right.html"> <span style="font-size: large;">Q2</span></a> </td>
<td><a href="http://java-success.blogspot.com/2013/07/core-java-multi-thread-coding-printing_19.html"> <span style="font-size: large;">Q3</span></a> </td>
<td><a href="http://java-success.blogspot.com/2013/10/java-preorder-tree-traversal-recursive.html"> <span style="font-size: large;">Q4</span></a> </td>
<td><a href="http://java-success.blogspot.com/2013/10/java-tree-structure-interview-questions.html"> <span style="font-size: large;">Q5</span></a> </td>
<td><a href="http://java-success.blogspot.com/2014/05/core-java-coding-questions-creating.html"> <span style="font-size: large;">Q6</span></a> </td>
</tr>
</tbody></table>
<br />
This is an alternative approach using a blocking queue compared to using an<a href="http://java-success.blogspot.com.au/2013/07/core-java-multi-thread-coding-printing.html"> <i>AtomicInteger</i><i> </i>and a lock</a><b>.</b><br />
<br />
<b>Q</b>. Can you write code to print odd and even numbers by two threads in sequence?<br />
<b>A</b>. Even though this is not a practical question, a handy beginner level question test your ability to write multi-threaded code.<br />
<br />
<b>Considerations</b>:<br />
<br />
Use a blocking queue: A <i><b>BlockingQueue </b></i>is used to have one thread produce objects, which another thread consumes.T he producing thread will keep producing new objects and insert them into the queue, until the queue reaches some upper bound on what it can contain. If the blocking queue reaches its upper limit, the producing thread is blocked while trying to insert the new object. The consuming thread keeps taking objects out of the blocking queue, and processes them. If the consuming thread tries to take an object out of an empty queue, the consuming thread is blocked until a producing thread puts an object into the queue. <br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-Ih8jXIehTLc/UeY-hgVzd3I/AAAAAAAABt4/yoaDPJaNRk4/s1600/odd-even-numbers-blocking-queue.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-Ih8jXIehTLc/UeY-hgVzd3I/AAAAAAAABt4/yoaDPJaNRk4/s640/odd-even-numbers-blocking-queue.jpg" height="304" width="640" /></a></div>
You can use 2 blocking queues -- one for odd numbers and another for the even numbers. 
<br />
<br />
<b>Step: 1</b>: Put 1 into the odd queue.

<br />
<br />
<b>Step 2: </b>The <b>odd number thread&nbsp;</b><br />
<ul>
<li>takes the number out of the<b> odd number queue</b></li>
<li>prints the <b>odd </b>number</li>
<li>increments the number by 1</li>
<li>puts the even number in the even number queue.</li>
<li><b>when the queue is empty, it is blocked. </b></li>
</ul>
<br />
<b>Step 3:</b> Similarly,&nbsp; The <b>even number thread </b><br />
<br />
<ul>
<li>takes the number out of the <b>even number queue</b></li>
<li>prints the <b>even </b>number </li>
<li>increments the number by 1</li>
<li>puts the odd number in the even number queue.</li>
<li><b>when the queue is empty, it is blocked.&nbsp;</b></li>
</ul>
<br />
Here is the diagram that&nbsp; depicts this<b>.</b><br />
<b><br /></b>
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-fAoViCeUnM4/UeY_ifbZKGI/AAAAAAAABuI/XtysuZJcl6Y/s1600/odd-even-numbers-blocking-queue-threads.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-fAoViCeUnM4/UeY_ifbZKGI/AAAAAAAABuI/XtysuZJcl6Y/s640/odd-even-numbers-blocking-queue-threads.jpg" height="412" width="640" /></a></div>
<b><br /></b>
<b>Finally, here is the working code.</b><br />
<b><br /></b>
<b>Step 1</b>: The main class <b>OddAndEvenSignalling.&nbsp;</b><br />
<br />
<br />
<!-- INFOLINKS_OFF -->

<br />
<pre class="brush: csharp">  
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.LinkedBlockingQueue;

public class OddAndEvenSignalling
{
    
    private static final int MAX_NUMBER = 10;
    
    public static void main(String[] args)
    {
        BlockingQueue&lt;Integer&gt; odds = new LinkedBlockingQueue&lt;Integer&gt;();
        BlockingQueue&lt;Integer&gt; evens = new LinkedBlockingQueue&lt;Integer&gt;();
        ExecutorService executorService = Executors.newFixedThreadPool(2);
        
        //odd numbers are removed from the "from" queue --&gt; printed --&gt; incremented --&gt; placed on the "to" queue by one thread
        //"from" queue is "odd number" queue and "to" queue is "even number" queue
        executorService.submit(new TakeAndOfferNext(odds, evens, MAX_NUMBER));
        
        //even numbers are removed from the "from" queue --&gt; printed --&gt; incremented --&gt; placed on the "to" queue by another thread
        //"from" queue is "even number" queue and "to" queue is "odd number" queue
        executorService.submit(new TakeAndOfferNext(evens, odds, MAX_NUMBER));
        odds.offer(1);
    }
}

</pre>
<br br="" />
<b>Step 2: </b>The <b>callable </b>class <b>TakeAndOfferNext </b>that executes the logic as depicted in the diagram.<br />
<br />
<br />
<pre class="brush: csharp">  
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.Callable;

public class TakeAndOfferNext implements Callable&lt;Object&gt;
{
    
    BlockingQueue&lt;Integer&gt; takeFrom;
    BlockingQueue&lt;Integer&gt; offerTo;
    int maxNumber;
    
    public TakeAndOfferNext(BlockingQueue&lt;Integer&gt; takeFrom, BlockingQueue&lt;Integer&gt; offerTo, int maxNumber)
    {
        this.takeFrom = takeFrom;
        this.offerTo = offerTo;
        this.maxNumber = maxNumber;
    }
    
    public Object call() throws Exception
    {
        print();
        return null;
    }
    
    public void print()
    {
        while (true)
        {
            try
            {
                int i = takeFrom.take(); //removes the value in the "from" queue
                System.out.println(Thread.currentThread().getName() + " --&gt; " + i);
                offerTo.offer(i + 1);    //increments the value by 1 and puts it in the "to" queue.
                if (i &gt;= (maxNumber - 1))
                {
                    System.exit(0);
                }
            }
            catch (InterruptedException e)
            {
                throw new IllegalStateException("Unexpected interrupt", e);
            }
        }
    }
    
}
</pre>
<br />
<br />
<b>Step 3: </b>The output<b></b><br />
<br />
<pre class="brush: csharp">  
pool-1-thread-2 --&gt; 1
pool-1-thread-1 --&gt; 2
pool-1-thread-2 --&gt; 3
pool-1-thread-1 --&gt; 4
pool-1-thread-2 --&gt; 5
pool-1-thread-1 --&gt; 6
pool-1-thread-2 --&gt; 7
pool-1-thread-1 --&gt; 8
pool-1-thread-2 --&gt; 9
pool-1-thread-1 --&gt; 10
</pre>
<br />
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Coding">Coding</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Multi-threading">Multi-threading</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/core-java-multi-thread-coding-printing_19.html" title="permanent link"> 7/19/2013 11:49:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/core-java-multi-thread-coding-printing_19.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/core-java-multi-thread-coding-printing_19.html#comment-form;><span style="text-transform:lowercase">5 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=4804040904665124788" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=4804040904665124788&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 18, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="929172526198195783"></a>
    
         
    


    <h3 class="post-title">
	 
	 Core Java multi-thread coding -- printing odd and even numbers with two threads
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br/>


<b>Q.</b> Can you write code to print odd and even numbers by two threads in sequence?<br />
<b>A.</b> Even though this is not a practical question, a handy beginner level question test your ability to write multi-threaded code.<br />
<br />
Here are the considerations.<br />
<br />
<ul>
<li>It needs to be atomic so that the numbers can be printed in sequence. You can use either the <i><b>AtomicInteger </b></i>class or maintain two boolean flags like <i><b>oddPrinted </b></i>and <i><b>evenPrinted&nbsp; </b></i>to coordinate between the two threads.</li>
<li>Both threads need to have a lock to coordinate odd and even printing. In Java, every object has a lock. So, we can create a <b>Object</b> lock = new <b>Object</b>( ) as the lock for both threads to use.</li>
<li>The Java <i><b>Object </b></i>class has <b>wait </b>and <b>notify</b>/<b>notifyAll</b> methods to facilitate inter thread communication via the <i><b>Object </b></i>lock. The notify/notifyAll methods notify the waiting threads to get hold of the lock. Only one thread can execute the code snippet that is synchronized on the lock.</li>
<li>You need a main method that creates a main thread and then spawn two new threads to print odd and even numbers respectively.&nbsp;</li>
</ul>
&nbsp;Here is the sample code. <br />
<br />
<b>Step 1</b>: The main thread class <i><b>PrintOddEvenNumbersWithTwoThreads </b></i>that spawns the two new threads via the thread pool.<br />
<br />
<pre class="brush: csharp">  
package com.mycompany.app6;

import java.util.concurrent.Executor;
import java.util.concurrent.Executors;
import java.util.concurrent.atomic.AtomicInteger;

/**
 * main thread
 */
public class PrintOddEvenNumbersWithTwoThreads
{
    public static void main(String[] args)
    {
        final int max = 10;
        final AtomicInteger i = new AtomicInteger(1); //start with 0
        Executor dd = Executors.newFixedThreadPool(2);
        
        final Object lock = new Object();
        
        //the main thread spawns two threads to print odd and even numbers respectively
        dd.execute(new OddNumber(max, i, lock));
        dd.execute(new EvenNumber(max, i, lock));
        
        do
        {
            try
            {
                Thread.sleep(1000);
            }
            catch (InterruptedException e)
            {
                e.printStackTrace();
            }
        }
        
        while (i.get() != max + 1);
        
        System.out.println("\nDone");
        System.exit(0);
    }
}
</pre>
<br />
<br />
<b>Step 2</b>: The <i><b>OddNumber </b></i>thread that prints odd numbers.<br />
<br />
<pre class="brush: csharp">  
package com.mycompany.app6;

import java.util.concurrent.atomic.AtomicInteger;

public class OddNumber implements Runnable
{
    private int maxNumber;
    private AtomicInteger number;
    private Object lock;
    
    public OddNumber(int maxNumber, AtomicInteger number, Object lock)
    {
        this.maxNumber = maxNumber;
        this.number = number;
        this.lock = lock;
    }
    
    public void run()
    {
        print();
    }
    
    public void print()
    {
        while (number.get() &lt; maxNumber + 1)
        {
            if (number.get() % 2 == 0)
            {
                System.out.println(Thread.currentThread().getName() + " --&gt; " + number.getAndAdd(1));
                
                synchronized (lock)
                {
                    lock.notifyAll();//notify all waiting threads on this lock to resume 
                }
            }
            else
            {
                synchronized (lock)
                {
                    try
                    {
                        lock.wait(); //wait for the lock
                    }
                    catch (InterruptedException e)
                    {
                        e.printStackTrace();
                    }
                }
            }
        }
    }
    
}

</pre>
<br />
<br />
<b>Step 3</b>: The <b>Even<i>Number </i></b>thread that prints even numbers. The implementation is very similar except for the boundary condition that checks for odd or even number.<br />
<br />
<pre class="brush: csharp">  
package com.mycompany.app6;

import java.util.concurrent.atomic.AtomicInteger;

public class EvenNumber implements Runnable
{
    private int maxNumber;
    private AtomicInteger number;
    private Object lock;
    
    public EvenNumber(int maxNumber, AtomicInteger number, Object lock)
    {
        this.maxNumber = maxNumber;
        this.number = number;
        this.lock = lock;
    }
    
    public void run()
    {
        print();
    }
    
    public void print()
    {
        while (number.get() &lt; maxNumber + 1)
        {
            if (number.get() % 2 != 0)
            {
                System.out.println(Thread.currentThread().getName() + " --&gt; " + number.getAndAdd(1));
                
                synchronized (lock)
                {
                    lock.notify(); //notify all waiting threads on this lock to resume 
                }
            }
            else
            {
                synchronized (lock)
                {
                    try
                    {
                        lock.wait();  //wait for the lock
                    }
                    catch (InterruptedException e)
                    {
                        e.printStackTrace();
                    }
                }
            }
        }
    }
    
}

</pre>
<br />
<br />
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Center -- Leader board */
google_ad_slot = "5678244596";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="2755834745";
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>

<br/>
<br />
<b>Step 4</b>: Run the main thread class <i><b>PrintOddEvenNumbersWithTwoThreads </b></i>to execute the code.<br />
<br />
The output:
<br />
<br />
<pre class="brush: csharp">  
pool-1-thread-2 --&gt; 1
pool-1-thread-1 --&gt; 2
pool-1-thread-2 --&gt; 3
pool-1-thread-1 --&gt; 4
pool-1-thread-2 --&gt; 5
pool-1-thread-1 --&gt; 6
pool-1-thread-2 --&gt; 7
pool-1-thread-1 --&gt; 8
pool-1-thread-2 --&gt; 9
pool-1-thread-1 --&gt; 10

Done

</pre>
<br />
<br />
There are other alternative approaches as described in the <a href="http://java-success.blogspot.com.au/2011/12/more-java-multi-threading-interview.html">NumberGenerator </a>class. <div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Coding">Coding</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Multi-threading">Multi-threading</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/core-java-multi-thread-coding-printing.html" title="permanent link"> 7/18/2013 09:50:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/core-java-multi-thread-coding-printing.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/core-java-multi-thread-coding-printing.html#comment-form;><span style="text-transform:lowercase">1 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/07/core-java-multi-thread-coding-printing.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=929172526198195783" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=929172526198195783&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 17, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="6950431999756481627"></a>
    
         
    


    <h3 class="post-title">
	 
	 Spring Batch code snippets
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>This post compliments some of the other Spring batch tutorials <a href="http://java-success.blogspot.com.au/2012/06/batch-processing-in-java-with-spring.html">Spring batch part1 </a>and <a href="http://java-success.blogspot.com.au/2012/06/batch-processing-in-java-with-spring_18.html">Spring batch part 2</a> and <a href="http://java-success.blogspot.com.au/2012/12/spring-batch-advanced-tutorial-writing.html">Spring batch advanced</a>. <br />
<br />
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<!-- INFOLINKS_OFF -->
<br />
<br />
A sample <b>spring context</b> file (e.g. applicationContext-test.xml)<br />
<br />
<pre class="brush: csharp">  
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:batch="http://www.springframework.org/schema/batch"
 xmlns:task="http://www.springframework.org/schema/task" xmlns:context="http://www.springframework.org/schema/context"
 xmlns:tx="http://www.springframework.org/schema/tx" xmlns:aop="http://www.springframework.org/schema/aop"
 xmlns:int="http://www.springframework.org/schema/integration"
 xmlns:p="http://www.springframework.org/schema/p"
 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
 http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
 http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd
 http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch.xsd
 http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
 http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-2.0.xsd
 http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd"&gt;
 
    &lt;bean id="jdbcTestTemplate" class="org.springframework.jdbc.core.JdbcTemplate" p:dataSource-ref="dataSource" /&gt;
 &lt;bean id="myappDao" class="myapp.dao.MyappDaoImpl" /&gt;
 &lt;bean id="myappFeedDao" class="myapp.dao.MyappDaoImpl" /&gt;
 
 
 &lt;bean id="jobRepository" class="myapp.batch.repository.support.NoopJobRepository"/&gt;
 
 &lt;bean id="jobExecutorThreadPool"
  class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor"&gt;
  &lt;property name="corePoolSize" value="1" /&gt;
  &lt;property name="threadNamePrefix" value="jobExecutorThread-" /&gt;
 &lt;/bean&gt;
 
 &lt;bean id="jobLauncher"
  class="org.springframework.batch.core.launch.support.SimpleJobLauncher"&gt;
  &lt;property name="jobRepository" ref="jobRepository" /&gt;
  &lt;!-- &lt;property name="taskExecutor" ref="jobExecutorThreadPool" /&gt; --&gt;
 &lt;/bean&gt;
 
 &lt;job id="myappJob" xmlns="http://www.springframework.org/schema/batch"&gt;
  &lt;listeners&gt;
   &lt;listener ref="myappJobExecutionListener" /&gt;
  &lt;/listeners&gt;
  &lt;step id="loadMyappFeedData" &gt;

   &lt;tasklet transaction-manager="txnManager"&gt;
    &lt;listeners&gt;
     &lt;listener ref="stepExecutionListener" /&gt;
     &lt;listener ref="myappFileImportListener" /&gt;
    &lt;/listeners&gt;

    &lt;chunk reader="groupCfDetailsReader" writer="myappFileItemWriter"
     commit-interval="1" /&gt;
   &lt;/tasklet&gt;
  &lt;/step&gt;
 &lt;/job&gt;
 
 
    &lt;!-- ============= readers, writers and listeners ============== --&gt;
 &lt;bean id="myappFileItemReader" class="org.springframework.batch.item.file.FlatFileItemReader" scope="step"&gt;
  &lt;property name="resource" value="#{jobParameters['dataFileName']}" /&gt;
   
  &lt;property name="lineMapper"&gt;
   &lt;bean class="org.springframework.batch.item.file.mapping.DefaultLineMapper"&gt;
    &lt;property name="lineTokenizer"&gt;
     &lt;bean
      class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer"&gt;
      &lt;property name="names"
       value="accountCd,currency,txnCd, amount" /&gt;
     &lt;/bean&gt;
    &lt;/property&gt;
    &lt;property name="fieldSetMapper"&gt;
     &lt;bean
      class="myapp.mapper.MyappFieldSetMapper" /&gt;
    &lt;/property&gt;
   &lt;/bean&gt;
  &lt;/property&gt;
  &lt;property name="linesToSkip" value="1" /&gt;
  &lt;property name="skippedLinesCallback" ref="cfFileHeaderLineCallbackHandler" /&gt;

 &lt;/bean&gt;

 &lt;bean id="groupCfDetailsReader"
  class="myapp.item.reader.MyappItemReader"&gt;
  &lt;property name="delegate" ref="myappFileItemReader" /&gt;
 &lt;/bean&gt;

 &lt;bean id="myappFileItemWriter"
  class="myapp.item.writer.MyappItemWriter" /&gt;
  
  &lt;bean id="myappMetaFileItemWriter"
  class="myapp.item.writer.MyappMetaFileItemWriter" /&gt;

 &lt;bean id="stepExecutionListener"
  class="myapp.util.StepExecutionListenerCtxInjecter" /&gt;
  
    &lt;bean id="myappFileImportListener"
  class="myapp.listener.MyappFileImportListener"
  scope="step" /&gt;
 
&lt;/beans&gt;

</pre>
<br />
<b>Q</b>. How do you kick off a batch job?<br />
<b>A</b>. Here is an example of a test class kicking off the batch job. It also demonstrates how to add job parameters like "<b>dataFileName</b>". The "<b>jobLauncher</b>" and "<b>myappJob</b>" are injected from the above context file. <br />
<br />
<pre class="brush: csharp"> 
package myapp.batch.myapp;
//..
import java.math.BigDecimal;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import javax.annotation.Resource;

import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.batch.core.Job;
import org.springframework.batch.core.JobExecution;
import org.springframework.batch.core.JobParameters;
import org.springframework.batch.core.JobParametersBuilder;
import org.springframework.batch.core.JobParametersInvalidException;
import org.springframework.batch.core.launch.JobLauncher;
import org.springframework.batch.core.repository.JobExecutionAlreadyRunningException;
import org.springframework.batch.core.repository.JobInstanceAlreadyCompleteException;
import org.springframework.batch.core.repository.JobRestartException;
import org.springframework.batch.test.StepScopeTestExecutionListener;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.TestExecutionListeners;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.support.DependencyInjectionTestExecutionListener;
import org.springframework.test.context.transaction.TransactionConfiguration;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.util.StringUtils;

@RunWith(SpringJUnit4ClassRunner.class)
@TestExecutionListeners(
{
    DependencyInjectionTestExecutionListener.class, StepScopeTestExecutionListener.class
})
@TransactionConfiguration(transactionManager = "txManager", defaultRollback = true)
@Transactional
@ContextConfiguration(locations =
{"/applicationContext-test.xml"
})

public class MyappBatchJobTest
{
    
    private final static Logger logger = LoggerFactory.getLogger(MyappBatchJobTest.class);
    
 private static final String BATCH_JOB_ID_FIELD_NAME = "batchJobIdFieldName";
    private static final String BATCH_JOB_ID_FIELD_VALUE = "batchJobId";
    private static final String BATCH_ID = "batchId";
    
    @Autowired
    private JobLauncher jobLauncher;
    
    @Resource(name = "myappJob")
    private Job job;
    

    public int kickOffTheBatchJob(String dataFileName)
            throws JobExecutionAlreadyRunningException,
            JobRestartException, JobInstanceAlreadyCompleteException, JobParametersInvalidException, ParseException
    {
        
  //Adding job paramters
        JobParameters jobParameters = new JobParametersBuilder()
                .addString("dataFileName", dataFileName)
                .addString("metaDataFileName", metadataFileName)
                .addString(BATCH_JOB_ID_FIELD_NAME, BATCH_JOB_ID_FIELD_VALUE)
                .addString(BATCH_ID, getBatchId())
                .addDate("valuationDate", getValuationDate())
                .addLong("parentBatchJobId", PARENT_BATCHJOB_ID)
                .toJobParameters();
        
        JobExecution jobExecution = jobLauncher.run(job, jobParameters);
        
        int batchJobId = jobExecution.getExecutionContext().getInt("batchJobId");
        
        logger.info("The cash forecast batch job has started ................");
        
        if (positiveTest)
        {
            Assert.assertEquals("job failed: ", "COMPLETED", jobExecution.getExitStatus().getExitCode());
        }
        else
        {
            Assert.assertEquals("job should have failed: ", "FAILED", jobExecution.getExitStatus().getExitCode());
        }
        Assert.assertTrue("Batch job Id is not created: ", batchJobId &gt;= 1);
        
        batchJobIds.add(batchJobId);
        
        return batchJobId;
    }
}

</pre>
<br />
<b>Q</b>. How will you write a custom reader that reads data in chunks as shown below?<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-GXcaGBCODns/Ud5DuW2HuQI/AAAAAAAABtI/YYciTZgG-c8/s1600/Spring-batch-feed.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="164" src="http://1.bp.blogspot.com/-GXcaGBCODns/Ud5DuW2HuQI/AAAAAAAABtI/YYciTZgG-c8/s640/Spring-batch-feed.jpg" width="640" /></a></div>
Each account has an <b>OPENBAL </b>txnCd record<b> </b>followed by 0 or more transactional records for that account.<b><br /></b><br />
<br />
<b>A</b>. Here is the custom reader "<b>groupCfDetailsReader</b>" that chunks and delegates each record to "<b>myappFileItemReader</b>" as defined in the above context file. <br />
<br />
<b>1</b>. Custom file handler that groups records<br />
<br />
<pre class="brush: csharp"> 
package myapp.item.reader;

import java.util.ArrayList;

import org.springframework.batch.item.ExecutionContext;
import org.springframework.batch.item.ItemStreamException;
import org.springframework.batch.item.ItemStreamReader;
import org.springframework.batch.item.ParseException;
import org.springframework.batch.item.UnexpectedInputException;

import myapp.model.MyappDetail;
import myapp.model.MyappParent;

public class MyappItemReader implements ItemStreamReader&lt;MyappParent&gt; {

 private ItemStreamReader&lt;MyappDetail&gt; delegate;
 private MyappDetail curItem = null;

 @Override
 public MyappParent read() {
  MyappParent parent = null;
  try {

   if (curItem == null) {
    curItem = delegate.read();
   }

   if (curItem != null) {
    parent = new MyappParent();
    parent.setBalanceDetail(curItem);
   }

   curItem = null;

   if (parent != null) {
    parent.setTxnDetails(new ArrayList&lt;MyappDetail&gt;());
    MyappDetail detail = peek();
    while (detail != null &amp;&amp; !"OPENBAL".equalsIgnoreCase(peek().getTxnCd())) {
     parent.getTxnDetails().add(curItem);
     curItem = null;
     detail = peek();
    }
   }

  }

  catch (Exception e) {
   e.printStackTrace();
  }

  return parent;
 }

 public MyappDetail peek() throws Exception, UnexpectedInputException, ParseException {
  if (curItem == null) {
   curItem = delegate.read();
  }

  return curItem;
 }

 @Override
 public void close() throws ItemStreamException {
  delegate.close();
 }

 @Override
 public void open(ExecutionContext arg0) throws ItemStreamException {
  delegate.open(arg0);
 }

 @Override
 public void update(ExecutionContext arg0) throws ItemStreamException {
  delegate.update(arg0);

 }

 public void setDelegate(ItemStreamReader&lt;MyappDetail&gt; delegate) {
  this.delegate = delegate;
 }
}

</pre>
<br />
<b>2</b>. The model classes used to map data to Java POJOs. The container class.<br />
<br />
<pre class="brush: csharp"> 
package myapp.model;

import java.io.Serializable;
import java.util.List;

public class MyappParent implements Serializable {

 private static final long serialVersionUID = 1L;
 
 private String metaData;
 private MyappDetail balanceDetail;
 private List&lt;MyappDetail&gt; txnDetails;
 
 public MyappDetail getBalanceDetail() {
  return balanceDetail;
 }
 public void setBalanceDetail(MyappDetail balanceDetail) {
  this.balanceDetail = balanceDetail;
 }
 public List&lt;MyappDetail&gt; getTxnDetails() {
  return txnDetails;
 }
 public void setTxnDetails(List&lt;MyappDetail&gt; txnDetails) {
  this.txnDetails = txnDetails;
 }
 
 public String getMetaData() {
  return metaData;
 }
 public void setMetaData(String metaData) {
  this.metaData = metaData;
 }
 
 @Override
 public String toString() {
  return "MyappHeader [balanceDetail=" + balanceDetail + ", txnDetails=" + txnDetails + "]";
 }
}
</pre>
<br />
The detail class that represents each record.<br />
<br />
<pre class="brush: csharp"> 
package myapp.model;

import java.io.Serializable;
import java.math.BigDecimal;
import java.util.Date;

public class MyappDetail implements Serializable
{    
    private static final long serialVersionUID = 1L;
  
    private String accountCd;
 private String currencyCd;
    private String txnCd;
    private BigDecimal amount;
    
 //getters, setters, etc  
}
</pre>
<br />
<b>3</b>. The mapper class that maps data to POJO model defined above.<br />
<br />
<pre class="brush: csharp"> 
package myapp.mapper;

import myapp.model.MyappDetail;

import java.math.BigDecimal;
import java.text.ParseException;

import org.apache.commons.lang.time.DateUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.batch.item.file.mapping.FieldSetMapper;
import org.springframework.batch.item.file.transform.FieldSet;
import org.springframework.validation.BindException;

public class MyappFieldSetMapper implements FieldSetMapper&lt;MyappDetail&gt;
{
    private final static Logger logger = LoggerFactory.getLogger(MyappFieldSetMapper.class);
    
    private static final String DATE_FORMAT = "dd/MM/yyyy";
    
    @Override
    public MyappDetail mapFieldSet(FieldSet fs) throws BindException
    { 
        if (fs == null)
        {
            return null;
        }
        
        MyappDetail appd = new MyappDetail();
        appd.setAccountCd(fs.readString("accountCd"));
  appd.setCurrencyCd(fs.readString("currency"));
        appd.setTxnCd(fs.readString("txnCd"));
        BigDecimal amount = fs.readBigDecimal("amount");
        appd.setAmount(amount != null ? amount : BigDecimal.ZERO);  
       
        return appd;        
    } 
}
</pre>
<br />
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/spring%20batch">spring batch</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/spring-batch-code-snippets.html" title="permanent link"> 7/17/2013 10:40:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/spring-batch-code-snippets.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/spring-batch-code-snippets.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=6950431999756481627" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=6950431999756481627&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 16, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="2578794218186821710"></a>
    
         
    


    <h3 class="post-title">
	 
	 Java Security Interview Questions and Answers: Single Sign-On (i.e. SSO) with Spring 3 Security
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><b>Q</b>. Can you provide a high level overview of the "access control security" in a recent application you had worked?<br />
<b>A</b>. As shown below, SiteMinder is configured to intercept the calls to authenticate the user. Once the user is authenticated, a HTTP header "SM_USER" is added with the authenticated user name. For example "123". The user header is passed to Spring 3 security. The "<b>Security.jar</b>" is a custom component that knows how to retrieve user roles for a given user like 123 from a database or LDAP server. This custom component is responsible for creating a <b>UserDetails </b>Spring object that contains the roles as authorities. Once you have the authorities or roles for a given user, you can restrict your application URLs and functions to provide proper access control.<br />
<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-dOU2oQ0x5i0/UeOj_85cT9I/AAAAAAAABto/gJbV1Y7BQmQ/s1600/SSO-Spring-security.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="444" src="http://3.bp.blogspot.com/-dOU2oQ0x5i0/UeOj_85cT9I/AAAAAAAABto/gJbV1Y7BQmQ/s640/SSO-Spring-security.jpg" width="640" /></a></div>
<br />
<br />
<br />
<br />
<br />
<b>Q.</b> What is SSO (i.e. Single Sign-ON)?<br />
<b>A</b>. Single sign-on <b>(SSO) </b>is a session/user authentication process that permits a user to enter one name and password in order to access multiple applications. The process authenticates the user for all the applications they have been given rights to and eliminates further prompts when they switch applications during a particular session. For example, <b>SiteMinder</b>, <b>TivoliAccessManager </b>(i.e. TAM), etc provides SSO. As shown in the diagram above SiteMinder authenticates the user and adds the <b>SM_USER</b> HTTP header to the application. It removes all the "SM" headers and add them after authenticating the user. This prevents amy malicious headers being injected via the browser with plugins like "Firefox Modify headers".<br />
<br />
<br />
<b>Q</b>. How will you go about implementing authentication and authorization in a web application?<br />
<b>A</b>. Use SSO application like SIteminder or Tivoli Access Manager to authenticate users, and Spring security 3 for authorization as described in the following Spring 3 security tutorials. Spring security <b>pre-authentication</b> scenario assumes that a valid authenticated user is available via&nbsp; either Single Sign On (SSO) applications like Siteminder, Tivoli, etc or a X509 certification based authentication. The Spring security in this scenario will only be used for authorization. The links to the tutorials below demonstrates this with code.<br />
<br />
<ul>
<li><span style="font-size: large;"><a href="http://java-success.blogspot.com.au/2013/05/spring-security-pre-authentication.html" target="_blank">Spring 3 security - part 1</a></span></li>
<li><span style="font-size: large;"><a href="http://java-success.blogspot.com.au/2013/05/spring-security-pre-authentication_15.html" target="_blank">Spring 3 security - part 2</a></span></li>
</ul>
<br />
<b>Q</b>. Can you describe your understanding of <b>SSL</b>, <b>key stores</b>, and<b> trust stores</b>?<br />
<b>A</b>.&nbsp; <a href="http://java-success.blogspot.com.au/2011/11/java-interview-q-on-trustore-vs.html" target="_blank">SSL, key stores and trust stores</a><br />
<br />
<br />
<b>Q</b>. What tools do you use to test your application for security holes?<br />
<b>A</b>. These tests are known as PEN (i.e. penetration) testing or security vulnerability testing. There are tools like<br />
<ul>
<li><b>SkipFish</b> (web application security scanner) from Google.</li>
<li><b>Tamper data</b> from Firefox.&nbsp;</li>
</ul>
<br />
<b>Q. </b>What is a <b>two factor authentication</b>?<br /><b>A</b>. Two-factor authentication is a security process in which the user provides two means of identification. This includes<br />
<ul>
<li>something you have and something you know. For example, a bank card is which something you have and a PIN (i.e. Personal Identification Number) is something you know.</li>
<li>two forms of identification like password and a biometric data like finger print or voice print. Some security procedures now require three-factor authentication, which involves possession of a physical token and a password, used in conjunction with biometric data.&nbsp;</li>
</ul>
<b>Q.</b> What are the different layers of security?<br /><b>A. </b><br /><br /><b>Application-Layer Security</b>: For example, Spring 3 Security,<b> JAAS</b> (Java Authentication and Authorization) that provides a set of APIs to provide authentication and authorization (aka access control), etc. JAAS provides pluggable and extendable&nbsp; framework for programmatic user authentication and authorization at the <b>JSE level</b> (NOT JEE level). JAAS provides security at the JVM level (e.g. classes, resources). JAAS is the the core underlying technology for JEE Security. Spring security tackles security at the JEE level (e.g. URLs, Controller methods, service methods, etc)<br /><br /><b>Transport-Layer Security</b>: Java Secure Sockets Extension (JSSE) provides a framework and an implementation for a Java version of the Secure Sockets Layer (<b>SSL</b>) and Transport Layer Security (<b>TLS</b>) protocols and includes functionality for data encryption, server authentication, message integrity, and optional client authentication to enable secure Internet communications. (TLS) 1.0 / (SSL) 3.0, is the mechanism to provide private, secured and reliable communication over the internet between the client and the server. It is the most widely used protocol that provides <b>HTTP<u>S</u> </b>for internet communications between the client (web browsers) and web servers. <br /><br /><b>Message-Layer Security</b>: In message-layer security, security information is contained within the SOAP message and/or SOAP message attachment, which allows security information to travel along with the message or attachment. For example, the credit card number is signed by a sender and encrypted for a particular receiver to decrypt.<b> Java Generic Security Services</b> (Java GSS-API) is a token-based API used to securely exchange messages between communicating applications. The GSS-API offers application programmers uniform access to security services on top of a variety of underlying security mechanisms, including Kerberos. The advantage of this over point to point transport layer security is that the security stays with the message over all hops and after the message arrives at its destination. So, it can be used with intermidiaries over multiple hops and protocols (e.g. HTTP, JMS, etc). The major disadvantage is that it is more complex to implement and requires more processing.<br /><br /><b>Note</b>: Simple Authentication and Security Layer (<b>SASL</b>) is a framework for authentication and data security in Internet protocols.&nbsp; SASL is an Application-Layer security that supports TLS to compliment the services offered SASL.<br /><br /><b>Note</b>: The Java security API is complicated and Spring security as demonstrated via the above tutorials might be a better alternative. <br />
<br />
<ul>
</ul>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Architecture">Architecture</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/security">security</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Spring%20security">Spring security</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/java-security-interview-questions-and.html" title="permanent link"> 7/16/2013 11:28:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/java-security-interview-questions-and.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/java-security-interview-questions-and.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/07/java-security-interview-questions-and.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=2578794218186821710" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=2578794218186821710&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 15, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="5847498537424270514"></a>
    
         
    


    <h3 class="post-title">
	 
	 JasperReports xls download via Spring MVC
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//-->
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br />
This is an extension to the <a href="http://java-success.blogspot.com.au/2013/06/jasperreports-50-tutorial-with-ireport.html">JasperReport step by step tutorial</a> to demonstrate how to generate an Excel file. This extends the tutorial on <a href="http://java-success.blogspot.com.au/2013/07/jasperreports-generating-excel-file.html">stand-alone excel file</a> to demonstrate how to produce xls as a file attachment via Spring MVC RESTful service call.<br />
<br />
The <b>controller </b>class will be something like<br />
<br />
<!-- INFOLINKS_OFF -->
<pre class="brush: csharp"> 
//...
@Controller
public class MyApproller
{

    @Resource(name = "myAppService")
    private MyAppService myAppService;
 
 @Resource(name = "reportWriter")
    private ReportWriter reportWriter;

 @RequestMapping(
            value = "/person.xls",
            method = RequestMethod.GET,
            produces = "application/vnd.ms-excel")
 @ResponseBody
 public void getCashForecastCSV(HttpServletResponse response) throws Exception
 {
  //get the report data from the service layer
  Collection&lt;Person&gt; reportData = myAppService.getReportData();
  
  //get the parameters as a Map from the service layer
  Map&lt;String, Object&gt; reportParameters = myAppService.getReportParameters();
  
  //generate the xls report 
  byte[] xlsAsStringForPerson = reportWriter.getXlsAsStringForPerson(reportData, reportParameters);
  
  response.setContentType("application/vnd.ms-excel");
  response.addHeader("Content-Disposition", "attachment; filename=" + "person.xls");
  
  //since binary, write it as stream
  response.getOutputStream().write(xlsAsStringForPerson);
 }

//..
}
</pre>
<br />
<br />
<pre class="brush: csharp"> 
//...........
@Service(value = "myAppService")
public class MyAppServiceImpl implements MyAppService {

 public Collection&lt;Person&gt; getReportData()
    {
        //declare a list of object
        List&lt;Person&gt; data = new LinkedList&lt;Person&gt;();
        Person p1 = new Person();
        p1.setFirstName("John");
        p1.setSurname("Smith");
        p1.setAge(Integer.valueOf(5));
        data.add(p1);
        return data;
    }
    
    public Map&lt;String, Object&gt; getReportParameters()
    {
        Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();
        params.put("footerText", "Just to demonstrate how to pass parameters to report");
        return params;
    }
}
</pre>
<br />
Finally, the writer class the creates the <b>xls </b>file from the data<br />
<br />
<pre class="brush: csharp"> 
//..
import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import java.util.Collection;
import java.util.Map;

import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.export.JRXlsExporter;
import net.sf.jasperreports.engine.export.JRXlsExporterParameter;
import net.sf.jasperreports.engine.xml.JRXmlLoader;

import org.springframework.stereotype.Component;
//...

@Component(value = "reportWriter")
public class JasperReportWriterImpl implements ReportWriter
{
    
    public static JasperDesign jasperDesign;
    public static JasperPrint jasperPrint;
    public static JasperReport jasperReport;
    public static String reportTemplateUrl = "jasper/person-template.jrxml";
    
    public byte[] getXlsAsStringForPerson(Collection&lt;Person&gt; reportData, Map&lt;String, Object&gt; reportParameters)
    {
        ByteArrayOutputStream output = null;
        
        try
        {
            InputStream resourceAsStream = Thread.currentThread().getContextClassLoader()
                    .getResourceAsStream(reportTemplateUrl);
            //get report file and then load into jasperDesign
            jasperDesign = JRXmlLoader.load(resourceAsStream);
            //compile the jasperDesign
            jasperReport = JasperCompileManager.compileReport(jasperDesign);
            
            output = new ByteArrayOutputStream();
            
            //fill the ready report with data and parameter
            jasperPrint = JasperFillManager.fillReport(jasperReport, reportParameters,
                    new JRBeanCollectionDataSource(
                            reportData));
            
            //coding for Excel
            JRXlsExporter exporterXls = new JRXlsExporter();
            exporterXls.setParameter(JRXlsExporterParameter.JASPER_PRINT, jasperPrint);
            exporterXls.setParameter(JRXlsExporterParameter.OUTPUT_STREAM, output);
            exporterXls.setParameter(JRXlsExporterParameter.IS_ONE_PAGE_PER_SHEET, Boolean.TRUE);
            exporterXls.setParameter(JRXlsExporterParameter.IS_DETECT_CELL_TYPE, Boolean.TRUE);
            exporterXls.exportReport();
            
        }
        catch (JRException e)
        {
            e.printStackTrace();
        }
        
        return output.toByteArray();
    }
}
</pre>
<br />
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/JasperReports">JasperReports</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/jasperreports-xls-download-via-spring.html" title="permanent link"> 7/15/2013 10:47:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/jasperreports-xls-download-via-spring.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/jasperreports-xls-download-via-spring.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=5847498537424270514" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=5847498537424270514&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 12, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="2453225999729692491"></a>
    
         
    


    <h3 class="post-title">
	 
	 iReport 5.0 finding your way around
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><b>iReport </b>is used to design your report templates. Here is the high level diagram of the key buttons and windows. If any of the windows are not there, you can add them from the menu item "<b>Window</b>".<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-7HDNf0Ypde0/UduAH7c0_TI/AAAAAAAABsI/fkhYcDskj0s/s1600/iReport-intro.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="348" src="http://3.bp.blogspot.com/-7HDNf0Ypde0/UduAH7c0_TI/AAAAAAAABsI/fkhYcDskj0s/s640/iReport-intro.jpg" width="640" /></a></div>
<br />
The report is divided into "<b>bands</b>" and you can drag and drop <b>report elements</b> from the "<b>palette</b>" into the relevant bands. You can define the band and report elements properties via the "<b>properties</b>" window. New parameters, fields, etc can be added from the "<b>Report Inspector</b>" by right-clicking to bring up the <b>contextual menu</b>.<br />
<br />
You can bring up the contextual menu on a "<b>report element</b>" as shown below to perform relevant tasks. Here is an example on a "<b>Static Text</b>" report element.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-2YesbX5ISjk/UduoWYl5zwI/AAAAAAAABsY/WwRjtXTRBxM/s1600/iReport-intro-2.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="582" src="http://1.bp.blogspot.com/-2YesbX5ISjk/UduoWYl5zwI/AAAAAAAABsY/WwRjtXTRBxM/s640/iReport-intro-2.jpg" width="640" /></a></div>
<br />
You can also bring it up on a "<b>Text Field</b>" report element as shown below. The "<b>Edit expression</b>" brings up the expression editor.<br />
<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-pF8htPPls-8/Uduo5apQC8I/AAAAAAAABsg/MRjh3SRiwps/s1600/iReport-intro-3.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="514" src="http://1.bp.blogspot.com/-pF8htPPls-8/Uduo5apQC8I/AAAAAAAABsg/MRjh3SRiwps/s640/iReport-intro-3.jpg" width="640" /></a></div>
<br />
<br />
Finally, you can view it on three different layouts.<br />
<br />
1. <b>Designer </b>(as shown above)<br />
2. <b>XML </b>(shows the .jrxml file)<br />
3. The <b>Preview </b>in your preferred output like "<b>PDF Preview</b>", "<b>HTML Preview</b>",&nbsp; "<b>XLS Preview (Using JExcelAPI)</b>", etc that you select from the top "<b>Preview</b>" menu. This allows you to preview the actual report generated.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-yc59zo1cKGI/UduqLaoN5_I/AAAAAAAABs4/o4ocPLr7YEE/s1600/iReport-intro-4.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="340" src="http://3.bp.blogspot.com/-yc59zo1cKGI/UduqLaoN5_I/AAAAAAAABs4/o4ocPLr7YEE/s640/iReport-intro-4.jpg" width="640" /></a></div>
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/JasperReports">JasperReports</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/ireport-50-finding-your-way-around.html" title="permanent link"> 7/12/2013 03:02:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/ireport-50-finding-your-way-around.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/ireport-50-finding-your-way-around.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/07/ireport-50-finding-your-way-around.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=2453225999729692491" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=2453225999729692491&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 11, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="8834102506502149470"></a>
    
         
    


    <h3 class="post-title">
	 
	 JasperReports generating a PDF file
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
This is an extension to the <a href="http://java-success.blogspot.com.au/2013/06/jasperreports-50-tutorial-with-ireport.html">JasperReport step by step tutorial</a> to demonstrate how to generate a PDF file from the <b>Main.java</b>. To generate a PDF file you&nbsp; need the<b> iText.jar </b>as a dependency. Here are the Maven dependency files required.<br />
<br />
<pre class="brush: csharp">  
&lt;!-- Jasper reports --&gt;
&lt;dependency&gt;
 &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;
 &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;
 &lt;version&gt;5.0.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
 &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
 &lt;version&gt;2.1.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;com.lowagie&lt;/groupId&gt;
 &lt;artifactId&gt;itext&lt;/artifactId&gt;
 &lt;version&gt;2.1.7&lt;/version&gt;
&lt;/dependency&gt;
</pre>
<br />
<br />
Next, the <b>Main.java</b> that writes the output to a PDF file.<br />
<!--INFOLINKS_OFF -->

<br />
<pre class="brush: csharp">  
package com.mycompany.app.jasper;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Collection;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.export.JRPdfExporter;
import net.sf.jasperreports.engine.export.JRPdfExporterParameter;
import net.sf.jasperreports.engine.xml.JRXmlLoader;

public class Main
{
    
    public static JasperDesign jasperDesign;
    public static JasperPrint jasperPrint;
    public static JasperReport jasperReport;
    public static String reportTemplateUrl = "person-template.jrxml";
    
    public static void main(String[] args) throws IOException
    {
        try
        {
            InputStream resourceAsStream = Thread.currentThread().getContextClassLoader()
                    .getResourceAsStream(reportTemplateUrl);
            //get report file and then load into jasperDesign
            jasperDesign = JRXmlLoader.load(resourceAsStream);
            //compile the jasperDesign
            jasperReport = JasperCompileManager.compileReport(jasperDesign);
            
            ByteArrayOutputStream output = new ByteArrayOutputStream();
            OutputStream outputfile = new FileOutputStream(new File("c:/temp/person.pdf"));
            
            //fill the ready report with data and parameter
            jasperPrint = JasperFillManager.fillReport(jasperReport, getParameters(),
                    new JRBeanCollectionDataSource(
                            findReportData()));
            
            //coding for PDF
            JRPdfExporter exporterPdf = new JRPdfExporter();
            exporterPdf.setParameter(JRPdfExporterParameter.JASPER_PRINT, jasperPrint);
            exporterPdf.setParameter(JRPdfExporterParameter.OUTPUT_STREAM, output);
            exporterPdf.exportReport();
            outputfile.write(output.toByteArray());
            
        }
        catch (JRException e)
        {
            e.printStackTrace();
        }
    }
    
    private static Collection&lt;Person&gt; findReportData()
    {
        //declare a list of object
        List&lt;Person&gt; data = new LinkedList&lt;Person&gt;();
        Person p1 = new Person();
        p1.setFirstName("John");
        p1.setSurname("Smith");
        p1.setAge(Integer.valueOf(5));
        data.add(p1);
        return data;
    }
    
    private static Map&lt;String, Object&gt; getParameters()
    {
        Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();
        params.put("footerText", "Just to demonstrate how to pass parameters to report");
        return params;
    } 
}
</pre>
<br />
If you run the above class, a PDF file named<b> person.pdf </b>will be generated under c:\temp folder.<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/JasperReports">JasperReports</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/jasperreports-generating-pdf-file.html" title="permanent link"> 7/11/2013 10:26:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/jasperreports-generating-pdf-file.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/jasperreports-generating-pdf-file.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/07/jasperreports-generating-pdf-file.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=8834102506502149470" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=8834102506502149470&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 10, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="4663234875130422138"></a>
    
         
    


    <h3 class="post-title">
	 
	 Character encoding and decoding
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><br />
<b>Q</b>. What do you understand by the terms character encoding and decoding?<br />
<b>A</b>. To a computer, text characters are symbols. These symbols are assigned numbers (integers) in order to store these symbols in memory. <b>Encoding </b>is the system by which these numbers are assigned. <b>Decoding </b>is the way in which these numbers are converted to characters.<br />
<br />
<br />
<b>Q.</b> What is the difference between ASCII and UTF-8?<br />
<b>A. </b><br />
<br />
<b>ASCII </b>was the initial encoding, which only supported 256 letters assuming that the computers were created for english speaking people with some special characters. Google for ASCII table to see those characters. This made sense then when the computer memory was limited as well. <br />
<br />
<b>UTF-8</b> has the added benefit of character support beyond "ASCII-characters". UTF-8 uses Unicode, which has a different way of thinking about characters. There are different Unicode standards and UTF-8 is the most popular standard used in internet as it assumes that the leading bits are 0s <br />
<ul>

</ul>
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-dizrEfnsVuQ/UaLJDghgF8I/AAAAAAAABh8/OQFwY3ZNbD4/s1600/UTF-8.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="150" src="http://2.bp.blogspot.com/-dizrEfnsVuQ/UaLJDghgF8I/AAAAAAAABh8/OQFwY3ZNbD4/s640/UTF-8.jpg" width="640" /></a></div>
<br />
<br />
<br />
Every letter in every alphabet is assigned a magic number called a "code point".&nbsp; ASCII has 128 code points, whereas a Unicode comprises 1, 114, 112 code points in the range 0 (hex) to 10FFFF (hex). Google for Unicode table (e.g http://unicode-table.com/en/). In UTF-8, every code point from 0-127 is stored in a single byte. Only code points 128 and above are stored using 2, 3, in fact, up to 6 bytes. This means English text looks exactly the same in UTF-8 as it did in ASCII.&nbsp; The characters are referred to by their "Unicode code point". Unicode code points are written in hexadecimal (to keep the numbers shorter), preceded by a "U+". The character A is represented as U+0041.<br />
<br />
<br />
<b>Q</b>. What is the significance of character encoding?<br />
<b>A</b>. Every string has an encoding associated with it. There is no such thing as a plain text.&nbsp; If you have a string, in memory, in a file, web browser, or in an email message, you have to know what encoding it is in or you cannot interpret it or display it to users correctly. If you open a document and it looks like this, there's one and only one reason for it: Your text editor, browser, word processor or whatever else that's trying to read the document is assuming the wrong encoding. The document is not broken, and you simply need to select the right encoding to display the document. <br />
<br />
For an <b>email message</b>, you are expected to have a string in the header of the form<br />
<br />
&nbsp;&nbsp;&nbsp; Content-Type: text/plain; charset="UTF-8"<br />
<br />
<br />
In <b>HTML 5</b><br />
<br />
&nbsp;&nbsp; &lt;meta charset="UTF-8"&gt;<br />
<br />
In <b>HTML 4</b><br />
<br />
&nbsp;&nbsp; &lt;meta http-equiv="Content-type" content="text/html;charset=UTF-8"&gt;<br />
&nbsp;&nbsp; <br />
Setting encoding to UTF-8 with <b>Java Servlets</b>:<br />
<br />
&nbsp;&nbsp;&nbsp; resource.setContentType ("text/html;charset=utf-8");<br />
<br />
<br />
<b>Q</b>. Does java.lang.String class in Java has an encoding?<br />
<b>A</b>. No.&nbsp; the byte[] array has an encoding. For example:<br />
<br />
<pre class="brush: csharp">package com.mycompany.app;

import java.io.UnsupportedEncodingException;
import java.nio.charset.Charset;

public class CharacterEncoding
{
    public static void main(String[] args) throws UnsupportedEncodingException
    {
        System.out.println(Charset.defaultCharset());
        
        String str = "Copy Right \u00A9";
        
        //uses the default encoding
        System.out.println(new String(str.getBytes()));
        
        //uses utf-8 encoding
        System.out.println(new String(str.getBytes("utf-8")));
        
    }
}


</pre>
When I ran the above in eclipse, I got the following output.<br />
<br />
<pre class="brush: csharp">windows-1252
Copy Right Â©
Copy Right Ã‚Â©
</pre>
<br />
<br />
This was using Eclipse IDE's default Text encoding.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-IgaK4b24TMM/UaLao0m7xGI/AAAAAAAABiM/Anqw60N3Ois/s1600/UTF-8.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="316" src="http://4.bp.blogspot.com/-IgaK4b24TMM/UaLao0m7xGI/AAAAAAAABiM/Anqw60N3Ois/s640/UTF-8.jpg" width="640" /></a></div>
&nbsp; <br />
When I changed this encoding to UTF-8 via Window --&gt; Preferences --&gt; General --&gt; Workspace<br />
&nbsp; <br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-wSAeUMpZXDY/UaLaw6VGcKI/AAAAAAAABiU/d1LqQ1HB-AM/s1600/UTF-8-2.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="324" src="http://1.bp.blogspot.com/-wSAeUMpZXDY/UaLaw6VGcKI/AAAAAAAABiU/d1LqQ1HB-AM/s640/UTF-8-2.jpg" width="640" /></a></div>
<br />
The output has changed to as shown below. <br />
<br />
<pre class="brush: csharp">
UTF-8
Copy Right Â©
Copy Right Â©
</pre>
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Core%20Java">Core Java</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/character-encoding-and-decoding.html" title="permanent link"> 7/10/2013 11:16:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/character-encoding-and-decoding.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/character-encoding-and-decoding.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/07/character-encoding-and-decoding.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=4663234875130422138" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=4663234875130422138&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 9, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="304227719530937974"></a>
    
         
    


    <h3 class="post-title">
	 
	 Java career training resources for Java developers
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><h2>
 This Java blog is all about Java developer training the questions and answers way. The training materials are focused on</h2>
<ul>
<li>Getting your <b>Java job</b> done in your regular job.</li>
<li>Preparing for your <b>Java job</b> interview.</li>
<li>Preparing  your <b>Java job</b> resume.</li>
<li>Finding ways to break free from a stagnating <b>Java job</b>.</li>
<li>Getting your first Java job with good technical, job hunting, and resume writing skills and much needed interview preparation.</li>
</ul>
<br />
<br />
The examples are not "Hello world" type, but more industrial strength. You can <b>search</b> for wide range of topics like Spring, Hibernate, JSF, JasperReports, JMeter, Spring batch, Spring security, JAXB, Drools, JavaScript, Angular JS, and many more. 
<br />
<br />
<h2>
Are you a Java developer?</h2>
<ul>
<li><b>If you are an interviewer</b>, use these Java career training resources to hire quality candidates. </li>
<li><b>If you are an interviewee</b>, use these Java career training resources to standout from your competition. </li>
<li><b>If you are on a regular job</b> use these Java career training resources as a quick reference to get your job done. </li>
<li><b>If you are feeling stagnated</b>, you can use these Java career training resources to get your regular technical doses to enhance your skills or stay relevant. </li>
</ul>
<br />
<br />
<div style="background-color: #fffff4; border-color: black; border: solid 2px; margin: 5px; padding: 10px;">
This Java/JEE career companion site is to breed confidence and help you <b>take the road less traveled </b>by presenting yourself in a better light compared to those who are more qualified than you are through <b>preparation</b> and <b>being in the know how</b>.&nbsp; Here are some of the feedback. <br />
<br />
<div style="color: #6aa84f; text-align: center;">
<b>"I used the book to get 6 jobs in 2 weeks. out of which one is an architect job. kudos to the author"
</b></div>
<br />
<div style="color: #6aa84f; text-align: center;">
<b>"If a person manages to give answers as given in book, he/she can easily bag a new job..."
</b></div>
<div style="text-align: center;">
<br /></div>
<div style="color: #6aa84f; text-align: center;">
<b>"After landing a job I have kept on reading the book and recommend it to all my friends..." 
</b></div>
<br />
The paid and free resources from this site covers a wide range of topics like Java/JEE core concepts, 16 must know technical key areas, resume writing, interview preparation, networking, and job hunting. The answers are detailed enough for you to not only <b>talk the talk, but also to walk the walk</b>.<br />
<br />
<u>Not for you to memorize the answers prior to job interviews for a short term success</u>, but for you to brush up on vast number of Java topics at one place prior to job interviews or for you to <b>fast track </b>your Java career by proactively acquiring the much needed experience with <u>lots of</u> <span style="font-size: large;">code</span>, <span style="font-size: large;">practical examples <span style="font-size: small;">--</span> <span style="font-size: small;">no "Hello World" examples :) </span></span>, <span style="font-size: large;">diagrams</span>, and <span style="font-size: large;">industrial scenarios </span>covered here for a more permanent and long term success.<br />
<br />

<b><span style="font-size: large;">How do you benefit with Java Interview Questions? </span></b></div>
<br />
<table>
<tbody>
<tr>
<td><ul>
<li>Reach your career goals a lot sooner by convincing your prospective employer to overlook just the number of years of experience you have with your thorough and detailed job interview answers.&nbsp;</li>
<li>Increase your earning potential with multiple job offers or by becoming a freelance contractor/consultant.</li>
<li>Impress your code reviewers with quality design and code.</li>
<li>Add value in the crisis and team meetings with your know hows and quick brush up on a particular topic like identifying thread-safety or performance issues.&nbsp;</li>
<li>Expand your horizons and go places with the confidence that you can get a Java job even in a difficult job market with your <b>resume writing skills</b>, <b>technical know hows</b>, <b>interviewing skills</b>, <b>networking</b>, and <b>job hunting skills</b>.</li>
<li>The questions and answers approach gives a different perspective to acquire and clarify the fundamentals.&nbsp;&nbsp;</li>
</ul>
</td>
<td><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* RHS - Medium Rectangle */
google_ad_slot = "9108013315";
google_ad_width = 300;
google_ad_height = 250;
google_ad_channel ="7273534216" ;
//--&gt;</script>
<script src="//pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
</td></tr>
</tbody>
</table>


<table>
<tbody>
<tr>

<td colspan="2"><br />
<span style="font-size: medium;">More of your Java career related questions like 
</span><br />
<ul><span style="font-size: medium;">
<li>Should I get certified? </li>
<li>How to get a break in Java? </li>
<li>What are the 16 technical key areas?</li>
<li> What gives me the real job security?</li>
</span></ul>
<span style="font-size: medium;">

answered @ <span style="font-size: 16pt;">
<a href="http://java-success.blogspot.com.au/2011/09/why-blog-on-java-interview-questions.html">Why prepare with these resources?</a></span></span>
</td>
</tr>
</tbody></table>
<br />
<h2>
 As a Java developer, you hold the key to your Java career success</h2>
<div style="background: #FDFAF9; border: 1px groove; padding: 20px;">
Even though the â€œ<span style="font-weight: bold;">devil is in the details</span>â€, your career success in Java development depends on your â€œ<span style="font-weight: bold;">abstract thinking</span>â€ and how well you communicate that thinking. <span style="font-weight: bold;">Diagrams </span>and <span style="font-weight: bold;">working code</span> will clarify many concepts and key areas to proactively acquire much needed experience to fast track your Java career. It worked for me, and hope will do for you as well.

<br />
<br />
There is no substitute for <span style="font-weight: bold;">hands on experience</span>, so take the time to practice the code. If the code or explanation is not clear, post your concerns via comments. I will endeavor to improve on the explanation. There is no such thing as real job security in IT, the real security in IT is all about having the right skills and experience.

<br />
<br />
You hold the key to your Java career success, and hope my Java career training resources will help you reach your career goals a lot sooner. 
</div>
<div style="clear:both; padding-bottom:0.25em"></div>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/why-prepare-how-do-you-benefit-what-do.html" title="permanent link"> 7/09/2013 06:52:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/why-prepare-how-do-you-benefit-what-do.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/why-prepare-how-do-you-benefit-what-do.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=304227719530937974" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=304227719530937974&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  





  
     
  <!-- Begin .post -->
  <div class="post"><a name="1164490585008796452"></a>
    
         
    


    <h3 class="post-title">
	 
	 Core Java coding question - converting String to BigDecimal
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div>There are times while coding you need to convert an entity of one data type to another or validate a given input.<br />
<br />
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br/>

<b>Q</b>. Can you write a generic function that converts an amount in String to double amount?<br />
<b>A</b>. <br />
<br />
<b>Step 1</b>: Ask the right questions and arrive at a more detailed requirements.<br />
<ul>
<li>Handling negative amounts like -34.01 or (34.01) with a parenthesis. Parentheses denote a negative value.&nbsp; </li>
<li>Handling commas in formatted values like 1,205.45, etc.</li>
<li>Handling negative scenarios like amount being&nbsp; empty as in ( ).</li>
</ul>
Since, it is a requirement to write a generic function, all the above scenarios need to be taken care of. <br />
<br />
<b>Step 2</b>: Let's use a TDD (<b>T</b>est <b>D</b>riven <b>D</b>evelopment approach).<br />
<br />
So, write a skeleton class so that all our unit tests fail.<br />
<br />
<pre class="brush: csharp">  
package com.mycompany.app5;

import java.math.BigDecimal;
import java.text.ParseException;

public class ConvertingAmount
{
    
    public BigDecimal convert(String amount) throws ParseException
    {
        BigDecimal result = null;
        return result;
    }
}
</pre>
<br />
Next, write the unit tests based on the above requirements so that all fail, but cover the requirements.<br />
<br />
<pre class="brush: csharp">  
package com.mycompany.app5;

import java.math.BigDecimal;
import java.text.ParseException;

import junit.framework.Assert;

import org.junit.Before;
import org.junit.Test;

public class ConvertingAmountTest
{   
    private ConvertingAmount ca;
    
    @Before
    public void setUp()
    {
        ca = new ConvertingAmount();
    }
    
    @Test
    public void testPositiveAmount() throws ParseException
    {
        BigDecimal converted = ca.convert("2255.001");
        Assert.assertEquals(new BigDecimal("2255.001"), converted);
    }
    
    @Test
    public void testNegativeAmount() throws ParseException
    {
        BigDecimal converted = ca.convert("-2255.001");
        Assert.assertEquals(new BigDecimal("-2255.001"), converted);
    }
    
    @Test
    public void testNegativeAmountWithParanthes() throws ParseException
    {
        BigDecimal converted = ca.convert("(2255.001)");
        Assert.assertEquals(new BigDecimal("-2255.001"), converted);
    }
    
    @Test
    public void testPosiotiveAmountFormatted() throws ParseException
    {
        BigDecimal converted = ca.convert("2,255.001");
        Assert.assertEquals(new BigDecimal("2255.001"), converted);
    }
    
    @Test
    public void testNegativeAmountFormatted() throws ParseException
    {
        BigDecimal converted = ca.convert("-2,255.001");
        Assert.assertEquals(new BigDecimal("-2255.001"), converted);
    }
    
    @Test
    public void testNegativeAmountWithParenthesesFormatted() throws ParseException
    {
        BigDecimal converted = ca.convert("(2,255.001)");
        Assert.assertEquals(new BigDecimal("-2255.001"), converted);
    }
    
    @Test(expected = ParseException.class)
    public void testExceptionalScenario() throws ParseException
    {
        String amount = "()";
        ca.convert(amount);
    }
    
    @Test(expected = ParseException.class)
    public void testExceptionalScenario2() throws ParseException
    {
        String amount = "abc";
        ca.convert(amount);
    }
}
</pre>
<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-o_0r9VwGsG0/UdokQi6l0hI/AAAAAAAABrw/fhkJimC7_o8/s1600/tdd-fail.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="256" src="http://2.bp.blogspot.com/-o_0r9VwGsG0/UdokQi6l0hI/AAAAAAAABrw/fhkJimC7_o8/s640/tdd-fail.jpg" width="640" /></a></div>
<br />
<br />
<b>Step 3</b>: Implement the functionality, so that all the above unit tests pass.<br />
<br />
<pre class="brush: csharp"> 
package com.mycompany.app5;

import java.math.BigDecimal;
import java.text.DecimalFormat;
import java.text.ParseException;

import org.apache.commons.lang.StringUtils;

public class ConvertingAmount
{
    
    public BigDecimal convert(String amount) throws ParseException
    {
        BigDecimal result = null;
        
        DecimalFormat df = new DecimalFormat("#,#00.00;-#,#00.00"); //positive;negative 
        
        //convert (2255.001) to -2255.001 and (2,255.001) to  -2255.001 
        if (StringUtils.isNotBlank(amount) &amp;&amp; amount.startsWith("(") &amp;&amp; amount.endsWith(")"))
        {
            String valueStr = amount.substring(1, amount.length() - 1);
            Number valInParenthesis = df.parse(valueStr.trim());
            result = BigDecimal.valueOf(valInParenthesis.doubleValue()).negate();
            amount = result.toPlainString();
        }
        
        //parse 2,255.001 and -2,255.001
        Number val = df.parse(amount);
        result = BigDecimal.valueOf(val.doubleValue());
        
        return result;
    }
}
</pre>
<br />
Now, all green.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-UMOjqjh98xs/Udokd8zq1wI/AAAAAAAABr4/nxoCrJjTsD8/s1600/tdd-pass.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="206" src="http://4.bp.blogspot.com/-UMOjqjh98xs/Udokd8zq1wI/AAAAAAAABr4/nxoCrJjTsD8/s640/tdd-pass.jpg" width="640" /></a></div>
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Coding">Coding</a>, <a rel='tag' href="http://java-success.blogspot.com/search/label/Core%20Java">Core Java</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/core-java-coding-question-converting.html" title="permanent link"> 7/09/2013 12:11:00 PM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/core-java-coding-question-converting.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/core-java-coding-question-converting.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/07/core-java-coding-question-converting.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=1164490585008796452" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=1164490585008796452&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
  






<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Jul 8, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="9033370282070997852"></a>
    
         
    


    <h3 class="post-title">
	 
	 JasperReports generating an Excel file
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* Top - Leader board */
google_ad_slot = "4890304945";
google_ad_width = 728;
google_ad_height = 90;
google_ad_channel ="4262872872";
//--&gt;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
<br />
<br/>


This is an extension to the <a href="http://java-success.blogspot.com.au/2013/06/jasperreports-50-tutorial-with-ireport.html">JasperReport step by step tutorial</a> to demonstrate how to generate a Excel file from the <b>Main.java</b>. To generate an Excel file, you&nbsp; need Apache POI<b> </b>as a dependency. Here are the Maven dependency files required.<br />
<br />
<!-- INFOLINKS_OFF -->

<br />
<pre class="brush: csharp"> 
&lt;!-- Jasper reports --&gt;
&lt;dependency&gt;
 &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;
 &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;
 &lt;version&gt;5.0.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
 &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
 &lt;version&gt;2.1.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.lowagie&lt;/groupId&gt;
  &lt;artifactId&gt;itext&lt;/artifactId&gt;
  &lt;version&gt;2.1.7&lt;/version&gt;
&lt;/dependency&gt;
&nbsp;&lt;dependency&gt;
 &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;
 &lt;artifactId&gt;poi&lt;/artifactId&gt;
 &lt;version&gt;3.7&lt;/version&gt;
 &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</pre>
<br />
Now, the <b>Main.java</b> file to generate the <b>Excel </b>file.<br />
<br />
<pre class="brush: csharp"> 
package com.mycompany.app.jasper;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Collection;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.export.JRXlsExporter;
import net.sf.jasperreports.engine.export.JRXlsExporterParameter;
import net.sf.jasperreports.engine.xml.JRXmlLoader;

public class Main
{
    
    public static JasperDesign jasperDesign;
    public static JasperPrint jasperPrint;
    public static JasperReport jasperReport;
    public static String reportTemplateUrl = "person-template.jrxml";
    
    public static void main(String[] args) throws IOException
    {
        try
        {
            InputStream resourceAsStream = Thread.currentThread().getContextClassLoader()
                    .getResourceAsStream(reportTemplateUrl);
            //get report file and then load into jasperDesign
            jasperDesign = JRXmlLoader.load(resourceAsStream);
            //compile the jasperDesign
            jasperReport = JasperCompileManager.compileReport(jasperDesign);
            
            ByteArrayOutputStream output = new ByteArrayOutputStream();
            OutputStream outputfile = new FileOutputStream(new File("c:/temp/person.xls"));
            
            //fill the ready report with data and parameter
            jasperPrint = JasperFillManager.fillReport(jasperReport, getParameters(),
                    new JRBeanCollectionDataSource(
                            findReportData()));
            
            //coding for Excel
            JRXlsExporter exporterXls = new JRXlsExporter();
            exporterXls.setParameter(JRXlsExporterParameter.JASPER_PRINT, jasperPrint);
            exporterXls.setParameter(JRXlsExporterParameter.OUTPUT_STREAM, output);
            exporterXls.setParameter(JRXlsExporterParameter.IS_ONE_PAGE_PER_SHEET, Boolean.TRUE);
            exporterXls.setParameter(JRXlsExporterParameter.IS_DETECT_CELL_TYPE, Boolean.TRUE);
            exporterXls.exportReport();
            outputfile.write(output.toByteArray());
            
        }
        catch (JRException e)
        {
            e.printStackTrace();
        }
    }
    
    private static Collection&lt;Person&gt; findReportData()
    {
        //declare a list of object
        List&lt;Person&gt; data = new LinkedList&lt;Person&gt;();
        Person p1 = new Person();
        p1.setFirstName("John");
        p1.setSurname("Smith");
        p1.setAge(Integer.valueOf(5));
        data.add(p1);
        return data;
    }
    
    private static Map&lt;String, Object&gt; getParameters()
    {
        Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();
        params.put("footerText", "Just to demonstrate how to pass parameters to report");
        return params;
    }  
}
</pre>
<br />
If you execute the above class, <b>person.xls</b> will be generated&nbsp; under the <b>c:\temp</b> folder.<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/JasperReports">JasperReports</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/07/jasperreports-generating-excel-file.html" title="permanent link"> 7/08/2013 10:56:00 AM </a></em>

       |
      <a class="comment-link" href="http://java-success.blogspot.in/2013/07/jasperreports-generating-excel-file.html#comment-form"location.href=http://java-success.blogspot.com/2013/07/jasperreports-generating-excel-file.html#comment-form;><span style="text-transform:lowercase">0 Comments</span></a>
      
<a class="comment-link" href="http://java-success.blogspot.in/2013/07/jasperreports-generating-excel-file.html#links"><span style="text-transform:lowercase">Links to this post</span></a>

  <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=9033370282070997852" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=9033370282070997852&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 
  <!-- End #comments -->
   

</div></div>
<!-- End #main -->







<!-- Begin #sidebar -->
<div id="sidebar"><div id="sidebar2">

  
  
  <h2 class="sidebar-title">Previous Posts</h2>
    <ul id="recently">
    
        <li><a href="http://java-success.blogspot.in/2014/11/are-you-java-beginner-why-good-java.html">Are you a Java beginner? Why good Java developers ...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/11/java-exception-handling-beginner.html">Java exception handling beginner mistakes and best...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/11/unix-interview-questions-and-answers.html">Unix Interview Questions and Answers for Java deve...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/debugging-and-working-like-pro-with.html">Debugging and working  like a pro with a Java appl...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/yammer-metrics-to-monitor-restful-web_22.html">Yammer metrics to monitor RESTful web services and...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/when-to-use-which-java-collection-or.html">When to use which Java collection or data structur...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2011/09/how-to-prepare-for-javajee-job.html">How to prepare or train for Java and JEE Job Inter...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/10/yammer-metrics-to-monitor-restful-web.html">Yammer metrics to monitor RESTful web services wit...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/09/monitoring-and-gathering-statistics.html">Monitoring and gathering statistics with JMX based...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2014/08/what-are-different-ways-java-thread.html">What are the different ways a Java thread gets blo...</a></li>
     
  </ul>
  
  
  
  <h2 class="sidebar-title">Archives</h2>

    <ul class="archive-list">
   	  
    	<li><a href="http://java-success.blogspot.in/2006_10_01_archive.html">October 2006</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2006_11_01_archive.html">November 2006</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_05_01_archive.html">May 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_10_01_archive.html">October 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2007_12_01_archive.html">December 2007</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2008_08_01_archive.html">August 2008</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_02_01_archive.html">February 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_10_01_archive.html">October 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_11_01_archive.html">November 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2010_12_01_archive.html">December 2010</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_01_01_archive.html">January 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_07_01_archive.html">July 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_09_01_archive.html">September 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_10_01_archive.html">October 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_11_01_archive.html">November 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2011_12_01_archive.html">December 2011</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_01_01_archive.html">January 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_02_01_archive.html">February 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_03_01_archive.html">March 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_04_01_archive.html">April 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_05_01_archive.html">May 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_06_01_archive.html">June 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_07_01_archive.html">July 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_08_01_archive.html">August 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_09_01_archive.html">September 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_10_01_archive.html">October 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_11_01_archive.html">November 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2012_12_01_archive.html">December 2012</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_01_01_archive.html">January 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_02_01_archive.html">February 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_03_01_archive.html">March 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_04_01_archive.html">April 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_05_01_archive.html">May 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_06_01_archive.html">June 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_07_01_archive.html">July 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_08_01_archive.html">August 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_09_01_archive.html">September 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_10_01_archive.html">October 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_11_01_archive.html">November 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2013_12_01_archive.html">December 2013</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_01_01_archive.html">January 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_02_01_archive.html">February 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_03_01_archive.html">March 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_04_01_archive.html">April 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_05_01_archive.html">May 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_06_01_archive.html">June 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_07_01_archive.html">July 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_08_01_archive.html">August 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_09_01_archive.html">September 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_10_01_archive.html">October 2014</a></li>
	  
    	<li><a href="http://java-success.blogspot.in/2014_11_01_archive.html">November 2014</a></li>
	  

  </ul>
  
  
  
  <!-- Begin #profile-container -->
  
    <div id="profile-container"><h2 class="sidebar-title">About Me</h2>
<dl class="profile-datablock"><dt class="profile-img"><a href="https://plus.google.com/109240621969095737337"><img src="//lh3.googleusercontent.com/-XMLxx0v_R7A/AAAAAAAAAAI/AAAAAAAACxk/8BeHFmsEuy8/s80-c/photo.jpg" width="80" height="80" alt="My Photo"></a></dt>
<dd class="profile-data"><strong>Name:</strong> <a rel="author" href="https://plus.google.com/109240621969095737337"> Arulkumaran Kumaraswamipillai </a></dd>
</dl>
<p class="profile-textblock">Java freelancer from Australia. As a contractor, attended 100+ job interviews and received multiple job offers. Authored Java career books that sold over 30,000 copies.<br><br><a href="http://www.java-success.com" rel="nofollow" target="_blank">www.java-success.com</a> for 500+ Java/JEE job interview questions and answers and tutorials.<br></p>
<p class="profile-link"><a rel="author" href="https://plus.google.com/109240621969095737337">View my complete profile</a></p></div>
  
  <!-- End #profile -->

  
  <p id="powered-by"><a href="http://www.blogger.com"><img src="http://buttons.blogger.com/bloggerbutton1.gif" alt="Powered by Blogger" /></a></p>
  <p id="blogfeeds">Subscribe to<br />Posts [<a target="_blank" href="http://java-success.blogspot.com/feeds/posts/default" type="application/atom+xml">Atom</a>]</p>

  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  
   
  <!--
  <p>This is a paragraph of text that could go in the sidebar.</p>
  -->
  
  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  



</div></div>
<!-- End #sidebar -->




<!-- Begin #footer -->
<div id="footer"><hr />

  <p><!-- This is an optional footer. If you want text here, place it inside these tags, and remove this comment. -->&nbsp;</p>

  </div>
<!-- End #footer -->




</div>
<!-- End #content -->






</div></div></div></div>
<!-- End wraps -->

</body>
</html>