<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
  <title>Java-Success Blog: Caching Data in Java and LRU strategy </title>

  <link href='http://www.java-success.com' rel='canonical'/>

  


  <script type="text/javascript">(function() { (function(){function c(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(l){}};this.tick("start",null,a)}var a,e;window.performance&&(e=(a=window.performance.timing)&&a.responseStart);var h=0<e?new c(e):new c;window.jstiming={Timer:c,load:h};if(a){var b=a.navigationStart;0<b&&e>=b&&(window.jstiming.srt=e-b)}if(a){var d=window.jstiming.load;0<b&&e>=b&&(d.tick("_wtsrt",void 0,b),d.tick("wtsrt_","_wtsrt",
e),d.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),d&&0<b&&(d.tick("_tbnd",void 0,window.chrome.csi().startE),d.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,d&&0<b&&(d.tick("_tbnd",void 0,window.external.startE),d.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(k){}})();window.tickAboveFold=function(c){var a=0;if(c.offsetParent){do a+=c.offsetTop;while(c=c.offsetParent)}c=a;750>=c&&window.jstiming.load.tick("aft")};var f=!1;function g(){f||(f=!0,window.jstiming.load.tick("firstScrollTime"))}window.addEventListener?window.addEventListener("scroll",g,!1):window.attachEvent("onscroll",g);
 })();</script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Blogger" />
<link rel="icon" type="image/vnd.microsoft.icon" href="https://www.blogger.com/favicon.ico"/>
<link rel="alternate" type="application/atom+xml" title="Java-Success Blog - Atom" href="http://java-success.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Java-Success Blog - RSS" href="http://java-success.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Java-Success Blog - Atom" href="https://www.blogger.com/feeds/35897879/posts/default" />
<link rel="alternate" type="application/atom+xml" title="Java-Success Blog - Atom" href="http://java-success.blogspot.com/feeds/4590913508927255600/comments/default" />
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/static/v1/v-css/50269083-blog_controls.css"/>
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/dyn-css/authorization.css?targetBlogID=35897879&zx=32ffd7df-5810-469f-a666-048e5011b3eb"/>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/979395223-backlink.js"></script>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/4080670514-backlink_control.js"></script>
<script type="text/javascript">var BL_backlinkURL = "https://www.blogger.com/dyn-js/backlink_count.js";var BL_blogId = "35897879";</script>


  <style type="text/css">
/*
-----------------------------------------------
Blogger Template Style
Name:     Harbor
Designer: Douglas Bowman
URL:      www.stopdesign.com
Date:     24 Feb 2004
----------------------------------------------- */


body {
  background:#fff url("http://www.blogblog.com/harbor/rocks.jpg") no-repeat right bottom;
  background-attachment:fixed;
  margin:0;
  padding:0;
  font:x-small Georgia,Serif;
  color:#333;
  font-size/* */:/**/small;
  font-size: /**/small;
  }
/* Commented Backslash Hack hides rule from IE5-Mac \*/
  body {background-attachment:scroll;}
  /* End IE5-Mac hack */
a:link {
  color:#36a;
  text-decoration:none;
  }
a:visited {
  color:#764;
  text-decoration:none;
  }
a:hover {
  color:#933;
  text-decoration:underline;
  }
a img {
  border-width:0;
  }


/* Page Structure
----------------------------------------------- */
#wrap {
  background:url("http://www.blogblog.com/harbor/sky.jpg") repeat-x left top;
  min-width:740px;
  margin:0;
  padding:0;
  text-align:left;
  }
#wrap2 {
  background:url("http://www.blogblog.com/harbor/lighthouse.jpg") no-repeat left top;
  }
#wrap3 {
  background:url("http://www.blogblog.com/harbor/cloud.jpg") no-repeat 100% 75px;
  }
#wrap4 {
  background:url("http://www.blogblog.com/harbor/center_cloud.jpg") no-repeat 50% 0;
  padding:15px;
  width:100%;
  width/* */:/**/auto;
  width: /**/auto;
  }
@media all {
  #content {
    max-width:890px;
    padding:0 30px 50px;
    width:100%;
    width/* */:/**/auto;
    width: /**/auto;
    }
  html>body #content {
    border:3px double #fff;
    }
  #main {
    width:64%;
    float:right;
    }
  #main2 {
    margin:0;
    padding:0;
    }
  #sidebar {
    width:32%;
    float:left;
    }
  #sidebar2 {
    margin:0;
    padding:170px 0 20px;
    }
  }
@media handheld {
  #content {
    width:90%;
    }
  #main {
    width:100%;
    float:none;
    }
  #sidebar {
    width:100%;
    float:none;
    }
  }

/* Header
----------------------------------------------- */
@media all {
  #header {
    padding:15px 0 10px 110px;
    }
  }
@media handheld {
  #header {
    width:100%;
    padding:15px 0 10px 0;
    }
  }
#blog-title {
  margin:0 0 .25em;
  font-size:270%;
  font-weight:normal;
  color:#678;
  }
#blog-title a {
  color:#678;
  text-decoration:none;
  }
#description {
  margin:0;
  max-width:700px;
  font-size:75%;
  line-height:1.8em;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#789;
  }


/* Headings
----------------------------------------------- */
h2 {
  margin:1.5em 0 .75em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }


/* Posts
----------------------------------------------- */
.date-header {
  margin:2em 0 .5em;
  }
.post {
  margin:.5em 0 1.5em;
  line-height:1.6em;
  }
.post-title {
  margin:.25em 0 0;
  padding:0 0 4px;
  font-size:140%;
  font-weight:normal;
  line-height:1.4em;
  }
.post-title a, .post-title strong {
  background:url("http://www.blogblog.com/harbor/icon_lighthouse.gif") no-repeat 0 .15em;
  display:block;
  padding-left:20px;
  text-decoration:none;
  color:#368;
  font-weight:normal;
  }
.post-title strong {
  background-image:url("http://www.blogblog.com/harbor/icon_lighthouse2.gif");
  color:#000;
  }
.post-title a:hover {
  color:#933;
  }
.post-body {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding-top:12px;
  }
.post p {
  margin:0 0 .75em;
  }
p.post-footer {
  color:#999;
  }
.post-footer em, .comment-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.post-footer em {
  font-style:normal;
  color:#666;
  margin-right:.4em;
  }
.comment-link strong {
  font-size:130%;
  }
.comment-link {
  margin-left:.4em;
  }
.post img {
  padding:4px;
  border:1px solid #cde;
  }


/* Comments
----------------------------------------------- */
#comments {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding:15px 0 0;
  }
#comments h4 {
  margin:1em 0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }
#comments h4 strong {
  font-size:130%;
  }
#comments-block {
  margin:1em 0 1.5em;
  line-height:1.4em;
  }
#comments-block dt {
  margin:.5em 0;
  }
#comments-block dd {
  margin:.25em 20px 0;
  }
#comments-block dd.comment-timestamp {
  margin:-.25em 20px 1.5em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
#comments-block dd p {
  margin:0 0 .75em;
  }
.deleted-comment {
  font-style:italic;
  color:gray;
  }


/* Sidebar Content
----------------------------------------------- */
#sidebar ul {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 15px;
  padding:0 0 15px;
  list-style:none;
  }
#sidebar li {
  margin:0;
  padding:0 0 .25em 15px;
  text-indent:-15px;
  line-height:1.5em;
  }
#sidebar p {
  color:#666;
  line-height:1.5em;
  }


/* Profile
----------------------------------------------- */
#profile-container {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 2em;
  padding:0 0 15px;
  }
.profile-datablock {
  margin:.5em 0 .5em;
  }
.profile-img {
  display:inline;
  }
.profile-img img {
  float:left;
  padding:4px;
  border:1px solid #cde;
  margin:0 8px 3px 0;
  }
.profile-data {
  margin:0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.profile-data strong {
  display:none;
  }
.profile-textblock {
  margin:0 0 .5em;
  }
.profile-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Footer
----------------------------------------------- */
#footer {
  clear:both;
  padding:15px 30px 0 50px;
  }
#footer hr {
  display:none;
  }
#footer p {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  margin:0;
  padding-top:15px;
  font:78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Feeds
----------------------------------------------- */
#blogfeeds {
  }
#postfeeds {
  }
  </style>
<!-- --><style type="text/css">@import url(https://www.blogger.com/static/v1/v-css/navbar/3334278262-classic.css);
div.b-mobile {display:none;}
</style>

</head>

<body><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d35897879\x26blogName\x3dJava-Success+Blog\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dBLUE\x26layoutType\x3dCLASSIC\x26searchRoot\x3dhttp://java-success.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://java-success.blogspot.com/\x26vt\x3d2978101103701820782',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script>

<!-- Begin wraps -->

<div id="wrap"><div id="wrap2"><div id="wrap3"><div id="wrap4">


<!-- Begin #content -->
<div id="content">


<div id="header">

  <h1 id="blog-title">
    <a href="http://java-success.blogspot.in/">
	Java-Success Blog
	</a>
  </h1>

  <p id="description">Java/JEE blog containing interview questions and answers and tutorials</p>

</div>


<!-- Begin #main -->
<div id="main"><div id="main2">

<div class='adsense' style='text-align:center; padding: 0px 3px 0.5em 3px;'>
<script type="text/javascript"><!--
google_ad_client="pub-3764234023451771";
google_ad_host="pub-1556223355139109";
google_ad_width=468;
google_ad_height=60;
google_ad_format="468x60_as";
google_ad_type="text";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="333333";
google_color_url="009900";
google_color_text="993333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



</div>

<!-- Search Google -->
<center>
<form method="get" action="http://www.google.com/custom" target="_top">
<table bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<label for="sbi" style="display: none">Enter your search terms</label>
<input type="text" name="q" size="31" maxlength="255" value="" id="sbi"></input>
<label for="sbb" style="display: none">Submit search form</label>
<input type="submit" name="sa" value="Search" id="sbb"></input>
<input type="hidden" name="client" value="pub-3764234023451771"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
</center>
<!-- Search Google -->









<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Oct 24, 2012</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="4590913508927255600"></a>
    
         
    


    <h3 class="post-title">
	 
	 Caching Data in Java and LRU strategy 
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><table>

<tbody>
<tr>

<td width="25%"><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* LHS - vertical bar */
google_ad_slot = "9570018680";
google_ad_width = 160;
google_ad_height = 600;
google_ad_channel ="9570018680";
google_page_url = "http://java-success.blogspot.com.au/2011/09/java-collection-interview-questions-and.html";
//-->
</script>

<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
</td>
<td><br />
<b>Q. </b>What is the purpose of using a cache?<br />
<b>A</b>. A cache is an area of local memory that holds a copy of frequently accessed data that is otherwise expensive to get or compute. Examples of such data include a result of a query to a database, a disk file or a report. Caching is used primarily for performance and scalability. It is a mechanism by which subsequent requests for the data are served faster.<br />
<br />
Avoid the<b> anti-pattern</b> or pitfall of "Cache Them All", and cache only the data that is hard to get.<br />
<br />
<b>Q</b>. What are some of the requirements you need to consider when writing your own cache or using a cacheing framework like <b><i>EHCache</i></b>, <i><b>OSCache</b></i>, etc?<br />
<b>A.</b><br />
<ol>
<li>The cache needs to have some boundary conditions defined to limit the memory usage. Each item in the cache can consume unbounded amounts of memory, hence the cache should hold its values using <b><i>WeakReferences</i></b>, which makes it possible for the cache to evict entries when memory is short, even when the cache is not full or the boundary conditions are not met.</li>
<li>You need to have a replacement algorithm to purge entries from a cache when the&nbsp;boundary&nbsp;conditions are reached. &nbsp;For example, reaching the maximum number of entries allowed. One such algorithm &nbsp;is <b>LRU (Least Recently Used)</b>. In this algorithm cache entries which have not been accessed recently will be replaced. If you are writing your own cache, one approach is to maintain &nbsp;a timestamp at which the entry was inserted and select the entry with the oldest timestamp to be removed. But this search would be linear taking O(N) time. A more efficient approach would be to maintain the entries in a sorted collection based on the order in which the entries were accessed. Alternatively, you can use a doubly linked list where the items that are accessed via the cache are moved towards the end of the list, and purging of the entries in the cache are done from the front of the list. &nbsp;</li>
<li>Some caches need to be regularly refreshed to prevent them from becoming stale. This can be accomplished by adding an expiry timestamp.&nbsp;</li>
<li>If you are writing your own caching mechanism, then the cache item insertion and lookup operations need to be fast preferably O(1) time. This means a <b><i>HashMap </i></b>will be a potential candidate. The cached data can be accessed concurrently, hence a <b><i>ConcurrentHashMap </i></b>or a <b><i>SynchronizedMap </i></b>will be a good candidate. The cache should not be locked when an entry is searched, and only the searched entry should be locked. In the scenario where multiple threads search for the same key, the computation of the key value should be performed only once.</li>
</ol>
</td></tr>
</tbody></table>
<br />
<br />
So, this is why you need to apply the "<b>don't reinvent the wheel</b>" principle and favor utilizing a proven and tested caching frameworks like EHCache that takes care of better memory management with LRU and FIFO eviction strategies, disk overflow, data expiration and many other optional advanced features, as opposed to writing your own. Having said this, there are cases where you might want to write your own simple caching solution or you might be asked in job interviews with questions like --&nbsp;<b>How will you implement an LRU cache in Java?</b><br />
<br />
This is is very similar to the question, if Java did not have a <b><i>HashMap </i></b>class, how will you go about implementing your own? This was discussed with the answer and key considerations in the book "Core Java Career Esentials"<br />
<br />
<br />
<b>Q.</b> What are the differences between <b><i>HashMap</i></b>, <b><i>TreeMap </i></b>(i.e. <b><i>SortedMap</i></b>), and a <b><i>LinkedHashMap</i></b>?<br />
<b>A.</b> All three classes implement the <b><i>Map </i></b>interface and offer mostly the same functionality. The differences are in how the entries are iterated through<br />
<br />
<ul>
<li><b><i>HashMap </i></b>does not offer any guarantees about the iteration order. Its iteration order can change completely when new elements are added.</li>
<li><b><i>TreeMap </i></b>will iterate according to the "natural ordering" of the keys according to their <i>compareTo( ) </i>method or based on an externally supplied <b><i>Comparator</i></b>. Additionally, it implements the <i>SortedMap</i> interface, which contains methods that depend on this sort order.</li>
<li><b><i>LinkedHashMap </i></b>will iterate in the order in which the entries were put into the map. &nbsp;The <b><i>LinkedHashMap </i></b>also provides a great starting point for creating a <b>LRU </b>Cache by overriding the <b><i>removeEldestEntry( ) </i></b>method. This lets you create a Cache that can expire data using some criteria that you define.</li>
</ul>
<b><br /></b>
<b>Q. </b>What are the different types of algorithms that can be used to remove objects from the cache?<br />
<b>A.&nbsp;</b>A variety of cache expiration mechanisms can remove objects from a cache. These algorithms are based on criteria such as least frequently used (<b>LFU</b>), least recently used (<b>LRU</b>), most recently used (<b>MRU</b>), first in first out (<b>FIFO</b>), <b>last access time</b>, and <b>object size</b>. Each algorithm has advantages and disadvantages. So, analyse your requirements and choose the most appropriate one.<br />
<br />
<div class="p1">
In enterprise applications, object caching in a cluster is important because multiple JVMs run in a cluster, and it is crucial to keep all the cluster members' cached data in sync.</div>
<br />
<b><br /></b>
<b>Q</b>. How will you implement an LRU cache in Java?<br />
<b>A</b>. Here is the sample code in Java<br />
<br />
<!-- INFOLINKS_OFF -->
Firstly, define an interface so that the implementation can be changed &nbsp;if for example, &nbsp;in future you have a <b><i>ConcurrentLinkedHashMap </i></b>class.&nbsp;&nbsp;A typical interface for a Java cache will look like<br />
<br />
<pre class="brush: csharp">public interface LRUCache&lt;K,V&gt; {
   public abstract V put(K key, V item);
   public abstract V get(K key);
   public abstract V atomicGetAndSet(K key, V item); 
}

</pre>
<br />
Now, the <b>implementation </b>class.<br />
<br />
<pre class="brush: csharp">import java.lang.ref.SoftReference;
import java.util.LinkedHashMap;
import java.util.Map;

public class LRUCacheImpl&lt;K, V&gt; implements LRUCache&lt;K, V&gt; {

 //SoftReference is used for a memory friendly cache. 
 //the value will be removed under memory shortage situations and 
 //the keys of the values will be removed from the cache map. 
 private final Map&lt;K, SoftReference&lt;V&gt;&gt; cache;

 
 public LRUCacheImpl(final int cacheSize) {

  // 'true'  uses the access order instead of the insertion order.
  this.cache = new LinkedHashMap&lt;K, SoftReference&lt;V&gt;&gt; (cacheSize, 0.75f, true) {
   
   private static final long serialVersionUID = 1L;

   @Override
   protected boolean removeEldestEntry(Map.Entry&lt;K, SoftReference&lt;V&gt;&gt; eldest) {
    // When to remove the eldest entry i.e Least Recently Used (i.e LRU) entry
    return size() &gt; cacheSize; // Size exceeded the max allowed.
   }
  };
 }

 @Override
 public V put(K key, V value) {
    SoftReference&lt;V&gt; previousValueReference = cache.put(key, new SoftReference&lt;V&gt;(value));
    return previousValueReference != null ? previousValueReference.get() : null;
 }

 @Override
 public V get(K key) {
     SoftReference&lt;V&gt; valueReference = cache.get(key);
     return valueReference != null ? valueReference.get() : null;
 }

 @Override
 public V atomicGetAndSet(K key, V value) {
    V result = get(key);
    put(key, value);
    return result;
 }

}

</pre>
<br />
Here some key points on the above code that are worthy of mentioning not only in the job interviews to stand out from your competition, but also to write quality code and get thumbs up in the code reviews.<br />
<br />
<ol>
<li>The above code would have been written as &nbsp;LRUCacheImpl&lt;K, V&gt;extends LinkedHashMap&lt;K, V&gt;, but the GoF design pattern <b>favors composition over inheritance</b> as inheritance is more fragile to changes.</li>
<li><b><i>SoftReference </i></b>is &nbsp;used as opposed to the hard reference, to force the items to be garbage collected when the Java heap runs low in memory.</li>
<li>The methods are synchronized to be thread-safe. In future, if a <b>Concurrent</b><b style="font-style: italic;">LinkedHashMap </b>were to be&nbsp;added, then it can be used instead the <b><i>LinkedHashMap.</i></b></li>
<li>If performance is of utmost importance is of utmost importance, then the public V get(K key) &nbsp;method can be executed asynchrously via a thread pool as this method will get frequently executed.</li>
</ol>
<div>
<br /></div>
<div>
<b>Q.</b> What are the different types of caches?</div>
<div>
<b>A.</b>&nbsp;There are different types of caches</div>
<div>
<ul>
<li><b>An application cache</b> is a cache that an application accesses directly. An application benefits from using a cache by keeping most frequently accessed data in memory. This is also known as the first level cache. For example, <b><i>Hibernate </i></b>can use&nbsp;<i><b>EHCache, OSCache, SwarmCache, </b>or <b>JBoss TreeCache&nbsp;</b></i>as its first level cache.</li>
<li><b>Level 2 (aka L2) cache&nbsp;</b>&nbsp;provides caching services to an object-relational mapping (ORM) framework or a data mapping (DM) framework such as Hibernate or iBatis respectively by reducing the number of trips to the database. An L2 cache hides the complexity of the caching logic from an application.</li>
<li><b>In memory Data Grids/Clouds</b> for&nbsp;distributed caching with powerful analysis and management tools to give you a complete solution for managing fast-changing data in multiple servers, compute grid, or in the cloud. For example, <b><i>Apache Hadoop</i></b>,&nbsp;<b><i>GridGain</i></b>, <b><i>Oracle Cherence</i></b>, etc. A data grid is a reliable distrbuted cache that uses an external data source to retrieve data that is not present in the cache and an external data store to write the updates.&nbsp;In simple terms, grid or cloud computing is all about setting up an HTTP server to farm out requests RESTfully, and accept responses the same way. You can also use messaging with JMS, RMI or even the old-school Corba. But why reinvent the wheel when there are open-source frameworks like Hadoop, GridGain, Hazelcast, etc.&nbsp;</li>
</ul>
</div>
<div>
<br /></div>
<div>
<b>Q</b>. Will <b><i>WeakHashMap </i></b>make a good cache? Explain your answer?<br />
<b>A</b>. No. There are 2 reasons for it.<br />
<br />
<ol>
<li>&nbsp;It uses weak references as the underlying memory management mechanism. If the garbage collector determines that an object is <b>weakly reachable</b>, it will clear atomically all weak references to the object., whereas&nbsp;if the garbage collector determines that an object is<b> softly reachable </b>(i.e. uses a soft reference as opposed to a weak refrence), it may clear atomically all soft references to the object, in the case that it finds that <u>memory is running low</u>, or at its own discretion.</li>
<li>In a&nbsp;<i>WeakHashMap</i>, the weak references are used for the keys and not for the values. You want the map values to use a weaker reference.</li>
</ol>
<br />
<br />
<b>Q</b>. Where would you use a&nbsp;<b><i>WeakHashMap ?</i></b><br />
<b style="font-style: italic;">A.&nbsp;</b>It is good to implement <b>canonical maps </b>where you can associate some extra information to an object that you have a strong reference to.&nbsp;You put an entry in a <i>WeakHashMap </i>with the object as the key, and the extra information as the map value. This means, as long as you keep a strong reference to the object, you will be able to check the map to retrieve the extra information, and once you release the object, the map entry will be cleared and the memory used by the extra information will be released.</div>
<div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/Java%20Key%20Areas">Java Key Areas</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2012/10/caching-data-in-java-and-lru-strategy.html" title="permanent link"> 10/24/2012 10:35:00 AM </a></em>

        <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=4590913508927255600" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=4590913508927255600&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 

  <div id="comments">

	<a name="comments"></a>
    
    <h4>5 Comments:</h4>
    
    <dl id="comments-block">
      
      <dt class="comment-poster" id="c6372297426952420932"><a name="c6372297426952420932"></a>
        <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="https://img2.blogblog.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="https://www.blogger.com/profile/17883182752596675280" rel="nofollow">Mustafa Asif</a> said...
      </dt>

      <dd class="comment-body">
        <p>Nicely done ! Bookmarked.</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2012/10/caching-data-in-java-and-lru-strategy.html?showComment=1386394134196#c6372297426952420932" title="comment permalink">4:28 PM, December 07, 2013</a>
	  <span class="item-control blog-admin pid-1026473622"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=6372297426952420932" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c4002145776662324276"><a name="c4002145776662324276"></a>
        <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="https://img2.blogblog.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> said...
      </dt>

      <dd class="comment-body">
        <p>Simple explanation on nontrivial stuff, well done!</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2012/10/caching-data-in-java-and-lru-strategy.html?showComment=1386802816333#c4002145776662324276" title="comment permalink">10:00 AM, December 12, 2013</a>
	  <span class="item-control blog-admin pid-169423720"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=4002145776662324276" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c9001655802342161581"><a name="c9001655802342161581"></a>
        <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="https://img2.blogblog.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="https://www.blogger.com/profile/14636398171097111176" rel="nofollow">GopiKrishnan</a> said...
      </dt>

      <dd class="comment-body">
        <p>Thanks for sharing your valuable insights about cache. Could you please point me how to implement object caching in cluster enviornment and what are the considerations needs to be noted down?  is the above LRU cache in Java implemented in cluster environment? if two jvms in different machine, which place can i share the objects for two jvms? how to synchronizely update the objects if newly added objects. i hope you got my questions. thanks</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2012/10/caching-data-in-java-and-lru-strategy.html?showComment=1390125568047#c9001655802342161581" title="comment permalink">8:59 PM, January 19, 2014</a>
	  <span class="item-control blog-admin pid-1320112110"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=9001655802342161581" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c6687032450264954653"><a name="c6687032450264954653"></a>
        <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="https://img2.blogblog.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="https://www.blogger.com/profile/00869496028596976417" rel="nofollow">Arulkumaran Kumaraswamipillai</a> said...
      </dt>

      <dd class="comment-body">
        <p>You need to look at the distributed caching. For example EHCache with terracotta or EHCache with RMI.  Have a look at http://ehcache.org/documentation/2.5/configuration/distributed-cache-configuration</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2012/10/caching-data-in-java-and-lru-strategy.html?showComment=1390177648127#c6687032450264954653" title="comment permalink">11:27 AM, January 20, 2014</a>
	  <span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=6687032450264954653" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c1732033220835278438"><a name="c1732033220835278438"></a>
        <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="https://img2.blogblog.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="https://www.blogger.com/profile/16094273146936513756" rel="nofollow">rajendra.thammineni</a> said...
      </dt>

      <dd class="comment-body">
        <p>This article is very Helpful,But does it solves my problem.<br />http://stackoverflow.com/questions/24245989/ehcache-compex-query-for-different-conditions</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2012/10/caching-data-in-java-and-lru-strategy.html?showComment=1403023049677#c1732033220835278438" title="comment permalink">2:37 AM, June 18, 2014</a>
	  <span class="item-control blog-admin pid-1717619905"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=1732033220835278438" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
    </dl>

    
   <p class="comment-timestamp">
    <div class='comment-form'>
<a name='comment-form'></a>
<h4>Post a Comment</h4><p></p>
<a id='comment-editor-src' href='https://www.blogger.com/comment-iframe.g?blogID=35897879&postID=4590913508927255600'></a><iframe id='comment-editor' src='' class='blogger-iframe-colorize' width='100%' height='410' scrolling='no' frameborder='0' allowtransparency='true'></iframe>
<script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/2702546152-iframe_colorizer.js"></script>
</div>
    </p>
    <p id="postfeeds">Subscribe to Post Comments [<a target="_blank" href="http://java-success.blogspot.com/feeds/4590913508927255600/comments/default" type="application/atom+xml">Atom</a>]</p>
    	    
    


		<p class="comment-timestamp">
	<a href="http://java-success.blogspot.in/">&lt;&lt; Home</a>
    </p>
    </div>


  <!-- End #comments -->
   

</div></div>
<!-- End #main -->







<!-- Begin #sidebar -->
<div id="sidebar"><div id="sidebar2">

  
  
  <h2 class="sidebar-title">Previous Posts</h2>
    <ul id="recently">
    
        <li><a href="http://java-success.blogspot.in/2012/10/soapui-tutorial-to-test-web-services.html">soapUI Tutorial to test Web Services</a></li>
     
        <li><a href="http://java-success.blogspot.in/2012/10/soap-jax-ws-web-service-tutorial-with.html">SOAP (JAX-WS) Web Service Tutorial with Apache CXF...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2012/10/restful-web-service-tutorial-with.html">Restful Web Service Tutorial with Apache CXF</a></li>
     
        <li><a href="http://java-success.blogspot.in/2012/10/spring-di-aka-ioc-tutorial.html">Spring DI (aka IOC) Tutorial</a></li>
     
        <li><a href="http://java-success.blogspot.in/2012/10/hibernate-tutorial-with-hsqldb.html">Hibernate tutorial with HSQLDB</a></li>
     
        <li><a href="http://java-success.blogspot.in/2012/10/jdbc-tutorial-with-hsqldb.html">JDBC Tutorial with HSQLDB</a></li>
     
        <li><a href="http://java-success.blogspot.in/2012/10/sql-tutorial-with-hsqldb.html">SQL Tutorial with HSQLDB</a></li>
     
        <li><a href="http://java-success.blogspot.in/2012/10/agile-methodology-or-practices.html">Agile methodology or practices interview questions...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2012/09/jsf-tutorial-using-jsf-20-eclipse-and.html">JSF Tutorial: Using JSF 2.0, eclipse, and maven</a></li>
     
        <li><a href="http://java-success.blogspot.in/2012/09/java-tutorial-create-simple-web-app.html">Java tutorial: Create a simple Web app using JEE</a></li>
     
  </ul>
  
  
  
  
  
  <!-- Begin #profile-container -->
  
    <div id="profile-container"><h2 class="sidebar-title">About Me</h2>
<dl class="profile-datablock"><dt class="profile-img"><a href="https://plus.google.com/109240621969095737337"><img src="//lh3.googleusercontent.com/-XMLxx0v_R7A/AAAAAAAAAAI/AAAAAAAACxk/8BeHFmsEuy8/s80-c/photo.jpg" width="80" height="80" alt="My Photo"></a></dt>
<dd class="profile-data"><strong>Name:</strong> <a rel="author" href="https://plus.google.com/109240621969095737337"> Arulkumaran Kumaraswamipillai </a></dd>
</dl>
<p class="profile-textblock">Java freelancer from Australia. As a contractor, attended 100+ job interviews and received multiple job offers. Authored Java career books that sold over 30,000 copies.<br><br><a href="http://www.java-success.com" rel="nofollow" target="_blank">www.java-success.com</a> for 500+ Java/JEE job interview questions and answers and tutorials.<br></p>
<p class="profile-link"><a rel="author" href="https://plus.google.com/109240621969095737337">View my complete profile</a></p></div>
  
  <!-- End #profile -->

  
  <p id="powered-by"><a href="http://www.blogger.com"><img src="http://buttons.blogger.com/bloggerbutton1.gif" alt="Powered by Blogger" /></a></p>
  <p id="blogfeeds">Subscribe to<br />Posts [<a target="_blank" href="http://java-success.blogspot.com/feeds/posts/default" type="application/atom+xml">Atom</a>]</p>

  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  
   
  <!--
  <p>This is a paragraph of text that could go in the sidebar.</p>
  -->
  
  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  



</div></div>
<!-- End #sidebar -->




<!-- Begin #footer -->
<div id="footer"><hr />

  <p><!-- This is an optional footer. If you want text here, place it inside these tags, and remove this comment. -->&nbsp;</p>

  </div>
<!-- End #footer -->




</div>
<!-- End #content -->






</div></div></div></div>
<!-- End wraps -->

</body>
</html>