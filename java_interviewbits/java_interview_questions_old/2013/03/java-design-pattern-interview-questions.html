<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
  <title>Java-Success Blog: Java design pattern interview questions and answers: strategy and factory pattern</title>

  <link href='http://www.java-success.com' rel='canonical'/>

  


  <script type="text/javascript">(function() { (function(){function c(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(l){}};this.tick("start",null,a)}var a,e;window.performance&&(e=(a=window.performance.timing)&&a.responseStart);var h=0<e?new c(e):new c;window.jstiming={Timer:c,load:h};if(a){var b=a.navigationStart;0<b&&e>=b&&(window.jstiming.srt=e-b)}if(a){var d=window.jstiming.load;0<b&&e>=b&&(d.tick("_wtsrt",void 0,b),d.tick("wtsrt_","_wtsrt",
e),d.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),d&&0<b&&(d.tick("_tbnd",void 0,window.chrome.csi().startE),d.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,d&&0<b&&(d.tick("_tbnd",void 0,window.external.startE),d.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(k){}})();window.tickAboveFold=function(c){var a=0;if(c.offsetParent){do a+=c.offsetTop;while(c=c.offsetParent)}c=a;750>=c&&window.jstiming.load.tick("aft")};var f=!1;function g(){f||(f=!0,window.jstiming.load.tick("firstScrollTime"))}window.addEventListener?window.addEventListener("scroll",g,!1):window.attachEvent("onscroll",g);
 })();</script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Blogger" />
<link rel="icon" type="image/vnd.microsoft.icon" href="https://www.blogger.com/favicon.ico"/>
<link rel="alternate" type="application/atom+xml" title="Java-Success Blog - Atom" href="http://java-success.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Java-Success Blog - RSS" href="http://java-success.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Java-Success Blog - Atom" href="https://www.blogger.com/feeds/35897879/posts/default" />
<link rel="alternate" type="application/atom+xml" title="Java-Success Blog - Atom" href="http://java-success.blogspot.com/feeds/4151410113068052294/comments/default" />
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/static/v1/v-css/50269083-blog_controls.css"/>
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/dyn-css/authorization.css?targetBlogID=35897879&zx=32ffd7df-5810-469f-a666-048e5011b3eb"/>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/979395223-backlink.js"></script>
<script type="text/javascript" src="https://www.blogger.com/static/v1/v-js/4080670514-backlink_control.js"></script>
<script type="text/javascript">var BL_backlinkURL = "https://www.blogger.com/dyn-js/backlink_count.js";var BL_blogId = "35897879";</script>


  <style type="text/css">
/*
-----------------------------------------------
Blogger Template Style
Name:     Harbor
Designer: Douglas Bowman
URL:      www.stopdesign.com
Date:     24 Feb 2004
----------------------------------------------- */


body {
  background:#fff url("http://www.blogblog.com/harbor/rocks.jpg") no-repeat right bottom;
  background-attachment:fixed;
  margin:0;
  padding:0;
  font:x-small Georgia,Serif;
  color:#333;
  font-size/* */:/**/small;
  font-size: /**/small;
  }
/* Commented Backslash Hack hides rule from IE5-Mac \*/
  body {background-attachment:scroll;}
  /* End IE5-Mac hack */
a:link {
  color:#36a;
  text-decoration:none;
  }
a:visited {
  color:#764;
  text-decoration:none;
  }
a:hover {
  color:#933;
  text-decoration:underline;
  }
a img {
  border-width:0;
  }


/* Page Structure
----------------------------------------------- */
#wrap {
  background:url("http://www.blogblog.com/harbor/sky.jpg") repeat-x left top;
  min-width:740px;
  margin:0;
  padding:0;
  text-align:left;
  }
#wrap2 {
  background:url("http://www.blogblog.com/harbor/lighthouse.jpg") no-repeat left top;
  }
#wrap3 {
  background:url("http://www.blogblog.com/harbor/cloud.jpg") no-repeat 100% 75px;
  }
#wrap4 {
  background:url("http://www.blogblog.com/harbor/center_cloud.jpg") no-repeat 50% 0;
  padding:15px;
  width:100%;
  width/* */:/**/auto;
  width: /**/auto;
  }
@media all {
  #content {
    max-width:890px;
    padding:0 30px 50px;
    width:100%;
    width/* */:/**/auto;
    width: /**/auto;
    }
  html>body #content {
    border:3px double #fff;
    }
  #main {
    width:64%;
    float:right;
    }
  #main2 {
    margin:0;
    padding:0;
    }
  #sidebar {
    width:32%;
    float:left;
    }
  #sidebar2 {
    margin:0;
    padding:170px 0 20px;
    }
  }
@media handheld {
  #content {
    width:90%;
    }
  #main {
    width:100%;
    float:none;
    }
  #sidebar {
    width:100%;
    float:none;
    }
  }

/* Header
----------------------------------------------- */
@media all {
  #header {
    padding:15px 0 10px 110px;
    }
  }
@media handheld {
  #header {
    width:100%;
    padding:15px 0 10px 0;
    }
  }
#blog-title {
  margin:0 0 .25em;
  font-size:270%;
  font-weight:normal;
  color:#678;
  }
#blog-title a {
  color:#678;
  text-decoration:none;
  }
#description {
  margin:0;
  max-width:700px;
  font-size:75%;
  line-height:1.8em;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#789;
  }


/* Headings
----------------------------------------------- */
h2 {
  margin:1.5em 0 .75em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }


/* Posts
----------------------------------------------- */
.date-header {
  margin:2em 0 .5em;
  }
.post {
  margin:.5em 0 1.5em;
  line-height:1.6em;
  }
.post-title {
  margin:.25em 0 0;
  padding:0 0 4px;
  font-size:140%;
  font-weight:normal;
  line-height:1.4em;
  }
.post-title a, .post-title strong {
  background:url("http://www.blogblog.com/harbor/icon_lighthouse.gif") no-repeat 0 .15em;
  display:block;
  padding-left:20px;
  text-decoration:none;
  color:#368;
  font-weight:normal;
  }
.post-title strong {
  background-image:url("http://www.blogblog.com/harbor/icon_lighthouse2.gif");
  color:#000;
  }
.post-title a:hover {
  color:#933;
  }
.post-body {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding-top:12px;
  }
.post p {
  margin:0 0 .75em;
  }
p.post-footer {
  color:#999;
  }
.post-footer em, .comment-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.post-footer em {
  font-style:normal;
  color:#666;
  margin-right:.4em;
  }
.comment-link strong {
  font-size:130%;
  }
.comment-link {
  margin-left:.4em;
  }
.post img {
  padding:4px;
  border:1px solid #cde;
  }


/* Comments
----------------------------------------------- */
#comments {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  padding:15px 0 0;
  }
#comments h4 {
  margin:1em 0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.2em;
  color:#933;
  }
#comments h4 strong {
  font-size:130%;
  }
#comments-block {
  margin:1em 0 1.5em;
  line-height:1.4em;
  }
#comments-block dt {
  margin:.5em 0;
  }
#comments-block dd {
  margin:.25em 20px 0;
  }
#comments-block dd.comment-timestamp {
  margin:-.25em 20px 1.5em;
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
#comments-block dd p {
  margin:0 0 .75em;
  }
.deleted-comment {
  font-style:italic;
  color:gray;
  }


/* Sidebar Content
----------------------------------------------- */
#sidebar ul {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 15px;
  padding:0 0 15px;
  list-style:none;
  }
#sidebar li {
  margin:0;
  padding:0 0 .25em 15px;
  text-indent:-15px;
  line-height:1.5em;
  }
#sidebar p {
  color:#666;
  line-height:1.5em;
  }


/* Profile
----------------------------------------------- */
#profile-container {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center bottom;
  margin:0 0 2em;
  padding:0 0 15px;
  }
.profile-datablock {
  margin:.5em 0 .5em;
  }
.profile-img {
  display:inline;
  }
.profile-img img {
  float:left;
  padding:4px;
  border:1px solid #cde;
  margin:0 8px 3px 0;
  }
.profile-data {
  margin:0;
  font:bold 78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }
.profile-data strong {
  display:none;
  }
.profile-textblock {
  margin:0 0 .5em;
  }
.profile-link {
  font:78%/1.4em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Footer
----------------------------------------------- */
#footer {
  clear:both;
  padding:15px 30px 0 50px;
  }
#footer hr {
  display:none;
  }
#footer p {
  background:url("http://www.blogblog.com/harbor/divider.gif") no-repeat center top;
  margin:0;
  padding-top:15px;
  font:78%/1.6em Georgia,Serif;
  text-transform:uppercase;
  letter-spacing:.1em;
  }


/* Feeds
----------------------------------------------- */
#blogfeeds {
  }
#postfeeds {
  }
  </style>
<!-- --><style type="text/css">@import url(https://www.blogger.com/static/v1/v-css/navbar/3334278262-classic.css);
div.b-mobile {display:none;}
</style>

</head>

<body><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d35897879\x26blogName\x3dJava-Success+Blog\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dBLUE\x26layoutType\x3dCLASSIC\x26searchRoot\x3dhttp://java-success.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://java-success.blogspot.com/\x26vt\x3d2978101103701820782',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script>

<!-- Begin wraps -->

<div id="wrap"><div id="wrap2"><div id="wrap3"><div id="wrap4">


<!-- Begin #content -->
<div id="content">


<div id="header">

  <h1 id="blog-title">
    <a href="http://java-success.blogspot.in/">
	Java-Success Blog
	</a>
  </h1>

  <p id="description">Java/JEE blog containing interview questions and answers and tutorials</p>

</div>


<!-- Begin #main -->
<div id="main"><div id="main2">

<div class='adsense' style='text-align:center; padding: 0px 3px 0.5em 3px;'>
<script type="text/javascript"><!--
google_ad_client="pub-3764234023451771";
google_ad_host="pub-1556223355139109";
google_ad_width=468;
google_ad_height=60;
google_ad_format="468x60_as";
google_ad_type="text";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="333333";
google_color_url="009900";
google_color_text="993333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



</div>

<!-- Search Google -->
<center>
<form method="get" action="http://www.google.com/custom" target="_top">
<table bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<label for="sbi" style="display: none">Enter your search terms</label>
<input type="text" name="q" size="31" maxlength="255" value="" id="sbi"></input>
<label for="sbb" style="display: none">Submit search form</label>
<input type="submit" name="sa" value="Search" id="sbb"></input>
<input type="hidden" name="client" value="pub-3764234023451771"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
</center>
<!-- Search Google -->









<script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


  <h2 class="date-header">Mar 22, 2013</h2>

  
  
     
  <!-- Begin .post -->
  <div class="post"><a name="4151410113068052294"></a>
    
         
    


    <h3 class="post-title">
	 
	 Java design pattern interview questions and answers: strategy and factory pattern
	 
    </h3>

    
     
    <div class="post-body">
    <p>
      <div style="clear:both;"></div><table>
<tbody>
<tr>
<td width="60%"><script type="text/javascript"><!--
google_ad_client = "ca-pub-3764234023451771";
/* LHS - Medium Rectangle */
google_ad_slot = "1728948974";
google_ad_width = 336;
google_ad_height = 280;
google_ad_channel ="6353655268";
google_page_url = "http://java-success.blogspot.com.au/2011/10/spring-interview-questions-and-answers.html";
//--&gt;
</script>

<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
</script>
</td>

<td>

Design pattern questions are very popular with the job interviewers, and this post covers Java strategy and factory design pattern in a tutorial style. This blog takes you through a scenario where you will be learning 4 key things.<br />
<br />
<b>1.</b> Factory design pattern<br />
<b>2.</b> Strategy design pattern<br />
<b>3.</b> Applying logic to calculate variance<br />
<b>4. </b>Making use of the <i><b>BigDecimal </b></i>class for the financial calculations. The floating point variables must not be used as they can cause rounding issues.

</td>
</tr>
</table>
<br/>
<b>Q</b>. The&nbsp;scenario&nbsp;is narrated with the diagram below. It is financial application where an investor builds portfolio by buying and selling managed funds and listed securities.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-9lplTFyH2mQ/UE7CqxEnFkI/AAAAAAAAAxU/c-rekCF3e_Y/s1600/CashVarianceInvestDetail.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="470" src="http://2.bp.blogspot.com/-9lplTFyH2mQ/UE7CqxEnFkI/AAAAAAAAAxU/c-rekCF3e_Y/s640/CashVarianceInvestDetail.jpg" width="640" /></a></div>
<br />
<br />
The additional business rules are:<br />
<br />
<b>1. </b>The managed funds that are not of type daily, must be funded from the available cash. Which means, you cannot use the proceeds you receive from selling managed funds or listed securities.<br />
<br />
<b>2</b>. The daily managed funds and listed securities can be switched. This means you sell some daily managed funds to buy some listed&nbsp;securities.<br />
<br />
<b>3.</b> The variance is calculated as total sell amount - total buy amount. The funded from cash amount also needs to be calculated to show the investor.<br />
<br />
Let's look at the code samples:<br />
<br />

<!-- INFOLINKS_OFF -->
<br />
<b>Step 1:</b> Define the <b><i>InvestmentDetail </i></b>value object (i.e. a POJO) that defines each investment &nbsp;detail as shown above.<br />
<br />
<pre class="brush: csharp">import java.math.BigDecimal;

public class InvestmentDetail {
 
 enum TRADE_TYPE {BUY, SELL};
 enum FUND_TYPE {MONTHLY, DAILY, NOT_APPLICABLE}
 
 private String investmentCode;
 private String investmentName;
 private TRADE_TYPE tradeType;
 private FUND_TYPE fundType;
 private BigDecimal orderAmount;
 
 public InvestmentDetail(String investmentCode, String investmentName, 
                   TRADE_TYPE tradeType, FUND_TYPE fundType, BigDecimal orderAmount) {
  this.investmentCode = investmentCode;
  this.investmentName = investmentName;
  this.tradeType = tradeType;
  this.fundType = fundType;
  this.orderAmount = orderAmount;
 }
 
 public boolean isDailyManagedFund() {
  return fundType != null &amp;&amp; fundType == FUND_TYPE.DAILY;
 }
 
 public boolean isMonthlyManagedFund() {
  if(fundType == null  ) {
   throw new IllegalArgumentException("fundType cannot be null");
  }
  return fundType == FUND_TYPE.MONTHLY;
 }
 
 public boolean isListedSecurity() {
  return fundType != null &amp;&amp; fundType == FUND_TYPE.NOT_APPLICABLE;
 }
 
 public boolean isBuy() {
  if(tradeType == null  ) {
   throw new IllegalArgumentException("tradeType cannot be null");
  }
  return tradeType == TRADE_TYPE.BUY;
 }
 
 public boolean isSell() {
  if(tradeType == null  ) {
   throw new IllegalArgumentException("tradeType cannot be null");
  }
  return tradeType == TRADE_TYPE.SELL;
 }

 public BigDecimal getOrderAmount() {
  return orderAmount;
 }
 
 //setters, getters, equals(), hashCode(), and toString() omitted for brevity
}
</pre>
<br />
<b>Step 2</b>: The <b style="font-style: italic;">CashVariance </b>value object (i.e. a<b style="font-style: italic;">&nbsp;</b>POJO) for storing the calculated values like funded from cash and proceed to cash amounts and the variance is derived from these two amounts.<br />
<br />
<pre class="brush: csharp">import java.math.BigDecimal;


public class CashVariance {

 BigDecimal fundedFromCash;
 BigDecimal proceedsToCash;
 
 public CashVariance(BigDecimal fundedFromCash, BigDecimal proceedsToCash) {
  super();
  this.fundedFromCash = fundedFromCash;
  this.proceedsToCash = proceedsToCash;
 }

 public BigDecimal getVariance() {
  return this.proceedsToCash.subtract(this.fundedFromCash);
 }
 
 public void setFundedFromCash(BigDecimal fundedFromCash) {
  this.fundedFromCash = fundedFromCash;
 }

 public void setProceedsToCash(BigDecimal proceedsToCash) {
  this.proceedsToCash = proceedsToCash;
 }

 public String toString() {
  StringBuilder buffer = new StringBuilder();
  buffer.append("fromCash:").append(this.fundedFromCash);
  buffer.append("|toCash:").append(this.proceedsToCash);
  buffer.append("|variance:").append(getVariance());
  return buffer.toString();
 }
 
 //getters, equals(), and hashCode()omitted for brevity
}

</pre>
<br />
<b>Step 3</b>: Define a factory class that decides which cash variance calculation strategy to use depending on the product type.<br />
<br />
<pre class="brush: csharp">//cannot be extended as it is final
public final class VarianceCalculationFactory {
 
 //can't instantiate from outside
 private VarianceCalculationFactory(){}
 
 //factory that creates and return a relevant strategy
 public static CashVarianceCalculationStrategy getCashVarianceStrategy(String productType) {
  if(productType != null ) {
   return new SpecificCashVarianceCalculationStrategy();
  }
  else {
   return new DefaultCashVarianceCalculationStrategy();
  }
 }

}

</pre>
<br />
<b>Q. </b>Why use a <b>factory design pattern</b>? <b><br />A. </b>Factory pattern returns an instance of several subclasses (like <i>DefaultCashVarianceCalculationStrategy</i>, <i>ManagedInvestmentsCashVarianceCalculationStrategy</i>, etc), but the calling code is unaware of the actual implementation class. The calling code invokes the method on the interface for example <i>CashVarianceCalculationStrategy</i> and using polymorphism the relevant class and correct method gets invoked. So, as you can see, the factory pattern reduces the coupling or the dependencies between the calling code and called objects like <i>DefaultCashVarianceCalculationStrategy</i>, <i>ManagedInvestmentsCashVarianceCalculationStrategy</i>, etc. This is a very powerful and common feature in many frameworks.&nbsp; You do not have to create a new <i>DefaultCashVarianceCalculationStrategy</i> or a new <i>ManagedInvestmentsCashVarianceCalculationStrategy</i> on each invocation. In future, to conserve memory, you can decide to cache objects or reuse objects in your factory with no changes required to your calling code. You can also load objects in your factory based on attribute(s) read from an external properties file or some other condition. Another benefit going for the factory is that unlike calling constructors directly, factory patterns have more meaningful names like <i>getShape(…)</i>, <i>getInstance(…)</i>, <i>getStrategy(…)</i> etc, which may make calling code much clear.&nbsp; <b><br /></b><br />
<br />
<br />
<b>Step 4:</b> Define an interface each strategy class will be implementing.<br />
<br />
<pre class="brush: csharp">import java.util.List;

//strategy pattern interface
public interface CashVarianceCalculationStrategy {
 CashVariance calculate (List&lt;InvestmentDetail&gt; investments);
}

</pre>
<br />
<b>Step 5</b>: This is the default implementation of the above interface, and the class that is responsible for calculating the funded from cash and proceed to cash values.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-KISa-z5FNCg/UE7Me-YFFfI/AAAAAAAAAx0/aSEX3JISf84/s1600/SellsBuysAndSwitches.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="550" src="http://3.bp.blogspot.com/-KISa-z5FNCg/UE7Me-YFFfI/AAAAAAAAAx0/aSEX3JISf84/s640/SellsBuysAndSwitches.jpg" width="640" /></a></div>
<br />
<br />
<br />
<pre class="brush: csharp">import java.math.BigDecimal;
import java.util.LinkedList;
import java.util.List;

public class DefaultCashVarianceCalculationStrategy implements CashVarianceCalculationStrategy {

 @Override
 public CashVariance calculate(List&lt;InvestmentDetail&gt; investments) {
  //input validation
  if(investments == null){
   throw new IllegalArgumentException("No investments founds!!!");
  }
  
  List&lt;BigDecimal&gt; buys = new LinkedList&lt;BigDecimal&gt;();
     List&lt;BigDecimal&gt; sells = new LinkedList&lt;BigDecimal&gt;(); 
     List&lt;BigDecimal&gt; switchables = new LinkedList&lt;BigDecimal&gt;(); //pay for buys from the sells
  
  for (InvestmentDetail detail : investments) {
   if(detail.isBuy()){
    processBuy(detail, buys, switchables);
   }
   else if(detail.isSell()){
    processSell(detail, sells, switchables); 
   }
  }
  
  CashVariance variance = calculateVariance(buys, sells, switchables);
  
  return variance;
 }

 private void processSell(InvestmentDetail detail, List&lt;BigDecimal&gt; sells, List&lt;BigDecimal&gt; switchables) {
  if(isSwitch(detail)){
   switchables.add(detail.getOrderAmount()); //+ve amount
  }
  else{
   sells.add(detail.getOrderAmount());
  }
  
 }

 private void processBuy(InvestmentDetail detail, List&lt;BigDecimal&gt; buys, List&lt;BigDecimal&gt; switchables) {
  if(isSwitch(detail)){
   switchables.add(detail.getOrderAmount().negate());  //-ve amount
  }
  else{
   buys.add(detail.getOrderAmount());
  }
  
 }

 //protected so that it can be overridden by another strategy
 protected boolean isSwitch(InvestmentDetail detail){
  return detail != null &amp;&amp; (detail.isDailyManagedFund() || detail.isListedSecurity()); //return false if it is a monthly managed fund
                                                                                       //This has to be funded from cash.
 }
 
 protected CashVariance calculateVariance(List&lt;BigDecimal&gt; buys, List&lt;BigDecimal&gt; sells, List&lt;BigDecimal&gt; switchables) {
  BigDecimal switchedSum = sumAll(switchables);
  BigDecimal fundedFromCash = calculateFundedFromCash(buys, switchedSum);
  BigDecimal proceedsToCash = calculateProceedsToCash(sells, switchedSum);
  
  return new CashVariance(fundedFromCash, proceedsToCash);
 }
 
 private BigDecimal calculateFundedFromCash(List&lt;BigDecimal&gt; buys, BigDecimal switchedSum) {
  BigDecimal buysSum = sumAll(buys);
  //if switchedSum has more buy amount (i.e negative) add the switchedSum to buy
  return buysSum.add((switchedSum.signum() == -1) ? switchedSum.abs() : BigDecimal.ZERO);
 }

 private BigDecimal calculateProceedsToCash(List&lt;BigDecimal&gt; sells, BigDecimal switchedSum) {
  BigDecimal sellsSum = sumAll(sells);
  //if switchedSum has more sell amount (i.e positive) add the switchedSum to sell 
  return sellsSum.add((switchedSum.signum() == 1) ? switchedSum : BigDecimal.ZERO);
 }

 
 private BigDecimal sumAll(List&lt;BigDecimal&gt; values) {
  BigDecimal total = BigDecimal.ZERO;
  for (BigDecimal val : values) {
   total = total.add(val);
  }
  return total;
 } 

}
</pre>
<br />
<b>Q. </b>Why use a strategy design pattern?<br />
<b>A</b>.&nbsp; A strategy design pattern allows you to choose different algorithms at run time depending certain run time conditions like product type. Different algorithms can be isolated in different implementation classes that implement the same interface.<b> </b>Different client classes or invokees can execute different strategies<b> (</b>i.e. algorithms<b>).</b><br />
<br />
<b>Step 6:</b> Finally, the tester class that demonstrates the &nbsp;above scenario by constructing investment details and calculating the variance as shown below.<br />
<br />
<br />
<pre class="brush: csharp">import java.math.BigDecimal;
import java.util.LinkedList;
import java.util.List;

public class VarianceCalcTester {

 public static void main(String[] args) {
  InvestmentDetail ab0001 = new InvestmentDetail("AB0001", "AB Manged Fund", 
                                          InvestmentDetail.TRADE_TYPE.BUY, InvestmentDetail.FUND_TYPE.MONTHLY, 
                                          new BigDecimal("2500.00"));
  
  InvestmentDetail cx0002 = new InvestmentDetail("CX0002", "CX Managed Fund", 
                InvestmentDetail.TRADE_TYPE.BUY, InvestmentDetail.FUND_TYPE.DAILY, 
                new BigDecimal("4500.00"));
  
  InvestmentDetail by007 = new InvestmentDetail("BY007", "BY Managed Fund", 
                InvestmentDetail.TRADE_TYPE.BUY, InvestmentDetail.FUND_TYPE.DAILY, 
                new BigDecimal("2000.00"));
  
  
  InvestmentDetail sh0008 = new InvestmentDetail("SH0008", "BY Managed Fund", 
                InvestmentDetail.TRADE_TYPE.SELL, InvestmentDetail.FUND_TYPE.NOT_APPLICABLE, 
                new BigDecimal("8000.00"));
  
  List&lt;InvestmentDetail&gt; investments = new LinkedList&lt;InvestmentDetail&gt;();
  
  investments.add(ab0001);
  investments.add(cx0002);
  investments.add(by007);
  investments.add(sh0008);
  
  
  //get the variance calculation strategy from the factory

  CashVarianceCalculationStrategy cvCalcStaregy = VarianceCalculationFactory.getCashVarianceStrategy(null); // return the default strategy
  
  CashVariance cv = cvCalcStaregy.calculate(investments);
  
  
  System.out.println(cv); // -ve variance Debit  and +ve variance Credit
 }
}

</pre>
<br /><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://java-success.blogspot.com/search/label/design%20pattern">design pattern</a></p>
    </p>
    </div>
    
    <p class="post-footer">
      <em>posted by Arulkumaran Kumaraswamipillai at 
    <a class="post-footer-link" href="http://java-success.blogspot.in/2013/03/java-design-pattern-interview-questions.html" title="permanent link"> 3/22/2013 10:00:00 AM </a></em>

        <span class="item-action"><a href="https://www.blogger.com/email-post.g?blogID=35897879&postID=4151410113068052294" title="Email Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_email.gif" height="13" width="18"/></a></span><span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/post-edit.g?blogID=35897879&postID=4151410113068052294&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="https://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span>
    </p>
  
  </div>
  <!-- End .post -->
  
  
  
  <!-- Begin #comments -->
 

  <div id="comments">

	<a name="comments"></a>
    
    <h4>7 Comments:</h4>
    
    <dl id="comments-block">
      
      <dt class="comment-poster" id="c7204167449591648804"><a name="c7204167449591648804"></a>
        <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="https://img2.blogblog.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> said...
      </dt>

      <dd class="comment-body">
        <p>i am not understand this sir. please explain this wit diagrams.</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2013/03/java-design-pattern-interview-questions.html?showComment=1401011847758#c7204167449591648804" title="comment permalink">7:57 PM, May 25, 2014</a>
	  <span class="item-control blog-admin pid-337201272"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=7204167449591648804" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c6375324998298669845"><a name="c6375324998298669845"></a>
        <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="https://img2.blogblog.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="https://www.blogger.com/profile/00869496028596976417" rel="nofollow">Arulkumaran Kumaraswamipillai</a> said...
      </dt>

      <dd class="comment-body">
        <p>it is an advanced real life example. Try coding it yourself to better understand.</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2013/03/java-design-pattern-interview-questions.html?showComment=1401063754239#c6375324998298669845" title="comment permalink">10:22 AM, May 26, 2014</a>
	  <span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=6375324998298669845" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c7104738564579402290"><a name="c7104738564579402290"></a>
        <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="https://img2.blogblog.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> said...
      </dt>

      <dd class="comment-body">
        <p>thank you sir.. What is the difference between Strategy and command design pattern?, It looks like both are same</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2013/03/java-design-pattern-interview-questions.html?showComment=1403587755249#c7104738564579402290" title="comment permalink">3:29 PM, June 24, 2014</a>
	  <span class="item-control blog-admin pid-305119038"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=7104738564579402290" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c7112636392291466458"><a name="c7112636392291466458"></a>
        <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="https://img2.blogblog.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="https://www.blogger.com/profile/00869496028596976417" rel="nofollow">Arulkumaran Kumaraswamipillai</a> said...
      </dt>

      <dd class="comment-body">
        <p>Many design patterns look similar, but the intent is different. Have a look at this post http://java-success.blogspot.com.au/2014/06/why-do-proxy-decorator-adapter-facade.html from core Java tutorial which discusses subtle differences between some of the design patterns with diagrams and examples.</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2013/03/java-design-pattern-interview-questions.html?showComment=1403590651805#c7112636392291466458" title="comment permalink">4:17 PM, June 24, 2014</a>
	  <span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=7112636392291466458" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c6828755408811632239"><a name="c6828755408811632239"></a>
        <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="https://img2.blogblog.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="https://www.blogger.com/profile/00869496028596976417" rel="nofollow">Arulkumaran Kumaraswamipillai</a> said...
      </dt>

      <dd class="comment-body">
        <p>Stay tuned, and I will post a blog on difference between Command and strategy design patterns with examples.</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2013/03/java-design-pattern-interview-questions.html?showComment=1403598842255#c6828755408811632239" title="comment permalink">6:34 PM, June 24, 2014</a>
	  <span class="item-control blog-admin pid-341905326"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=6828755408811632239" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c4361422742575588217"><a name="c4361422742575588217"></a>
        <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="https://img2.blogblog.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> said...
      </dt>

      <dd class="comment-body">
        <p>Thanks you</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2013/03/java-design-pattern-interview-questions.html?showComment=1403626098240#c4361422742575588217" title="comment permalink">2:08 AM, June 25, 2014</a>
	  <span class="item-control blog-admin pid-456021670"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=4361422742575588217" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c5902279851828469470"><a name="c5902279851828469470"></a>
        <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="https://img2.blogblog.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="https://www.blogger.com/profile/08695020879531307486" rel="nofollow">nasir husain</a> said...
      </dt>

      <dd class="comment-body">
        <p>thanks for this information .<br />you can find factory design pattern in simple and easy to understand language in a detail on<br />http://www.itsoftpoint.com/?page_id=2666</p>
      </dd>
      <dd class="comment-timestamp"><a href="http://java-success.blogspot.com/2013/03/java-design-pattern-interview-questions.html?showComment=1409722450968#c5902279851828469470" title="comment permalink">3:34 PM, September 03, 2014</a>
	  <span class="item-control blog-admin pid-1901796038"><a style="border:none;" href="https://www.blogger.com/delete-comment.g?blogID=35897879&postID=5902279851828469470" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
    </dl>

    
   <p class="comment-timestamp">
    <div class='comment-form'>
<a name='comment-form'></a>
<h4>Post a Comment</h4><p></p>
<a id='comment-editor-src' href='https://www.blogger.com/comment-iframe.g?blogID=35897879&postID=4151410113068052294'></a><iframe id='comment-editor' src='' class='blogger-iframe-colorize' width='100%' height='410' scrolling='no' frameborder='0' allowtransparency='true'></iframe>
<script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/2702546152-iframe_colorizer.js"></script>
</div>
    </p>
    <p id="postfeeds">Subscribe to Post Comments [<a target="_blank" href="http://java-success.blogspot.com/feeds/4151410113068052294/comments/default" type="application/atom+xml">Atom</a>]</p>
    	    
    


		<p class="comment-timestamp">
	<a href="http://java-success.blogspot.in/">&lt;&lt; Home</a>
    </p>
    </div>


  <!-- End #comments -->
   

</div></div>
<!-- End #main -->







<!-- Begin #sidebar -->
<div id="sidebar"><div id="sidebar2">

  
  
  <h2 class="sidebar-title">Previous Posts</h2>
    <ul id="recently">
    
        <li><a href="http://java-success.blogspot.in/2013/03/agile-software-development-methodology.html">Agile software development methodology questions a...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2013/03/power-of-html-css-and-jquery.html">Power of HTML, CSS and jQuery -- collapsible CSS T...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2013/03/spring-mvc-test-testing-spring-mvc.html">Spring MVC Test -- Testing the Spring MVC Controll...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2013/03/apache-camel-for-asynchronous-processing.html">Apache Camel for asynchronous processing</a></li>
     
        <li><a href="http://java-success.blogspot.in/2013/03/logging-in-java-with-logback-and-mdc.html">Logging in Java with Logback and MDC</a></li>
     
        <li><a href="http://java-success.blogspot.in/2013/03/spring-mvc-view-resolvers.html">Spring MVC View Resolvers</a></li>
     
        <li><a href="http://java-success.blogspot.in/2013/02/javascript-coding-questions-and-answers.html">JavaScript Coding Questions and Answers</a></li>
     
        <li><a href="http://java-success.blogspot.in/2013/02/handling-concurrent-modifications-in.html">Handling Concurrent modifications in Java</a></li>
     
        <li><a href="http://java-success.blogspot.in/2013/02/spring-jdbc-template-examples-calling.html">Spring JDBC Template examples -- calling stored pr...</a></li>
     
        <li><a href="http://java-success.blogspot.in/2013/02/jms-versus-amqp-enterprise-integration.html">JMS versus AMQP, Enterprise Integration Patterns (...</a></li>
     
  </ul>
  
  
  
  
  
  <!-- Begin #profile-container -->
  
    <div id="profile-container"><h2 class="sidebar-title">About Me</h2>
<dl class="profile-datablock"><dt class="profile-img"><a href="https://plus.google.com/109240621969095737337"><img src="//lh3.googleusercontent.com/-XMLxx0v_R7A/AAAAAAAAAAI/AAAAAAAACxk/8BeHFmsEuy8/s80-c/photo.jpg" width="80" height="80" alt="My Photo"></a></dt>
<dd class="profile-data"><strong>Name:</strong> <a rel="author" href="https://plus.google.com/109240621969095737337"> Arulkumaran Kumaraswamipillai </a></dd>
</dl>
<p class="profile-textblock">Java freelancer from Australia. As a contractor, attended 100+ job interviews and received multiple job offers. Authored Java career books that sold over 30,000 copies.<br><br><a href="http://www.java-success.com" rel="nofollow" target="_blank">www.java-success.com</a> for 500+ Java/JEE job interview questions and answers and tutorials.<br></p>
<p class="profile-link"><a rel="author" href="https://plus.google.com/109240621969095737337">View my complete profile</a></p></div>
  
  <!-- End #profile -->

  
  <p id="powered-by"><a href="http://www.blogger.com"><img src="http://buttons.blogger.com/bloggerbutton1.gif" alt="Powered by Blogger" /></a></p>
  <p id="blogfeeds">Subscribe to<br />Posts [<a target="_blank" href="http://java-success.blogspot.com/feeds/posts/default" type="application/atom+xml">Atom</a>]</p>

  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  
   
  <!--
  <p>This is a paragraph of text that could go in the sidebar.</p>
  -->
  
  <script type="text/javascript"><!--
google_ad_client = "pub-3764234023451771";
google_ad_host = "pub-1556223355139109";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>  



</div></div>
<!-- End #sidebar -->




<!-- Begin #footer -->
<div id="footer"><hr />

  <p><!-- This is an optional footer. If you want text here, place it inside these tags, and remove this comment. -->&nbsp;</p>

  </div>
<!-- End #footer -->




</div>
<!-- End #content -->






</div></div></div></div>
<!-- End wraps -->

</body>
</html>